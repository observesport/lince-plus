import{Q as f,U as u,d as c,cq as p,J as e,cr as j,V as h,cs as g,ct as b,O as y,cu as x,bK as v,R,n as w,co as E,ak as C,aP as S}from"./index-BM98bpvU.js";import{F as m}from"./FullscreenBox-BQzYGKhs.js";const k=({data:t})=>{const i=c.useRef(null);if(!t||!t.serie||t.serie.length===0)return e.jsx("div",{children:"No data available"});const s={chart:{type:"pie"},title:{text:t.name},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{type:"pie",name:t.name,data:t.serie}],accessibility:{enabled:!1}};return e.jsx("div",{style:{padding:"10px"},children:e.jsx(g,{ref:i,highcharts:b,options:s,style:{width:"100%"}})})},L=({className:t,style:i})=>{const s=f(),a=u(r=>r.lince.pie);c.useEffect(()=>{s(p())},[s]);let o=a.criteria;Object.keys(a).forEach(r=>{r!=="criteria"&&(o=o.map(d=>d.name===r?{...d,serie:[...a[r]]}:d))});const n=[{name:"Name",selector:r=>r.name,sortable:!0}];return e.jsx("div",{className:t,style:i,children:e.jsx(j,{title:e.jsx(h,{id:"register-summary"}),columns:n,data:o,expandableRows:!0,expandableRowsComponent:k})})},P=({className:t,style:i})=>{const s=c.useRef(null),{t:a}=y(),o=f(),n=u(l=>l.lince.chart);c.useEffect(()=>{o(x())},[o]);const r={};n&&n.ySeriesLabels&&n.ySeriesLabels.forEach(l=>{r[l.key]=l.value});const d={chart:{type:"spline",zooming:{pinchType:"x"}},title:{text:""},subtitle:{text:""},xAxis:{categories:n.xSeriesLabels,type:"datetime"},yAxis:{title:{text:a("categories")},labels:{formatter:function(){const l=r[this.value];return l!=="undefined"?l:this.value.toString()}},plotLines:[{value:0,width:1,color:"#808080"}],tickInterval:1},tooltip:{valueSuffix:"Cat"},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:0},plotOptions:{spline:{marker:{radius:4,lineColor:"#666666",lineWidth:1}}},series:n.series,accessibility:{enabled:!1}};return e.jsx("div",{className:t,style:i,children:e.jsx(g,{ref:s,highcharts:b,options:d,style:{width:"100%"}})})},A=({className:t,style:i})=>{const s=u(a=>a.general.windowWidth);return c.useEffect(()=>{v()},[]),e.jsx("div",{className:t,style:{padding:"5px",...i},children:e.jsx(R,{gutter:[16,16],justify:"start",children:e.jsx(w,{xs:24,sm:24,md:24,style:{height:"100%"},children:e.jsxs("div",{style:{display:"flex",flexDirection:s>=1024?"row":"column",width:"100%",height:"100%"},children:[e.jsx(E,{defaultSize:{width:s>=1024?"30%":"100%",height:"100%"},minWidth:s>=1024?300:"100%",minHeight:"600",children:e.jsx(m,{title:e.jsx(h,{id:"quick-graph"}),children:e.jsx(L,{})})}),e.jsx("div",{style:{width:"100%"},children:e.jsx(m,{title:e.jsx(h,{id:"time-graph"}),children:e.jsx(P,{})})})]})})})})},I=()=>{const t=f(),i=u(s=>s.lince.sessionParams.REGISTER);return c.useEffect(()=>{t(C()),t(x()),t(p())},[t]),c.useEffect(()=>{if(i){const s=setTimeout(()=>{t(x()),t(p())},300);return()=>clearTimeout(s)}},[i,t]),e.jsxs(e.Fragment,{children:[e.jsx(S,{pageName:e.jsx(h,{id:"results"})}),e.jsx("div",{className:"overflow-hidden rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:e.jsx(A,{})})]})};export{I as default};
