import{g as be,r as ve,o as te,d as s,u as Ce,e as L,F as ye,b0 as $e,b1 as Ie,b2 as we,w as Se,ax as Ee,az as ze,ay as Be,aC as Re,b3 as Oe,b4 as q,b5 as Me,b6 as Te,b7 as He,b8 as Ne,aS as Le,aq as R,ar as O,O as ke,U as V,Q as ne,J as e,S as Ae,R as S,n as f,V as h,b9 as W,ba as U,aX as X,aU as T,T as B,bb as G,B as k,bc as De,bd as Pe,be as Fe,bf as _e,aZ as qe,bg as Ve,bh as We,al as Ue,aQ as Xe}from"./index-Cp-dRVR4.js";import{A as Ge,S as Q,E as Qe}from"./AutoForm-CbbZBGsc.js";import{D as N}from"./index-CScItKFq.js";import{H as J}from"./HiddenField-cOtzt-W2.js";const H=(n,t,o,r,i)=>({background:n,border:`${te(r.lineWidth)} ${r.lineType} ${t}`,[`${i}-icon`]:{color:o}}),Je=n=>{const{componentCls:t,motionDurationSlow:o,marginXS:r,marginSM:i,fontSize:c,fontSizeLG:u,lineHeight:g,borderRadiusLG:x,motionEaseInOutCirc:d,withDescriptionIconSize:v,colorText:C,colorTextHeading:I,withDescriptionPadding:m,defaultPadding:l}=n;return{[t]:Object.assign(Object.assign({},ve(n)),{position:"relative",display:"flex",alignItems:"center",padding:l,wordWrap:"break-word",borderRadius:x,[`&${t}-rtl`]:{direction:"rtl"},[`${t}-content`]:{flex:1,minWidth:0},[`${t}-icon`]:{marginInlineEnd:r,lineHeight:0},"&-description":{display:"none",fontSize:c,lineHeight:g},"&-message":{color:I},[`&${t}-motion-leave`]:{overflow:"hidden",opacity:1,transition:`max-height ${o} ${d}, opacity ${o} ${d},
        padding-top ${o} ${d}, padding-bottom ${o} ${d},
        margin-bottom ${o} ${d}`},[`&${t}-motion-leave-active`]:{maxHeight:0,marginBottom:"0 !important",paddingTop:0,paddingBottom:0,opacity:0}}),[`${t}-with-description`]:{alignItems:"flex-start",padding:m,[`${t}-icon`]:{marginInlineEnd:i,fontSize:v,lineHeight:0},[`${t}-message`]:{display:"block",marginBottom:r,color:I,fontSize:u},[`${t}-description`]:{display:"block",color:C}},[`${t}-banner`]:{marginBottom:0,border:"0 !important",borderRadius:0}}},Ze=n=>{const{componentCls:t,colorSuccess:o,colorSuccessBorder:r,colorSuccessBg:i,colorWarning:c,colorWarningBorder:u,colorWarningBg:g,colorError:x,colorErrorBorder:d,colorErrorBg:v,colorInfo:C,colorInfoBorder:I,colorInfoBg:m}=n;return{[t]:{"&-success":H(i,r,o,n,t),"&-info":H(m,I,C,n,t),"&-warning":H(g,u,c,n,t),"&-error":Object.assign(Object.assign({},H(v,d,x,n,t)),{[`${t}-description > pre`]:{margin:0,padding:0}})}}},Ke=n=>{const{componentCls:t,iconCls:o,motionDurationMid:r,marginXS:i,fontSizeIcon:c,colorIcon:u,colorIconHover:g}=n;return{[t]:{"&-action":{marginInlineStart:i},[`${t}-close-icon`]:{marginInlineStart:i,padding:0,overflow:"hidden",fontSize:c,lineHeight:te(c),backgroundColor:"transparent",border:"none",outline:"none",cursor:"pointer",[`${o}-close`]:{color:u,transition:`color ${r}`,"&:hover":{color:g}}},"&-close-text":{color:u,transition:`color ${r}`,"&:hover":{color:g}}}}},Ye=n=>({withDescriptionIconSize:n.fontSizeHeading3,defaultPadding:`${n.paddingContentVerticalSM}px 12px`,withDescriptionPadding:`${n.paddingMD}px ${n.paddingContentHorizontalLG}px`}),et=be("Alert",n=>[Je(n),Ze(n),Ke(n)],Ye);var Z=function(n,t){var o={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&t.indexOf(r)<0&&(o[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(n);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(n,r[i])&&(o[r[i]]=n[r[i]]);return o};const tt={success:Be,info:ze,error:Ee,warning:Se},nt=n=>{const{icon:t,prefixCls:o,type:r}=n,i=tt[r]||null;return t?we(t,s.createElement("span",{className:`${o}-icon`},t),()=>({className:L(`${o}-icon`,t.props.className)})):s.createElement(i,{className:`${o}-icon`})},ot=n=>{const{isClosable:t,prefixCls:o,closeIcon:r,handleClose:i,ariaProps:c}=n,u=r===!0||r===void 0?s.createElement(Re,null):r;return t?s.createElement("button",Object.assign({type:"button",onClick:i,className:`${o}-close-icon`,tabIndex:0},c),u):null},oe=s.forwardRef((n,t)=>{const{description:o,prefixCls:r,message:i,banner:c,className:u,rootClassName:g,style:x,onMouseEnter:d,onMouseLeave:v,onClick:C,afterClose:I,showIcon:m,closable:l,closeText:j,closeIcon:a,action:y,id:M}=n,b=Z(n,["description","prefixCls","message","banner","className","rootClassName","style","onMouseEnter","onMouseLeave","onClick","afterClose","showIcon","closable","closeText","closeIcon","action","id"]),[z,se]=s.useState(!1),A=s.useRef(null);s.useImperativeHandle(t,()=>({nativeElement:A.current}));const{getPrefixCls:ie,direction:ae,closable:w,closeIcon:D,className:le,style:ce}=Ce("alert"),p=ie("alert",r),[de,me,ue]=et(p),pe=$=>{var E;se(!0),(E=n.onClose)===null||E===void 0||E.call(n,$)},P=s.useMemo(()=>n.type!==void 0?n.type:c?"warning":"info",[n.type,c]),fe=s.useMemo(()=>typeof l=="object"&&l.closeIcon||j?!0:typeof l=="boolean"?l:a!==!1&&a!==null&&a!==void 0?!0:!!w,[j,a,l,w]),F=c&&m===void 0?!0:m,ge=L(p,`${p}-${P}`,{[`${p}-with-description`]:!!o,[`${p}-no-icon`]:!F,[`${p}-banner`]:!!c,[`${p}-rtl`]:ae==="rtl"},le,u,g,ue,me),he=ye(b,{aria:!0,data:!0}),xe=s.useMemo(()=>typeof l=="object"&&l.closeIcon?l.closeIcon:j||(a!==void 0?a:typeof w=="object"&&w.closeIcon?w.closeIcon:D),[a,l,j,D]),je=s.useMemo(()=>{const $=l??w;if(typeof $=="object"){const{closeIcon:E}=$;return Z($,["closeIcon"])}return{}},[l,w]);return de(s.createElement($e,{visible:!z,motionName:`${p}-motion`,motionAppear:!1,motionEnter:!1,onLeaveStart:$=>({maxHeight:$.offsetHeight}),onLeaveEnd:I},({className:$,style:E},_)=>s.createElement("div",Object.assign({id:M,ref:Ie(A,_),"data-show":!z,className:L(ge,$),style:Object.assign(Object.assign(Object.assign({},ce),x),E),onMouseEnter:d,onMouseLeave:v,onClick:C,role:"alert"},he),F?s.createElement(nt,{description:o,icon:n.icon,prefixCls:p,type:P}):null,s.createElement("div",{className:`${p}-content`},i?s.createElement("div",{className:`${p}-message`},i):null,o?s.createElement("div",{className:`${p}-description`},o):null),y?s.createElement("div",{className:`${p}-action`},y):null,s.createElement(ot,{isClosable:fe,prefixCls:p,closeIcon:xe,handleClose:pe,ariaProps:je}))))});function rt(n,t,o){return t=q(t),Oe(n,Me()?Reflect.construct(t,o||[],q(n).constructor):t.apply(n,o))}let st=(function(n){function t(){var o;return Ne(this,t),o=rt(this,t,arguments),o.state={error:void 0,info:{componentStack:""}},o}return Te(t,n),He(t,[{key:"componentDidCatch",value:function(r,i){this.setState({error:r,info:i})}},{key:"render",value:function(){const{message:r,description:i,id:c,children:u}=this.props,{error:g,info:x}=this.state,d=x?.componentStack||null,v=typeof r>"u"?(g||"").toString():r,C=typeof i>"u"?d:i;return g?s.createElement(oe,{id:c,type:"error",message:v,description:s.createElement("pre",{style:{fontSize:"0.9em",overflowX:"auto"}},C)}):u}}])})(s.Component);const re=oe;re.ErrorBoundary=st;const it=()=>Le({type:"object",properties:{criteria:{title:"Criterios",type:"array",items:{title:" ",type:"object",properties:{id:{type:"integer",title:"ID"},name:{type:"string",title:"Criterio"},code:{type:"string",title:"Código"},persistence:{title:"",type:"boolean",uniforms:{}},informationNode:{title:"",type:"boolean",uniforms:{}},innerCategories:{title:"Categorías",type:"array",uniforms:{},items:{type:"object",properties:{id:{type:"integer",title:"ID"},name:{type:"string",title:""},code:{type:"string",title:""}},required:["name","code"]}}},required:["name","code"]}}},required:["criteria"]});var at={icon:function(t,o){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z",fill:t}},{tag:"path",attrs:{d:"M184 840h656V184H184v656zm130-367.8h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H688c6.5 0 10.3 7.4 6.5 12.7l-210.6 292a31.8 31.8 0 01-51.7 0L307.5 484.9c-3.8-5.3 0-12.7 6.5-12.7z",fill:o}},{tag:"path",attrs:{d:"M432.2 657.7a31.8 31.8 0 0051.7 0l210.6-292c3.8-5.3 0-12.7-6.5-12.7h-46.9c-10.3 0-19.9 5-25.9 13.3L458 584.3l-71.2-98.8c-6-8.4-15.7-13.3-25.9-13.3H314c-6.5 0-10.3 7.4-6.5 12.7l124.7 172.8z",fill:t}}]}},name:"check-square",theme:"twotone"},lt=function(t,o){return s.createElement(R,O({},t,{ref:o,icon:at}))},K=s.forwardRef(lt),ct={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c17.7 0 32 14.3 32 32v736c0 17.7-14.3 32-32 32H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32zM639.98 338.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-square",theme:"filled"},dt=function(t,o){return s.createElement(R,O({},t,{ref:o,icon:ct}))},Y=s.forwardRef(dt),mt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},ut=function(t,o){return s.createElement(R,O({},t,{ref:o,icon:mt}))},ee=s.forwardRef(ut),pt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"},ft=function(t,o){return s.createElement(R,O({},t,{ref:o,icon:pt}))},gt=s.forwardRef(ft),ht={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},xt=function(t,o){return s.createElement(R,O({},t,{ref:o,icon:ht}))},jt=s.forwardRef(xt);const bt=()=>{const{moveUp:n,moveDown:t,moveUpDisabled:o,moveDownDisabled:r}=Pe();return e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[e.jsx(B,{title:"Move up",children:e.jsx(k,{type:"primary",shape:"circle",size:"small",disabled:o,onClick:n,icon:e.jsx(Fe,{})})}),e.jsx(B,{title:"Move down",children:e.jsx(k,{type:"primary",shape:"circle",size:"small",disabled:r,onClick:t,icon:e.jsx(_e,{})})}),e.jsx(qe,{type:"primary",name:"",icon:e.jsx(Ve,{})})]})},vt=({onSave:n,title:t,showSubmit:o=!0,showWarning:r=!0,showAutoComplete:i=!0})=>{const{t:c}=ke(),u=V(m=>m.lince.tool),g=V(m=>m.lince.status),x=ne(),d=s.useRef(null),v=(m,l,j)=>{let a=`${l}${j}`,y=j;for(;m.includes(a);)y++,a=`${l}${y}`;return a},C=()=>{if(!d.current)return;const l=[...d.current.getModel().criteria||[]],j=l.map(a=>a.code).filter(Boolean);l.forEach((a,y)=>{if((!a.name||a.name.trim()==="")&&(a.name=`Criteria ${y+1}`),(!a.code||a.code.trim()==="")&&(a.code=v(j,"C",y+1),j.push(a.code)),a.innerCategories&&Array.isArray(a.innerCategories)){const M=a.innerCategories.map(b=>b.code).filter(Boolean);a.innerCategories.forEach((b,z)=>{(!b.name||b.name.trim()==="")&&(b.name=`Category ${z+1}`),(!b.code||b.code.trim()==="")&&(b.code=v(M,`${a.code||"C"+(y+1)}_`,z+1),M.push(b.code))})}}),d.current.onChange("criteria",l)},I=m=>{const l=m.criteria;x(De(l)),n?.(l)};return g==="loading"?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(Ae,{size:"large"})}):e.jsxs("div",{style:{padding:"20px"},children:[t&&e.jsx("h2",{style:{marginBottom:"20px"},children:t}),r&&e.jsx(S,{style:{marginBottom:16},children:e.jsx(f,{span:24,children:e.jsx(re,{message:e.jsx(h,{id:"code-change-warning"}),type:"warning",showIcon:!0,icon:e.jsx(jt,{}),closable:!0})})}),e.jsxs(Ge,{ref:d,schema:it(),model:{criteria:u},onSubmit:I,disabled:!1,children:[o&&e.jsx(Q,{value:c("update")}),e.jsx(Qe,{}),e.jsx(N,{}),e.jsx(W,{name:"criteria",children:e.jsx(U,{name:"$",allowOrdering:!0,buttonsPlacement:"inline",children:e.jsxs(X,{showInlineError:!0,name:"",children:[e.jsx(J,{name:"id"}),e.jsxs(S,{gutter:[16,8],children:[e.jsxs(f,{xs:24,md:8,lg:6,children:[e.jsx(T,{name:"name",label:e.jsx(h,{id:"criteria"})}),e.jsx(T,{name:"code",label:e.jsx(h,{id:"code"})}),e.jsx(bt,{})]}),e.jsx(f,{xs:24,md:6,lg:5,children:e.jsxs(S,{gutter:[8,8],children:[e.jsx(f,{span:24,children:e.jsx(B,{placement:"leftTop",title:e.jsx(h,{id:"persistent-criteria-description"}),children:e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[e.jsx(ee,{style:{marginRight:"5px"}}),e.jsx(h,{id:"persistent-criteria"})]}),e.jsx(G,{name:"persistence",checkedChildren:e.jsx(K,{}),unCheckedChildren:e.jsx(Y,{})})]})})}),e.jsx(f,{span:24,children:e.jsx(B,{placement:"bottomLeft",title:e.jsx(h,{id:"criteria-with-content-description"}),children:e.jsxs("div",{children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[e.jsx(ee,{style:{marginRight:"5px"}}),e.jsx(h,{id:"criteria-with-content"})]}),e.jsx(G,{name:"informationNode",checkedChildren:e.jsx(K,{}),unCheckedChildren:e.jsx(Y,{})})]})})})]})}),e.jsxs(f,{xs:24,md:10,lg:13,children:[e.jsx("div",{style:{marginBottom:"8px"},children:e.jsxs(S,{gutter:8,children:[e.jsx(f,{span:11,children:e.jsx("b",{children:e.jsx(h,{id:"category"})})}),e.jsx(f,{span:11,children:e.jsx("b",{children:e.jsx(h,{id:"code"})})}),e.jsx(f,{span:2})]})}),e.jsx(W,{name:"innerCategories",label:!1,children:e.jsx(U,{name:"$",allowOrdering:!0,children:e.jsxs(X,{name:"",label:!1,children:[e.jsx(J,{name:"id"}),e.jsxs(S,{gutter:8,children:[e.jsx(f,{span:11,children:e.jsx(T,{name:"name"})}),e.jsx(f,{span:11,children:e.jsx(T,{name:"code"})})]})]})})})]})]}),e.jsx(S,{gutter:16,children:e.jsx(f,{md:24,children:e.jsx(N,{})})})]})})}),e.jsx(N,{}),e.jsxs(S,{justify:"space-between",align:"middle",style:{marginTop:"16px"},children:[e.jsx(f,{children:o&&e.jsx(Q,{value:c("update")})}),i&&e.jsx(f,{children:e.jsx(B,{title:e.jsx(h,{id:"auto-complete-tool-description"}),children:e.jsx(k,{type:"primary",icon:e.jsx(gt,{}),onClick:C,size:"large",disabled:!1,children:e.jsx(h,{id:"auto-complete-tool"})})})})]})]})]})},wt=()=>{const n=ne();return s.useEffect(()=>{n(We()),n(Ue())},[n]),e.jsxs(e.Fragment,{children:[e.jsx(Xe,{pageName:e.jsx(h,{id:"tool"})}),e.jsx("div",{className:"overflow-hidden rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:e.jsx(vt,{})})]})};export{wt as default};
