import{ag as e,aS as V,aH as $,ap as t,aw as P,aO as U,ah as M,ai as v,r as j,aT as H,a7 as x,aU as O,aV as q,aW as Z,aX as _,aY as X,aZ as Y,a_ as G}from"./index-b2960181.js";import{c as h,m}from"./createLucideIcon-2cf6e953.js";import{M as N}from"./index-0a8e75a8.js";import"./context-e5dbd941.js";const J=s=>e.jsxs("div",{className:"flex w-full border-l-6 border-warning bg-warning bg-opacity-[15%] px-7 py-8 shadow-md dark:bg-[#1B1B24] dark:bg-opacity-30 md:p-9",children:[e.jsx("div",{className:"mr-5 flex h-9 w-9 items-center justify-center rounded-lg bg-warning bg-opacity-30",children:e.jsx(K,{})}),e.jsxs("div",{className:"w-full",children:[e.jsx("h5",{className:"mb-3 text-lg font-semibold text-[#9D5425]",children:s.title}),e.jsx("div",{className:"leading-relaxed text-[#D0915C]",children:s.message})]})]}),K=()=>e.jsx("svg",{width:"19",height:"16",viewBox:"0 0 19 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{d:"M1.50493 16H17.5023C18.6204 16 19.3413 14.9018 18.8354 13.9735L10.8367 0.770573C10.2852 -0.256858 8.70677 -0.256858 8.15528 0.770573L0.156617 13.9735C-0.334072 14.8998 0.386764 16 1.50493 16ZM10.7585 12.9298C10.7585 13.6155 10.2223 14.1433 9.45583 14.1433C8.6894 14.1433 8.15311 13.6155 8.15311 12.9298V12.9015C8.15311 12.2159 8.6894 11.688 9.45583 11.688C10.2223 11.688 10.7585 12.2159 10.7585 12.9015V12.9298ZM8.75236 4.01062H10.2548C10.6674 4.01062 10.9127 4.33826 10.8671 4.75288L10.2071 10.1186C10.1615 10.5049 9.88572 10.7455 9.50142 10.7455C9.11929 10.7455 8.84138 10.5028 8.79579 10.1186L8.13574 4.75288C8.09449 4.33826 8.33984 4.01062 8.75236 4.01062Z",fill:"#FBBF24"})});/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=h("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=h("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=h("CirclePlus",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=h("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=h("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const re=h("RefreshCcwDot",[["path",{d:"M3 2v6h6",key:"18ldww"}],["path",{d:"M21 12A9 9 0 0 0 6 5.3L3 8",key:"1pbrqz"}],["path",{d:"M21 22v-6h-6",key:"usdfbe"}],["path",{d:"M3 12a9 9 0 0 0 15 6.7l3-2.7",key:"1hosoe"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=h("Trash",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=h("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),le={getProfile:ie};function ie(s){return s?D.get("/api/userprofile/me",{headers:{Authorization:ne(s)}}):null}const D=V.create({baseURL:$.url.API_BASE_URL});D.interceptors.response.use(s=>s,function(s){return s.response.status===404?{status:s.response.status}:Promise.reject(s.response)});function ne(s){return`Bearer ${s}`}const oe=({project:s})=>{var l,c;return e.jsxs("div",{className:"p-4 bg-white dark:bg-gray-800 rounded-lg shadow-md",children:[e.jsx("h3",{className:"text-lg font-semibold mb-3 text-gray-800 dark:text-gray-200",children:e.jsx(t,{id:"project-details"})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx(t,{id:"project-id"}),":"]}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:s==null?void 0:s.id})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx(t,{id:"project-name"}),":"]}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:s==null?void 0:s.projectName})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx(t,{id:"project-created"}),":"]}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-gray-200",children:new Date(s==null?void 0:s.createTimestamp).toLocaleDateString()})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx(t,{id:"project-registers"}),":"]}),e.jsx(P,{color:"orange",children:((l=s==null?void 0:s.register)==null?void 0:l.length)||"N/A"})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:[e.jsx(t,{id:"project-criteria"}),":"]}),e.jsx(P,{color:"green",children:((c=s==null?void 0:s.observationTool)==null?void 0:c.length)||"N/A"})]})]})]})},de=({onProjectsRefresh:s})=>{const l=M(),c=j.useRef(null),a=()=>{var d;(d=c.current)==null||d.click()},o=async d=>{var p;const n=(p=d.target.files)==null?void 0:p[0];if(n){if(n.type!=="application/xml"&&!n.name.endsWith(".xml")){m.error("Please select an XML file");return}const f=prompt("Enter a name for the project:");if(!f){m.error("Project name is required");return}try{await l(X({file:n,projectName:f})),m.success("Project imported successfully"),s()}catch{m.error("Failed to import project")}c.current&&(c.current.value="")}},i=async()=>{const d=prompt("Enter a name for the new project:");if(!d){m.error("Project name is required");return}try{await l(Y({projectName:d,description:"",status:"DRAFT"})),m.success("Project created successfully"),s()}catch{m.error("Failed to create project")}};return e.jsxs("div",{className:"mx-auto mt-4.5 mb-4.5 grid grid-cols-3 rounded-md border border-stroke py-2.5 shadow-1 dark:border-strokedark dark:bg-[#37404F]",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 px-4 xsm:flex-row",children:[e.jsxs(x,{type:"primary",className:"bg-green-500 whitespace-normal h-fit flex items-center justify-center",onClick:a,children:[e.jsx(ce,{className:"mr-1",size:16}),e.jsx(t,{id:"import-project"})]}),e.jsx("input",{type:"file",ref:c,onChange:o,accept:".xml,application/xml",style:{display:"none"}})]}),e.jsx("div",{className:"flex flex-col items-center justify-center gap-1 px-4 xsm:flex-row",children:e.jsxs(x,{type:"primary",className:"bg-green-500 whitespace-normal h-fit flex items-center justify-center",onClick:i,children:[e.jsx(ee,{className:"mr-1",size:16}),e.jsx(t,{id:"create-project"})]})})]})},xe=s=>{const{colSpan:l,colSpanBig:c,activeProject:a}=s,o=M(),i=v(r=>r.lince.projects),[d,n]=j.useState(!1),[p,f]=j.useState(null),[b,T]=j.useState(null),[I,g]=j.useState(!1),k=a?a.id:null,y=()=>{o(q())};j.useEffect(()=>{y()},[o]);const A=r=>{T(r),g(!0)},B=r=>{f(r),n(!0)},L=async()=>{p&&(await o(Z(p.id)),n(!1),f(null),y())},R=()=>{n(!1),f(null)},w=r=>{o(_(r.id)),g(!1),m.success(`Project ${r.projectName} selected successfully`)},W=r=>{N.confirm({title:e.jsx(t,{id:"confirm-select-project"}),content:e.jsxs("div",{children:[e.jsx(t,{id:"are-you-sure-select-project"}),e.jsxs("strong",{children:[" ",r.projectName]}),"?"]}),onOk:()=>{w(r)},onCancel:()=>{},okText:e.jsx(t,{id:"select"}),cancelText:e.jsx(t,{id:"cancel"})})};return e.jsxs("div",{className:`col-span-${l}  md:col-span-${c} rounded-sm border border-stroke bg-white p-7.5 shadow-default dark:border-strokedark dark:bg-boxdark`,children:[e.jsxs("div",{className:"mb-4 justify-between gap-4 sm:flex",children:[e.jsx("div",{children:e.jsxs("h4",{className:"text-xl font-semibold text-black dark:text-white flex items-center",children:[e.jsx("div",{className:"flex items-center mr-4",children:e.jsx(H,{title:e.jsx(t,{id:"refresh-projects"}),children:e.jsx(x,{type:"text",className:"p-1 shadow-md",onClick:y,children:e.jsx(re,{size:24})})})}),e.jsx("div",{children:e.jsx(t,{id:"your-projects"})})]})}),e.jsx("div",{children:e.jsx("div",{className:"relative z-20 inline-block",children:e.jsx(t,{id:"your-projects-description"})})})]}),e.jsxs("div",{children:[e.jsx(de,{onProjectsRefresh:y}),e.jsxs("table",{className:"w-full border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"border-b border-[#eee] px-4 py-3 text-left",children:e.jsx(t,{id:"project"})}),e.jsx("th",{className:"border-b border-[#eee] px-4 py-3 text-left",children:e.jsx(t,{id:"status"})}),e.jsx("th",{className:"border-b border-[#eee] px-4 py-3 text-left",children:e.jsx(t,{id:"action"})})]})}),e.jsx("tbody",{children:i&&i.map((r,F)=>e.jsxs("tr",{className:r.id===k?"bg-meta-9":"",children:[e.jsxs("td",{className:"border-b border-[#eee] py-1 px-1 pl-1 dark:border-strokedark xl:pl-8",children:[e.jsx("div",{className:"font-medium text-black dark:text-white",children:r.projectName||e.jsx(t,{id:"project-without-title"})}),e.jsx("p",{className:"text-xs",children:r.id})]}),e.jsx("td",{className:"border-b border-[#eee] py-5 px-4 dark:border-strokedark",children:e.jsx("p",{className:"inline-flex rounded-full bg-success bg-opacity-10 py-1 px-3 text-sm font-medium text-success",children:r.status})}),e.jsx("td",{className:"border-b  py-5 px-4 dark:border-strokedark",children:e.jsxs("div",{className:"flex items-center space-x-3.5",children:[e.jsx(x,{type:"text",className:"p-1 shadow-md",onClick:()=>A(r),children:e.jsx(te,{strokeWidth:1})}),e.jsx(x,{type:"text",className:"p-1 bg-white shadow-md",onClick:()=>B(r),children:e.jsx(ae,{strokeWidth:1})}),e.jsx(x,{type:"text",className:"p-1 bg-white shadow-md",onClick:()=>{o(O(r.id)).then(z=>{var C;const E=window.URL.createObjectURL(new Blob([z.payload])),u=document.createElement("a");u.href=E,u.setAttribute("download",`${r.projectName}.xml`),document.body.appendChild(u),u.click(),(C=u.parentNode)==null||C.removeChild(u)}).catch(()=>{m.error("Failed to export project")})},children:e.jsx(se,{strokeWidth:1})}),e.jsx(x,{type:"text",className:`p-1 shadow-md ${r.id===k?"bg-meta-3 text-white":"bg-white"}`,onClick:()=>W(r),disabled:r.id===k,children:e.jsx(Q,{strokeWidth:1})})]})})]},F))})]})]}),e.jsx(N,{title:e.jsx(t,{id:"confirm-delete-project"}),open:d,onOk:L,onCancel:R,okText:e.jsx(t,{id:"delete"}),cancelText:e.jsx(t,{id:"cancel"}),children:e.jsxs("p",{children:[e.jsx(t,{id:"are-you-sure-delete-project"}),p&&e.jsxs("strong",{children:[" ",p.projectName]}),"?"]})}),e.jsx(N,{title:e.jsx(t,{id:"project-info"}),open:I,onCancel:()=>g(!1),footer:[e.jsx(x,{onClick:()=>g(!1),children:e.jsx(t,{id:"close"})},"close"),e.jsx(x,{type:"primary",onClick:()=>b&&w(b),children:e.jsx(t,{id:"set-as-active"})},"setActive")],children:b&&e.jsx(oe,{project:b})})]})},me=s=>({activeProject:s.lince.projectInfo}),he=U(me)(xe),pe=s=>{const{numRegisters:l,numObservationTools:c,numProjects:a}=s;return e.jsxs("div",{className:"mx-auto mt-4.5 mb-5.5 grid max-w-100 grid-cols-3 rounded-md border border-stroke py-2.5 shadow-1 dark:border-strokedark dark:bg-[#37404F]",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 border-r border-stroke px-4 dark:border-strokedark xsm:flex-row",children:[e.jsx("span",{className:"font-semibold text-black dark:text-white",children:a}),e.jsx("span",{className:"text-sm",children:e.jsx(t,{id:"projects"})})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 border-r border-stroke px-4 dark:border-strokedark xsm:flex-row",children:[e.jsx("span",{className:"font-semibold text-black dark:text-white",children:c}),e.jsx("span",{className:"text-sm",children:e.jsx(t,{id:"observation-tools"})})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 px-4 xsm:flex-row",children:[e.jsx("span",{className:"font-semibold text-black dark:text-white",children:l}),e.jsx("span",{className:"text-sm",children:e.jsx(t,{id:"observed-registers"})})]})]})},je=s=>{const{colSpan:l,colSpanBig:c}=s,a=v(i=>i.user.user),o=v(i=>i.user.jwt);return j.useEffect(()=>{le.getProfile(o).then(i=>{console.log(i.data)}).catch(function(i){console.log("Error",i.message)})},[]),e.jsxs("div",{className:`col-span-${l}  xl:col-span-${c} overflow-hidden rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark`,children:[e.jsxs("div",{className:"relative z-20 h-35 md:h-65",children:[a&&e.jsx("img",{src:a==null?void 0:a.avatar,alt:"profile cover",className:"h-full w-full rounded-tl-sm rounded-tr-sm object-cover object-center"}),e.jsx("div",{className:"absolute bottom-1 right-1 z-10 xsm:bottom-4 xsm:right-4",children:e.jsxs("label",{htmlFor:"cover",className:"flex cursor-pointer items-center justify-center gap-2 rounded bg-primary py-1 px-2 text-sm font-medium text-white hover:bg-opacity-80 xsm:px-4",children:[e.jsx("input",{type:"file",name:"cover",id:"cover",className:"sr-only"}),e.jsx(S,{strokeWidth:.5}),e.jsx("span",{children:e.jsx(t,{id:"edit"})})]})})]}),e.jsxs("div",{className:"px-4 pb-6 text-center lg:pb-8 xl:pb-11.5",children:[e.jsx("div",{className:"relative z-30 mx-auto -mt-22 h-30 w-full max-w-30 rounded-full bg-white/20 p-1 backdrop-blur sm:h-44 sm:max-w-44 sm:p-3",children:e.jsx("div",{className:"relative drop-shadow-2",children:e.jsxs("label",{htmlFor:"profile",className:"absolute bottom-0 right-0 flex h-8.5 w-8.5 cursor-pointer items-center justify-center rounded-full bg-primary text-white hover:bg-opacity-90 sm:bottom-2 sm:right-2",children:[e.jsx(S,{strokeWidth:.5}),e.jsx("input",{type:"file",name:"profile",id:"profile",className:"sr-only"})]})})}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"mb-1.5 text-2xl font-semibold text-black dark:text-white",children:a==null?void 0:a.fullName}),e.jsxs("div",{className:"font-medium",children:[e.jsx("span",{className:"font-semibold text-black dark:text-white",children:a==null?void 0:a.subscriptionType}),"Â ",e.jsx(t,{id:"subscription"})]}),e.jsx(J,{title:e.jsx(t,{id:"free-subscription-header"}),message:e.jsxs("div",{children:[e.jsx("div",{children:e.jsx(t,{id:"free-subscription-intro"})}),e.jsx("div",{children:e.jsx(t,{id:"free-subscription-message"})}),e.jsx("div",{children:e.jsx(t,{id:"free-subscription-premium"})})]})}),e.jsx(pe,{numRegisters:123,numObservationTools:234,numProjects:123})]})]})]})},ye=()=>e.jsxs(e.Fragment,{children:[e.jsx(G,{pageName:"Profile"}),e.jsxs("div",{className:"mt-4 grid grid-cols-1 xl:grid-cols-2 gap-4 md:mt-6 md:gap-6 2xl:mt-7.5 2xl:gap-7.5",children:[e.jsx(je,{colSpan:1,colSpanBig:1}),e.jsx(he,{colSpan:1,colSpanBig:1})]})]});export{ye as default};
