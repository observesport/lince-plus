import{d as o,c8 as P,B as b,z as g,G as O}from"./index-DdjfOgen.js";const v=n=>typeof n?.then=="function",F=n=>{const{type:c,children:i,prefixCls:p,buttonProps:s,close:r,autoFocus:m,emitEvent:x,isSilent:f,quitOnNullishReturnValue:E,actionFn:l}=n,u=o.useRef(!1),R=o.useRef(null),[k,d]=P(!1),a=(...t)=>{r?.apply(void 0,t)};o.useEffect(()=>{let t=null;return m&&(t=setTimeout(()=>{var e;(e=R.current)===null||e===void 0||e.focus({preventScroll:!0})})),()=>{t&&clearTimeout(t)}},[m]);const y=t=>{v(t)&&(d(!0),t.then((...e)=>{d(!1,!0),a.apply(void 0,e),u.current=!1},e=>{if(d(!1,!0),u.current=!1,!f?.())return Promise.reject(e)}))},h=t=>{if(u.current)return;if(u.current=!0,!l){a();return}let e;if(x){if(e=l(t),E&&!v(e)){u.current=!1,a(t);return}}else if(l.length)e=l(r),u.current=!1;else if(e=l(),!v(e)){a();return}y(e)};return o.createElement(b,Object.assign({},g(c),{onClick:h,loading:k,prefixCls:p},s,{ref:R}),i)};function C(){}const S=o.createContext({add:C,remove:C});function T(n){const c=o.useContext(S),i=o.useRef(null);return O(s=>{if(s){const r=n?s.querySelector(n):s;c.add(r),i.current=r}else c.remove(i.current)})}export{F as A,T as u};
