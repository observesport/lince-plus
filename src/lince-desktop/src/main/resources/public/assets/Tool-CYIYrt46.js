import{aQ as U,d as l,ap as p,aq as j,O as P,U as T,Q as q,J as e,S as W,R as m,n as a,V as n,a_ as B,a$ as L,aV as R,aS as g,T as u,b0 as k,B as C,b1 as _,b2 as Q,b3 as J,b4 as X,aX as G,b5 as K,b6 as Y,ak as Z,aP as ee}from"./index-BM98bpvU.js";import{A as te}from"./index-0yvWrRGQ.js";import{A as se,S as I,E as re}from"./AutoForm-DWBOu1l1.js";import{D as b}from"./index-B1eszRPN.js";import{H as S}from"./HiddenField-Byk6G82s.js";const ae=()=>U({type:"object",properties:{criteria:{title:"Criterios",type:"array",items:{title:" ",type:"object",properties:{id:{type:"integer",title:"ID"},name:{type:"string",title:"Criterio"},code:{type:"string",title:"Código"},persistence:{title:"",type:"boolean",uniforms:{}},informationNode:{title:"",type:"boolean",uniforms:{}},innerCategories:{title:"Categorías",type:"array",uniforms:{},items:{type:"object",properties:{id:{type:"integer",title:"ID"},name:{type:"string",title:""},code:{type:"string",title:""}},required:["name","code"]}}},required:["name","code"]}}},required:["criteria"]});var ie={icon:function(s,r){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112H144c-17.7 0-32 14.3-32 32v736c0 17.7 14.3 32 32 32h736c17.7 0 32-14.3 32-32V144c0-17.7-14.3-32-32-32zm-40 728H184V184h656v656z",fill:s}},{tag:"path",attrs:{d:"M184 840h656V184H184v656zm130-367.8h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H688c6.5 0 10.3 7.4 6.5 12.7l-210.6 292a31.8 31.8 0 01-51.7 0L307.5 484.9c-3.8-5.3 0-12.7 6.5-12.7z",fill:r}},{tag:"path",attrs:{d:"M432.2 657.7a31.8 31.8 0 0051.7 0l210.6-292c3.8-5.3 0-12.7-6.5-12.7h-46.9c-10.3 0-19.9 5-25.9 13.3L458 584.3l-71.2-98.8c-6-8.4-15.7-13.3-25.9-13.3H314c-6.5 0-10.3 7.4-6.5 12.7l124.7 172.8z",fill:s}}]}},name:"check-square",theme:"twotone"},ne=function(s,r){return l.createElement(p,j({},s,{ref:r,icon:ie}))},M=l.forwardRef(ne),le={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M880 112c17.7 0 32 14.3 32 32v736c0 17.7-14.3 32-32 32H144c-17.7 0-32-14.3-32-32V144c0-17.7 14.3-32 32-32zM639.98 338.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-square",theme:"filled"},oe=function(s,r){return l.createElement(p,j({},s,{ref:r,icon:le}))},A=l.forwardRef(oe),ce={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M464 336a48 48 0 1096 0 48 48 0 10-96 0zm72 112h-48c-4.4 0-8 3.6-8 8v272c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V456c0-4.4-3.6-8-8-8z"}}]},name:"info-circle",theme:"outlined"},de=function(s,r){return l.createElement(p,j({},s,{ref:r,icon:ce}))},F=l.forwardRef(de),me={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M848 359.3H627.7L825.8 109c4.1-5.3.4-13-6.3-13H436c-2.8 0-5.5 1.5-6.9 4L170 547.5c-3.1 5.3.7 12 6.9 12h174.4l-89.4 357.6c-1.9 7.8 7.5 13.3 13.3 7.7L853.5 373c5.2-4.9 1.7-13.7-5.5-13.7zM378.2 732.5l60.3-241H281.1l189.6-327.4h224.6L487 427.4h211L378.2 732.5z"}}]},name:"thunderbolt",theme:"outlined"},he=function(s,r){return l.createElement(p,j({},s,{ref:r,icon:me}))},xe=l.forwardRef(he),ue={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M464 720a48 48 0 1096 0 48 48 0 10-96 0zm16-304v184c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V416c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8zm475.7 440l-416-720c-6.2-10.7-16.9-16-27.7-16s-21.6 5.3-27.7 16l-416 720C56 877.4 71.4 904 96 904h832c24.6 0 40-26.6 27.7-48zm-783.5-27.9L512 239.9l339.8 588.2H172.2z"}}]},name:"warning",theme:"outlined"},pe=function(s,r){return l.createElement(p,j({},s,{ref:r,icon:ue}))},je=l.forwardRef(pe);const fe=()=>{const{moveUp:i,moveDown:s,moveUpDisabled:r,moveDownDisabled:v}=Q();return e.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"8px"},children:[e.jsx(u,{title:"Move up",children:e.jsx(C,{type:"primary",shape:"circle",size:"small",disabled:r,onClick:i,icon:e.jsx(J,{})})}),e.jsx(u,{title:"Move down",children:e.jsx(C,{type:"primary",shape:"circle",size:"small",disabled:v,onClick:s,icon:e.jsx(X,{})})}),e.jsx(G,{name:"",icon:e.jsx(K,{})})]})},ge=({onSave:i,title:s,showSubmit:r=!0,showWarning:v=!0,showAutoComplete:E=!0})=>{const{t:y}=P(),O=T(d=>d.lince.tool),H=T(d=>d.lince.status),D=q(),f=l.useRef(null),w=(d,o,x)=>{let t=`${o}${x}`,h=x;for(;d.includes(t);)h++,t=`${o}${h}`;return t},V=()=>{if(!f.current)return;const o=[...f.current.getModel().criteria||[]],x=o.map(t=>t.code).filter(Boolean);o.forEach((t,h)=>{if((!t.name||t.name.trim()==="")&&(t.name=`Criteria ${h+1}`),(!t.code||t.code.trim()==="")&&(t.code=w(x,"C",h+1),x.push(t.code)),t.innerCategories&&Array.isArray(t.innerCategories)){const z=t.innerCategories.map(c=>c.code).filter(Boolean);t.innerCategories.forEach((c,$)=>{(!c.name||c.name.trim()==="")&&(c.name=`Category ${$+1}`),(!c.code||c.code.trim()==="")&&(c.code=w(z,`${t.code||"C"+(h+1)}_`,$+1),z.push(c.code))})}}),f.current.onChange("criteria",o)},N=d=>{const o=d.criteria;D(_(o)),i?.(o)};return H==="loading"?e.jsx("div",{style:{textAlign:"center",padding:"50px"},children:e.jsx(W,{size:"large"})}):e.jsxs("div",{style:{padding:"20px"},children:[s&&e.jsx("h2",{style:{marginBottom:"20px"},children:s}),v&&e.jsx(m,{style:{marginBottom:16},children:e.jsx(a,{span:24,children:e.jsx(te,{message:e.jsx(n,{id:"code-change-warning"}),type:"warning",showIcon:!0,icon:e.jsx(je,{}),closable:!0})})}),e.jsxs(se,{ref:f,schema:ae(),model:{criteria:O},onSubmit:N,disabled:!1,children:[r&&e.jsx(I,{value:y("update")}),e.jsx(re,{}),e.jsx(b,{}),e.jsx(B,{name:"criteria",children:e.jsx(L,{name:"$",allowOrdering:!0,buttonsPlacement:"inline",children:e.jsxs(R,{showInlineError:!0,name:"",children:[e.jsx(S,{name:"id"}),e.jsxs(m,{gutter:[16,8],children:[e.jsxs(a,{xs:24,md:8,lg:6,children:[e.jsx(g,{name:"name",label:e.jsx(n,{id:"criteria"})}),e.jsx(g,{name:"code",label:e.jsx(n,{id:"code"})}),e.jsx(fe,{})]}),e.jsx(a,{xs:24,md:6,lg:5,children:e.jsxs(m,{gutter:[8,8],children:[e.jsx(a,{span:24,children:e.jsx(u,{placement:"leftTop",title:e.jsx(n,{id:"persistent-criteria-description"}),children:e.jsxs("div",{style:{marginBottom:"8px"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[e.jsx(F,{style:{marginRight:"5px"}}),e.jsx(n,{id:"persistent-criteria"})]}),e.jsx(k,{name:"persistence",checkedChildren:e.jsx(M,{}),unCheckedChildren:e.jsx(A,{})})]})})}),e.jsx(a,{span:24,children:e.jsx(u,{placement:"bottomLeft",title:e.jsx(n,{id:"criteria-with-content-description"}),children:e.jsxs("div",{children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",marginBottom:"4px"},children:[e.jsx(F,{style:{marginRight:"5px"}}),e.jsx(n,{id:"criteria-with-content"})]}),e.jsx(k,{name:"informationNode",checkedChildren:e.jsx(M,{}),unCheckedChildren:e.jsx(A,{})})]})})})]})}),e.jsxs(a,{xs:24,md:10,lg:13,children:[e.jsx("div",{style:{marginBottom:"8px"},children:e.jsxs(m,{gutter:8,children:[e.jsx(a,{span:11,children:e.jsx("b",{children:e.jsx(n,{id:"category"})})}),e.jsx(a,{span:11,children:e.jsx("b",{children:e.jsx(n,{id:"code"})})}),e.jsx(a,{span:2})]})}),e.jsx(B,{name:"innerCategories",label:!1,children:e.jsx(L,{name:"$",allowOrdering:!0,children:e.jsxs(R,{name:"",label:!1,children:[e.jsx(S,{name:"id"}),e.jsxs(m,{gutter:8,children:[e.jsx(a,{span:11,children:e.jsx(g,{name:"name"})}),e.jsx(a,{span:11,children:e.jsx(g,{name:"code"})})]})]})})})]})]}),e.jsx(m,{gutter:16,children:e.jsx(a,{md:24,children:e.jsx(b,{})})})]})})}),e.jsx(b,{}),e.jsxs(m,{justify:"space-between",align:"middle",style:{marginTop:"16px"},children:[e.jsx(a,{children:r&&e.jsx(I,{value:y("update")})}),E&&e.jsx(a,{children:e.jsx(u,{title:e.jsx(n,{id:"auto-complete-tool-description"}),children:e.jsx(C,{type:"primary",icon:e.jsx(xe,{}),onClick:V,size:"large",disabled:!1,children:e.jsx(n,{id:"auto-complete-tool"})})})})]})]})]})},ze=()=>{const i=q();return l.useEffect(()=>{i(Y()),i(Z())},[i]),e.jsxs(e.Fragment,{children:[e.jsx(ee,{pageName:e.jsx(n,{id:"tool"})}),e.jsx("div",{className:"overflow-hidden rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:e.jsx(ge,{})})]})};export{ze as default};
