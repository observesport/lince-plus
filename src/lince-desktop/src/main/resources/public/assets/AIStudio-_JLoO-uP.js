const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/YouTube-C2_Z3fdz.js","assets/index-CjE9jCrm.js","assets/index-DW8XCcAW.css","assets/SoundCloud-Bt2TY5m7.js","assets/Vimeo-CZHLzGht.js","assets/Mux-zwT6vrw9.js","assets/Facebook-BJ6vBGR0.js","assets/Streamable-CSfcNeOj.js","assets/Wistia-BGBGYjo4.js","assets/Twitch-DZMlLvcN.js","assets/DailyMotion-BM4DvtWB.js","assets/Mixcloud-zQinNTYf.js","assets/Vidyard-CpdrNphM.js","assets/Kaltura-CyWagM1-.js","assets/FilePlayer-CR--AUwz.js","assets/Preview-DKS2F8DP.js","assets/opencv-BQmsmeaI.js","assets/___vite-browser-external_commonjs-proxy-D7kFpOfz.js","assets/PoseDetection3DProvider-BSvwhnEB.js","assets/camera-jJl-wBuR.js","assets/index-Cxfd59SG.js","assets/index-CP1NViAX.js","assets/PoseDetection2DProvider-Bq9ZzG3k.js"])))=>i.map(i=>d[i]);
import{cA as an,cB as he,cC as Yr,cD as Xr,cE as It,c2 as Gr,N as ie,d as T,J as s,cF as or,cG as lr,cH as le,cI as cr,cJ as Jr,cK as nt,cL as ne,cM as dr,cN as Me,cO as at,cP as ur,cQ as Zr,cR as on,cS as Ke,cT as Se,cU as Q,cV as ge,cW as ke,cX as hr,cY as fr,cZ as ce,c_ as Ve,c$ as tn,d0 as ft,d1 as Be,d2 as Ye,d3 as pr,d4 as mr,d5 as fn,d6 as me,d7 as gr,d8 as Qr,d9 as es,da as ts,db as ns,dc as yr,dd as bt,de as pn,df as rs,dg as ss,dh as is,di as as,dj as os,dk as ls,dl as cs,dm as ds,dn as us,dp as hs,dq as mn,dr as fs,ds as gn,dt as Qe,du as ps,dv as ms,dw as gs,dx as ys,dy as xs,dz as vs,dA as bs,dB as ae,dC as yn,dD as ws,dE as Fe,dF as wt,dG as xn,dH as nn,dI as Ss,dJ as js,dK as ln,dL as pt,dM as St,dN as xr,dO as Ge,dP as vn,dQ as Cs,dR as Ps,dS as vr,dT as _s,dU as At,dV as ks,dW as Ds,dX as bn,dY as Es,dZ as Os,l as rt,d_ as br,d$ as wr,e0 as st,e1 as wn,e2 as Ns,e3 as mt,e4 as Ts,e5 as Le,e6 as Is,e7 as As,e8 as Ms,e9 as Sn,ea as jn,eb as Cn,ec as Fs,ed as Rs,ee as Ls,ef as $s,eg as Ee,eh as Oe,ei as Ne,ej as Te,ek as Us,el as Pn,Q as zs,U as Bs,bS as Vs,b7 as Ws,bT as Hs,bL as qs,bM as Ks,cp as Ys,R as _n,n as kn,bP as Xs,cq as Gs,aa as Js,aQ as Zs}from"./index-CjE9jCrm.js";import{C as Qs}from"./camera-jJl-wBuR.js";import{L as ei}from"./index-Cxfd59SG.js";import{A as ti}from"./index-CP1NViAX.js";var Mt,Dn;function ni(){if(Dn)return Mt;Dn=1,Mt=function(i,l,c){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");typeof l=="function"&&(c=l,l={}),l=l||{},c=c||function(){},a.type=l.type||"text/javascript",a.charset=l.charset||"utf8",a.async="async"in l?!!l.async:!0,a.src=i,l.attrs&&t(a,l.attrs),l.text&&(a.text=""+l.text);var p="onload"in a?e:n;p(a,c),a.onload||e(a,c),o.appendChild(a)};function t(r,i){for(var l in i)r.setAttribute(l,i[l])}function e(r,i){r.onload=function(){this.onerror=this.onload=null,i(null,r)},r.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+this.src),r)}}function n(r,i){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,i(null,r))}}return Mt}var Ft,En;function Sr(){if(En)return Ft;En=1;var t=function(h){return e(h)&&!n(h)};function e(d){return!!d&&typeof d=="object"}function n(d){var h=Object.prototype.toString.call(d);return h==="[object RegExp]"||h==="[object Date]"||l(d)}var r=typeof Symbol=="function"&&Symbol.for,i=r?Symbol.for("react.element"):60103;function l(d){return d.$$typeof===i}function c(d){return Array.isArray(d)?[]:{}}function o(d,h){return h.clone!==!1&&h.isMergeableObject(d)?b(c(d),d,h):d}function a(d,h,u){return d.concat(h).map(function(g){return o(g,u)})}function p(d,h){if(!h.customMerge)return b;var u=h.customMerge(d);return typeof u=="function"?u:b}function m(d){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(d).filter(function(h){return Object.propertyIsEnumerable.call(d,h)}):[]}function f(d){return Object.keys(d).concat(m(d))}function v(d,h){try{return h in d}catch{return!1}}function y(d,h){return v(d,h)&&!(Object.hasOwnProperty.call(d,h)&&Object.propertyIsEnumerable.call(d,h))}function k(d,h,u){var g={};return u.isMergeableObject(d)&&f(d).forEach(function(x){g[x]=o(d[x],u)}),f(h).forEach(function(x){y(d,x)||(v(d,x)&&u.isMergeableObject(h[x])?g[x]=p(x,u)(d[x],h[x],u):g[x]=o(h[x],u))}),g}function b(d,h,u){u=u||{},u.arrayMerge=u.arrayMerge||a,u.isMergeableObject=u.isMergeableObject||t,u.cloneUnlessOtherwiseSpecified=o;var g=Array.isArray(h),x=Array.isArray(d),S=g===x;return S?g?u.arrayMerge(d,h,u):k(d,h,u):o(h,u)}b.all=function(h,u){if(!Array.isArray(h))throw new Error("first argument should be an array");return h.reduce(function(g,x){return b(g,x,u)},{})};var j=b;return Ft=j,Ft}var Rt,On;function jt(){if(On)return Rt;On=1;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(D,L)=>{for(var z in L)e(D,z,{get:L[z],enumerable:!0})},o=(D,L,z,G)=>{if(L&&typeof L=="object"||typeof L=="function")for(let J of r(L))!l.call(D,J)&&J!==z&&e(D,J,{get:()=>L[J],enumerable:!(G=n(L,J))||G.enumerable});return D},a=(D,L,z)=>(z=D!=null?t(i(D)):{},o(!D||!D.__esModule?e(z,"default",{value:D,enumerable:!0}):z,D)),p=D=>o(e({},"__esModule",{value:!0}),D),m={};c(m,{callPlayer:()=>C,getConfig:()=>M,getSDK:()=>N,isBlobUrl:()=>U,isMediaStream:()=>P,lazy:()=>k,omit:()=>E,parseEndTime:()=>S,parseStartTime:()=>x,queryString:()=>I,randomString:()=>w,supportsWebKitPresentationMode:()=>q}),Rt=p(m);var f=a(an()),v=a(ni()),y=a(Sr());const k=D=>f.default.lazy(async()=>{const L=await D();return typeof L.default=="function"?L:L.default}),b=/[?&#](?:start|t)=([0-9hms]+)/,j=/[?&#]end=([0-9hms]+)/,d=/(\d+)(h|m|s)/g,h=/^\d+$/;function u(D,L){if(D instanceof Array)return;const z=D.match(L);if(z){const G=z[1];if(G.match(d))return g(G);if(h.test(G))return parseInt(G)}}function g(D){let L=0,z=d.exec(D);for(;z!==null;){const[,G,J]=z;J==="h"&&(L+=parseInt(G,10)*60*60),J==="m"&&(L+=parseInt(G,10)*60),J==="s"&&(L+=parseInt(G,10)),z=d.exec(D)}return L}function x(D){return u(D,b)}function S(D){return u(D,j)}function w(){return Math.random().toString(36).substr(2,5)}function I(D){return Object.keys(D).map(L=>`${L}=${D[L]}`).join("&")}function _(D){return window[D]?window[D]:window.exports&&window.exports[D]?window.exports[D]:window.module&&window.module.exports&&window.module.exports[D]?window.module.exports[D]:null}const O={},N=function(L,z,G=null,J=()=>!0,re=v.default){const de=_(z);return de&&J(de)?Promise.resolve(de):new Promise((ue,pe)=>{if(O[L]){O[L].push({resolve:ue,reject:pe});return}O[L]=[{resolve:ue,reject:pe}];const F=V=>{O[L].forEach(W=>W.resolve(V))};if(G){const V=window[G];window[G]=function(){V&&V(),F(_(z))}}re(L,V=>{V?(O[L].forEach(W=>W.reject(V)),O[L]=null):G||F(_(z))})})};function M(D,L){return(0,y.default)(L.config,D.config)}function E(D,...L){const z=[].concat(...L),G={},J=Object.keys(D);for(const re of J)z.indexOf(re)===-1&&(G[re]=D[re]);return G}function C(D,...L){if(!this.player||!this.player[D]){let z=`ReactPlayer: ${this.constructor.displayName} player could not call %c${D}%c – `;return this.player?this.player[D]||(z+="The method was not available"):z+="The player was not available",console.warn(z,"font-weight: bold",""),null}return this.player[D](...L)}function P(D){return typeof window<"u"&&typeof window.MediaStream<"u"&&D instanceof window.MediaStream}function U(D){return/^blob:/.test(D)}function q(D=document.createElement("video")){const L=/iPhone|iPod/.test(navigator.userAgent)===!1;return D.webkitSupportsPresentationMode&&typeof D.webkitSetPresentationMode=="function"&&L}function Y(D){return D}return Rt}var Lt,Nn;function ri(){if(Nn)return Lt;Nn=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,i=(C,P)=>{for(var U in P)t(C,U,{get:P[U],enumerable:!0})},l=(C,P,U,q)=>{if(P&&typeof P=="object"||typeof P=="function")for(let Y of n(P))!r.call(C,Y)&&Y!==U&&t(C,Y,{get:()=>P[Y],enumerable:!(q=e(P,Y))||q.enumerable});return C},c=C=>l(t({},"__esModule",{value:!0}),C),o={};i(o,{AUDIO_EXTENSIONS:()=>w,DASH_EXTENSIONS:()=>O,FLV_EXTENSIONS:()=>N,HLS_EXTENSIONS:()=>_,MATCH_URL_DAILYMOTION:()=>u,MATCH_URL_FACEBOOK:()=>y,MATCH_URL_FACEBOOK_WATCH:()=>k,MATCH_URL_KALTURA:()=>S,MATCH_URL_MIXCLOUD:()=>g,MATCH_URL_MUX:()=>v,MATCH_URL_SOUNDCLOUD:()=>m,MATCH_URL_STREAMABLE:()=>b,MATCH_URL_TWITCH_CHANNEL:()=>h,MATCH_URL_TWITCH_VIDEO:()=>d,MATCH_URL_VIDYARD:()=>x,MATCH_URL_VIMEO:()=>f,MATCH_URL_WISTIA:()=>j,MATCH_URL_YOUTUBE:()=>p,VIDEO_EXTENSIONS:()=>I,canPlay:()=>E}),Lt=c(o);var a=jt();const p=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,m=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,f=/vimeo\.com\/(?!progressive_redirect).+/,v=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,y=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,k=/^https?:\/\/fb\.watch\/.+$/,b=/streamable\.com\/([a-z0-9]+)$/,j=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,d=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,h=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,u=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,g=/mixcloud\.com\/([^/]+\/[^/]+)/,x=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,S=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,w=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,I=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,_=/\.(m3u8)($|\?)/i,O=/\.(mpd)($|\?)/i,N=/\.(flv)($|\?)/i,M=C=>{if(C instanceof Array){for(const P of C)if(typeof P=="string"&&M(P)||M(P.src))return!0;return!1}return(0,a.isMediaStream)(C)||(0,a.isBlobUrl)(C)?!0:w.test(C)||I.test(C)||_.test(C)||O.test(C)||N.test(C)},E={youtube:C=>C instanceof Array?C.every(P=>p.test(P)):p.test(C),soundcloud:C=>m.test(C)&&!w.test(C),vimeo:C=>f.test(C)&&!I.test(C)&&!_.test(C),mux:C=>v.test(C),facebook:C=>y.test(C)||k.test(C),streamable:C=>b.test(C),wistia:C=>j.test(C),twitch:C=>d.test(C)||h.test(C),dailymotion:C=>u.test(C),mixcloud:C=>g.test(C),vidyard:C=>x.test(C),kaltura:C=>S.test(C),file:M};return Lt}var $t,Tn;function si(){if(Tn)return $t;Tn=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,r=Object.prototype.hasOwnProperty,i=(f,v)=>{for(var y in v)t(f,y,{get:v[y],enumerable:!0})},l=(f,v,y,k)=>{if(v&&typeof v=="object"||typeof v=="function")for(let b of n(v))!r.call(f,b)&&b!==y&&t(f,b,{get:()=>v[b],enumerable:!(k=e(v,b))||k.enumerable});return f},c=f=>l(t({},"__esModule",{value:!0}),f),o={};i(o,{default:()=>m}),$t=c(o);var a=jt(),p=ri(),m=[{key:"youtube",name:"YouTube",canPlay:p.canPlay.youtube,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./YouTube-C2_Z3fdz.js").then(f=>f.Y),__vite__mapDeps([0,1,2])))},{key:"soundcloud",name:"SoundCloud",canPlay:p.canPlay.soundcloud,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./SoundCloud-Bt2TY5m7.js").then(f=>f.S),__vite__mapDeps([3,1,2])))},{key:"vimeo",name:"Vimeo",canPlay:p.canPlay.vimeo,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Vimeo-CZHLzGht.js").then(f=>f.V),__vite__mapDeps([4,1,2])))},{key:"mux",name:"Mux",canPlay:p.canPlay.mux,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Mux-zwT6vrw9.js").then(f=>f.M),__vite__mapDeps([5,1,2])))},{key:"facebook",name:"Facebook",canPlay:p.canPlay.facebook,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Facebook-BJ6vBGR0.js").then(f=>f.F),__vite__mapDeps([6,1,2])))},{key:"streamable",name:"Streamable",canPlay:p.canPlay.streamable,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Streamable-CSfcNeOj.js").then(f=>f.S),__vite__mapDeps([7,1,2])))},{key:"wistia",name:"Wistia",canPlay:p.canPlay.wistia,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Wistia-BGBGYjo4.js").then(f=>f.W),__vite__mapDeps([8,1,2])))},{key:"twitch",name:"Twitch",canPlay:p.canPlay.twitch,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Twitch-DZMlLvcN.js").then(f=>f.T),__vite__mapDeps([9,1,2])))},{key:"dailymotion",name:"DailyMotion",canPlay:p.canPlay.dailymotion,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./DailyMotion-BM4DvtWB.js").then(f=>f.D),__vite__mapDeps([10,1,2])))},{key:"mixcloud",name:"Mixcloud",canPlay:p.canPlay.mixcloud,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Mixcloud-zQinNTYf.js").then(f=>f.M),__vite__mapDeps([11,1,2])))},{key:"vidyard",name:"Vidyard",canPlay:p.canPlay.vidyard,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Vidyard-CpdrNphM.js").then(f=>f.V),__vite__mapDeps([12,1,2])))},{key:"kaltura",name:"Kaltura",canPlay:p.canPlay.kaltura,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Kaltura-CyWagM1-.js").then(f=>f.K),__vite__mapDeps([13,1,2])))},{key:"file",name:"FilePlayer",canPlay:p.canPlay.file,canEnablePIP:f=>p.canPlay.file(f)&&(document.pictureInPictureEnabled||(0,a.supportsWebKitPresentationMode)())&&!p.AUDIO_EXTENSIONS.test(f),lazyPlayer:(0,a.lazy)(()=>he(()=>import("./FilePlayer-CR--AUwz.js").then(f=>f.F),__vite__mapDeps([14,1,2])))}];return $t}var In=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function ii(t,e){return!!(t===e||In(t)&&In(e))}function ai(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!ii(t[n],e[n]))return!1;return!0}function oi(t,e){e===void 0&&(e=ai);var n,r=[],i,l=!1;function c(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return l&&n===this&&e(o,r)||(i=t.apply(this,o),l=!0,n=this,r=o),i}return c}const li=Object.freeze(Object.defineProperty({__proto__:null,default:oi},Symbol.toStringTag,{value:"Module"})),ci=Yr(li);var Ut,An;function jr(){if(An)return Ut;An=1;var t=typeof Element<"u",e=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(l,c){if(l===c)return!0;if(l&&c&&typeof l=="object"&&typeof c=="object"){if(l.constructor!==c.constructor)return!1;var o,a,p;if(Array.isArray(l)){if(o=l.length,o!=c.length)return!1;for(a=o;a--!==0;)if(!i(l[a],c[a]))return!1;return!0}var m;if(e&&l instanceof Map&&c instanceof Map){if(l.size!==c.size)return!1;for(m=l.entries();!(a=m.next()).done;)if(!c.has(a.value[0]))return!1;for(m=l.entries();!(a=m.next()).done;)if(!i(a.value[1],c.get(a.value[0])))return!1;return!0}if(n&&l instanceof Set&&c instanceof Set){if(l.size!==c.size)return!1;for(m=l.entries();!(a=m.next()).done;)if(!c.has(a.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(l)&&ArrayBuffer.isView(c)){if(o=l.length,o!=c.length)return!1;for(a=o;a--!==0;)if(l[a]!==c[a])return!1;return!0}if(l.constructor===RegExp)return l.source===c.source&&l.flags===c.flags;if(l.valueOf!==Object.prototype.valueOf&&typeof l.valueOf=="function"&&typeof c.valueOf=="function")return l.valueOf()===c.valueOf();if(l.toString!==Object.prototype.toString&&typeof l.toString=="function"&&typeof c.toString=="function")return l.toString()===c.toString();if(p=Object.keys(l),o=p.length,o!==Object.keys(c).length)return!1;for(a=o;a--!==0;)if(!Object.prototype.hasOwnProperty.call(c,p[a]))return!1;if(t&&l instanceof Element)return!1;for(a=o;a--!==0;)if(!((p[a]==="_owner"||p[a]==="__v"||p[a]==="__o")&&l.$$typeof)&&!i(l[p[a]],c[p[a]]))return!1;return!0}return l!==l&&c!==c}return Ut=function(c,o){try{return i(c,o)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}},Ut}var zt,Mn;function Cr(){if(Mn)return zt;Mn=1;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(I,_)=>{for(var O in _)e(I,O,{get:_[O],enumerable:!0})},o=(I,_,O,N)=>{if(_&&typeof _=="object"||typeof _=="function")for(let M of r(_))!l.call(I,M)&&M!==O&&e(I,M,{get:()=>_[M],enumerable:!(N=n(_,M))||N.enumerable});return I},a=(I,_,O)=>(O=I!=null?t(i(I)):{},o(!I||!I.__esModule?e(O,"default",{value:I,enumerable:!0}):O,I)),p=I=>o(e({},"__esModule",{value:!0}),I),m={};c(m,{defaultProps:()=>w,propTypes:()=>x}),zt=p(m);var f=a(Xr());const{string:v,bool:y,number:k,array:b,oneOfType:j,shape:d,object:h,func:u,node:g}=f.default,x={url:j([v,b,h]),playing:y,loop:y,controls:y,volume:k,muted:y,playbackRate:k,width:j([v,k]),height:j([v,k]),style:h,progressInterval:k,playsinline:y,pip:y,stopOnUnmount:y,light:j([y,v,h]),playIcon:g,previewTabIndex:k,previewAriaLabel:v,fallback:g,oEmbedUrl:v,wrapper:j([v,u,d({render:u.isRequired})]),config:d({soundcloud:d({options:h}),youtube:d({playerVars:h,embedOptions:h,onUnstarted:u}),facebook:d({appId:v,version:v,playerId:v,attributes:h}),dailymotion:d({params:h}),vimeo:d({playerOptions:h,title:v}),mux:d({attributes:h,version:v}),file:d({attributes:h,tracks:b,forceVideo:y,forceAudio:y,forceHLS:y,forceSafariHLS:y,forceDisableHls:y,forceDASH:y,forceFLV:y,hlsOptions:h,hlsVersion:v,dashVersion:v,flvVersion:v}),wistia:d({options:h,playerId:v,customControls:b}),mixcloud:d({options:h}),twitch:d({options:h,playerId:v}),vidyard:d({options:h})}),onReady:u,onStart:u,onPlay:u,onPause:u,onBuffer:u,onBufferEnd:u,onEnded:u,onError:u,onDuration:u,onSeek:u,onPlaybackRateChange:u,onPlaybackQualityChange:u,onProgress:u,onClickPreview:u,onEnablePIP:u,onDisablePIP:u},S=()=>{},w={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:S},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:S,onStart:S,onPlay:S,onPause:S,onBuffer:S,onBufferEnd:S,onEnded:S,onError:S,onDuration:S,onSeek:S,onPlaybackRateChange:S,onPlaybackQualityChange:S,onProgress:S,onClickPreview:S,onEnablePIP:S,onDisablePIP:S};return zt}var Bt,Fn;function di(){if(Fn)return Bt;Fn=1;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(u,g,x)=>g in u?e(u,g,{enumerable:!0,configurable:!0,writable:!0,value:x}):u[g]=x,o=(u,g)=>{for(var x in g)e(u,x,{get:g[x],enumerable:!0})},a=(u,g,x,S)=>{if(g&&typeof g=="object"||typeof g=="function")for(let w of r(g))!l.call(u,w)&&w!==x&&e(u,w,{get:()=>g[w],enumerable:!(S=n(g,w))||S.enumerable});return u},p=(u,g,x)=>(x=u!=null?t(i(u)):{},a(!u||!u.__esModule?e(x,"default",{value:u,enumerable:!0}):x,u)),m=u=>a(e({},"__esModule",{value:!0}),u),f=(u,g,x)=>(c(u,typeof g!="symbol"?g+"":g,x),x),v={};o(v,{default:()=>h}),Bt=m(v);var y=p(an()),k=p(jr()),b=Cr(),j=jt();const d=5e3;class h extends y.Component{constructor(){super(...arguments),f(this,"mounted",!1),f(this,"isReady",!1),f(this,"isPlaying",!1),f(this,"isLoading",!0),f(this,"loadOnReady",null),f(this,"startOnPlay",!0),f(this,"seekOnPlay",null),f(this,"onDurationCalled",!1),f(this,"handlePlayerMount",g=>{if(this.player){this.progress();return}this.player=g,this.player.load(this.props.url),this.progress()}),f(this,"getInternalPlayer",g=>this.player?this.player[g]:null),f(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const g=this.getCurrentTime()||0,x=this.getSecondsLoaded(),S=this.getDuration();if(S){const w={playedSeconds:g,played:g/S};x!==null&&(w.loadedSeconds=x,w.loaded=x/S),(w.playedSeconds!==this.prevPlayed||w.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(w),this.prevPlayed=w.playedSeconds,this.prevLoaded=w.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),f(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:g,playing:x,volume:S,muted:w}=this.props;g(),!w&&S!==null&&this.player.setVolume(S),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):x&&this.player.play(),this.handleDurationCheck()}),f(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:g,onPlay:x,playbackRate:S}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&S!==1&&this.player.setPlaybackRate(S),g(),this.startOnPlay=!1),x(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),f(this,"handlePause",g=>{this.isPlaying=!1,this.isLoading||this.props.onPause(g)}),f(this,"handleEnded",()=>{const{activePlayer:g,loop:x,onEnded:S}=this.props;g.loopOnEnded&&x&&this.seekTo(0),x||(this.isPlaying=!1,S())}),f(this,"handleError",(...g)=>{this.isLoading=!1,this.props.onError(...g)}),f(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const g=this.getDuration();g?this.onDurationCalled||(this.props.onDuration(g),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),f(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(g){if(!this.player)return;const{url:x,playing:S,volume:w,muted:I,playbackRate:_,pip:O,loop:N,activePlayer:M,disableDeferredLoading:E}=this.props;if(!(0,k.default)(g.url,x)){if(this.isLoading&&!M.forceLoad&&!E&&!(0,j.isMediaStream)(x)){console.warn(`ReactPlayer: the attempt to load ${x} is being deferred until the player has loaded`),this.loadOnReady=x;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(x,this.isReady)}!g.playing&&S&&!this.isPlaying&&this.player.play(),g.playing&&!S&&this.isPlaying&&this.player.pause(),!g.pip&&O&&this.player.enablePIP&&this.player.enablePIP(),g.pip&&!O&&this.player.disablePIP&&this.player.disablePIP(),g.volume!==w&&w!==null&&this.player.setVolume(w),g.muted!==I&&(I?this.player.mute():(this.player.unmute(),w!==null&&setTimeout(()=>this.player.setVolume(w)))),g.playbackRate!==_&&this.player.setPlaybackRate&&this.player.setPlaybackRate(_),g.loop!==N&&this.player.setLoop&&this.player.setLoop(N)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(g,x,S){if(!this.isReady){g!==0&&(this.seekOnPlay=g,setTimeout(()=>{this.seekOnPlay=null},d));return}if(x?x==="fraction":g>0&&g<1){const I=this.player.getDuration();if(!I){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(I*g,S);return}this.player.seekTo(g,S)}render(){const g=this.props.activePlayer;return g?y.default.createElement(g,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}return f(h,"displayName","Player"),f(h,"propTypes",b.propTypes),f(h,"defaultProps",b.defaultProps),Bt}var Vt,Rn;function ui(){if(Rn)return Vt;Rn=1;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(N,M,E)=>M in N?e(N,M,{enumerable:!0,configurable:!0,writable:!0,value:E}):N[M]=E,o=(N,M)=>{for(var E in M)e(N,E,{get:M[E],enumerable:!0})},a=(N,M,E,C)=>{if(M&&typeof M=="object"||typeof M=="function")for(let P of r(M))!l.call(N,P)&&P!==E&&e(N,P,{get:()=>M[P],enumerable:!(C=n(M,P))||C.enumerable});return N},p=(N,M,E)=>(E=N!=null?t(i(N)):{},a(!N||!N.__esModule?e(E,"default",{value:N,enumerable:!0}):E,N)),m=N=>a(e({},"__esModule",{value:!0}),N),f=(N,M,E)=>(c(N,typeof M!="symbol"?M+"":M,E),E),v={};o(v,{createReactPlayer:()=>O}),Vt=m(v);var y=p(an()),k=p(Sr()),b=p(ci),j=p(jr()),d=Cr(),h=jt(),u=p(di());const g=(0,h.lazy)(()=>he(()=>import("./Preview-DKS2F8DP.js").then(N=>N.P),__vite__mapDeps([15,1,2]))),x=typeof window<"u"&&window.document&&typeof document<"u",S=typeof It<"u"&&It.window&&It.window.document,w=Object.keys(d.propTypes),I=x||S?y.Suspense:()=>null,_=[],O=(N,M)=>{var E;return E=class extends y.Component{constructor(){super(...arguments),f(this,"state",{showPreview:!!this.props.light}),f(this,"references",{wrapper:C=>{this.wrapper=C},player:C=>{this.player=C}}),f(this,"handleClickPreview",C=>{this.setState({showPreview:!1}),this.props.onClickPreview(C)}),f(this,"showPreview",()=>{this.setState({showPreview:!0})}),f(this,"getDuration",()=>this.player?this.player.getDuration():null),f(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),f(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),f(this,"getInternalPlayer",(C="player")=>this.player?this.player.getInternalPlayer(C):null),f(this,"seekTo",(C,P,U)=>{if(!this.player)return null;this.player.seekTo(C,P,U)}),f(this,"handleReady",()=>{this.props.onReady(this)}),f(this,"getActivePlayer",(0,b.default)(C=>{for(const P of[..._,...N])if(P.canPlay(C))return P;return M||null})),f(this,"getConfig",(0,b.default)((C,P)=>{const{config:U}=this.props;return k.default.all([d.defaultProps.config,d.defaultProps.config[P]||{},U,U[P]||{}])})),f(this,"getAttributes",(0,b.default)(C=>(0,h.omit)(this.props,w))),f(this,"renderActivePlayer",C=>{if(!C)return null;const P=this.getActivePlayer(C);if(!P)return null;const U=this.getConfig(C,P.key);return y.default.createElement(u.default,{...this.props,key:P.key,ref:this.references.player,config:U,activePlayer:P.lazyPlayer||P,onReady:this.handleReady})})}shouldComponentUpdate(C,P){return!(0,j.default)(this.props,C)||!(0,j.default)(this.state,P)}componentDidUpdate(C){const{light:P}=this.props;!C.light&&P&&this.setState({showPreview:!0}),C.light&&!P&&this.setState({showPreview:!1})}renderPreview(C){if(!C)return null;const{light:P,playIcon:U,previewTabIndex:q,oEmbedUrl:Y,previewAriaLabel:D}=this.props;return y.default.createElement(g,{url:C,light:P,playIcon:U,previewTabIndex:q,previewAriaLabel:D,oEmbedUrl:Y,onClick:this.handleClickPreview})}render(){const{url:C,style:P,width:U,height:q,fallback:Y,wrapper:D}=this.props,{showPreview:L}=this.state,z=this.getAttributes(C),G=typeof D=="string"?this.references.wrapper:void 0;return y.default.createElement(D,{ref:G,style:{...P,width:U,height:q},...z},y.default.createElement(I,{fallback:Y},L?this.renderPreview(C):this.renderActivePlayer(C)))}},f(E,"displayName","ReactPlayer"),f(E,"propTypes",d.propTypes),f(E,"defaultProps",d.defaultProps),f(E,"addCustomPlayer",C=>{_.push(C)}),f(E,"removeCustomPlayers",()=>{_.length=0}),f(E,"canPlay",C=>{for(const P of[..._,...N])if(P.canPlay(C))return!0;return!1}),f(E,"canEnablePIP",C=>{for(const P of[..._,...N])if(P.canEnablePIP&&P.canEnablePIP(C))return!0;return!1}),E};return Vt}var Wt,Ln;function hi(){if(Ln)return Wt;Ln=1;var t=Object.create,e=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(b,j)=>{for(var d in j)e(b,d,{get:j[d],enumerable:!0})},o=(b,j,d,h)=>{if(j&&typeof j=="object"||typeof j=="function")for(let u of r(j))!l.call(b,u)&&u!==d&&e(b,u,{get:()=>j[u],enumerable:!(h=n(j,u))||h.enumerable});return b},a=(b,j,d)=>(d=b!=null?t(i(b)):{},o(!b||!b.__esModule?e(d,"default",{value:b,enumerable:!0}):d,b)),p=b=>o(e({},"__esModule",{value:!0}),b),m={};c(m,{default:()=>k}),Wt=p(m);var f=a(si()),v=ui();const y=f.default[f.default.length-1];var k=(0,v.createReactPlayer)(f.default,y);return Wt}var fi=hi();const pi=Gr(fi);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mi=ie("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=ie("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=ie("DraftingCompass",[["path",{d:"m12.99 6.74 1.93 3.44",key:"iwagvd"}],["path",{d:"M19.136 12a10 10 0 0 1-14.271 0",key:"ppmlo4"}],["path",{d:"m21 21-2.16-3.84",key:"vylbct"}],["path",{d:"m3 21 8.02-14.26",key:"1ssaw4"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=ie("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=ie("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=ie("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ct=ie("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=ie("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=ie("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=ie("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=ie("MousePointerClick",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=ie("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=ie("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pr=ie("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=ie("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=ie("PictureInPicture2",[["path",{d:"M21 9V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h4",key:"daa4of"}],["rect",{width:"10",height:"7",x:"12",y:"13",rx:"2",key:"1nb8gs"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=ie("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=ie("RotateCcwSquare",[["path",{d:"M20 9V7a2 2 0 0 0-2-2h-6",key:"19z8uc"}],["path",{d:"m15 2-3 3 3 3",key:"177bxs"}],["path",{d:"M20 13v5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2",key:"d36hnl"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=ie("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=ie("RotateCwSquare",[["path",{d:"M12 5H6a2 2 0 0 0-2 2v3",key:"l96uqu"}],["path",{d:"m9 8 3-3-3-3",key:"1gzgc3"}],["path",{d:"M4 14v4a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2",key:"1w2k5h"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ie("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=ie("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=ie("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=ie("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=ie("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=ie("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=ie("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function $i({chapters:t,currentTime:e,onChapterSelect:n}){const[r,i]=T.useState(!1),l=t.reduce((c,o)=>o.startTime<=e&&(c===null||o.startTime>c.startTime)?o:c,null);return s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsxs(or,{open:r,onOpenChange:i,children:[s.jsx(lr,{asChild:!0,children:s.jsx(le,{variant:"outline",size:"icon",className:"bg-black/50 border-white/20 text-white hover:bg-black/70 hover:text-white",children:s.jsx(wi,{className:"h-5 w-5"})})}),s.jsxs(cr,{className:"w-[300px] bg-gray-900/95 text-white border-gray-800 backdrop-blur-sm p-0 rounded-md",sideOffset:5,align:"end",children:[s.jsx("div",{className:"p-4 border-b border-gray-800",children:s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Chapters"})}),s.jsx("div",{className:"max-h-[300px] overflow-y-auto py-2",children:t.map(c=>s.jsx(le,{variant:"ghost",className:`w-full justify-start rounded-none ${l?.id===c.id?"bg-white/20 text-white":"text-gray-300 hover:text-white hover:bg-white/10"}`,onClick:()=>{n(c.startTime),i(!1)},children:s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"w-8 text-right mr-2",children:[Math.floor(c.startTime/60),":",String(Math.floor(c.startTime%60)).padStart(2,"0")]}),s.jsx("div",{children:c.title})]})},c.id||c.title))})]})]})})}function Ui({currentSpeed:t,onSpeedChange:e,isSmallVideo:n=!1}){const r=[.25,.5,.75,1,1.25,1.5,1.75,2];return s.jsxs(or,{modal:!0,children:[s.jsx(lr,{asChild:!0,children:s.jsxs(le,{variant:"ghost",className:`text-white hover:bg-white/10 flex items-center ${n?"space-x-0 h-8 px-2":"space-x-1"}`,children:[s.jsx(vi,{className:`${n?"w-4 h-4":"w-4 h-4 mr-1"}`}),!n&&s.jsxs("span",{children:[t,"x"]})]})}),s.jsx(cr,{className:"bg-gray-900 text-white border-gray-800 z-50 w-16 min-w-16",side:"top",children:r.map(i=>s.jsxs(Jr,{className:`cursor-pointer ${i===t?"bg-white/20":"hover:bg-white/10"}`,onClick:()=>e(i),children:[i,"x"]},i))})]})}const zi=(t,e)=>{if(!t)return{x:0,y:0};const n=t.getBoundingClientRect(),r=e.clientX-n.left,i=e.clientY-n.top;return{x:r,y:i}};function Bi(t){return t.additionalItems===!0&&console.warn("additionalItems=true is currently not supported"),nt(t.additionalItems)}function Un(t){if(t==="")return;if(t===null)return null;if(/\.$/.test(t)||/\.0$/.test(t)||/\.\d*0$/.test(t))return t;const e=Number(t);return typeof e=="number"&&!Number.isNaN(e)?e:t}function Vi(t,e={},n){if(!t.additionalProperties)return!1;const{expandable:r=!0}=ne(e);return r===!1?r:t.maxProperties!==void 0&&n?Object.keys(n).length<t.maxProperties:!0}function _r(t={}){return"widget"in ne(t)&&ne(t).widget!=="hidden"}function kr(t,e,n={},r,i){if(n[dr]==="files")return!0;if(e.items){const l=Me(t,e.items,r,void 0,i);return l.type==="string"&&l.format==="data-url"}return!1}function Wi(t,e,n={},r,i,l){const c=ne(n,i),{label:o=!0}=c;let a=!!o;const p=at(e);return p==="array"&&(a=ur(t,e,r,l)||kr(t,e,n,r,l)||_r(n)),p==="object"&&(a=!1),p==="boolean"&&!n[dr]&&(a=!1),n[Zr]&&(a=!1),a}function Hi(t,e,n){if(!n)return e;const{errors:r,errorSchema:i}=e;let l=t.toErrorList(n),c=n;return on(i)||(c=Ke(i,n,!0),l=[...r].concat(l)),{errorSchema:c,errors:l}}const He=Symbol("no Value");function rn(t,e,n,r,i={},l){let c;if(Se(n,ge)){const o={};if(Se(r,ge)){const m=Q(r,ge,{});Object.keys(m).forEach(f=>{Se(i,f)&&(o[f]=void 0)})}const a=Object.keys(Q(n,ge,{})),p={};a.forEach(m=>{const f=Q(i,m);let v=Q(r,[ge,m],{}),y=Q(n,[ge,m],{});Se(v,ke)&&(v=Me(t,v,e,f,l)),Se(y,ke)&&(y=Me(t,y,e,f,l));const k=Q(v,"type"),b=Q(y,"type");if(!k||k===b)if(Se(o,m)&&delete o[m],b==="object"||b==="array"&&Array.isArray(f)){const j=rn(t,e,y,v,f,l);(j!==void 0||b==="array")&&(p[m]=j)}else{const j=Q(y,"default",He),d=Q(v,"default",He);j!==He&&j!==f&&(d===f?o[m]=j:Q(y,"readOnly")===!0&&(o[m]=void 0));const h=Q(y,"const",He),u=Q(v,"const",He);h!==He&&h!==f&&(o[m]=u===f?h:void 0)}}),c={...typeof i=="string"||Array.isArray(i)?void 0:i,...o,...p}}else if(Q(r,"type")==="array"&&Q(n,"type")==="array"&&Array.isArray(i)){let o=Q(r,"items"),a=Q(n,"items");if(typeof o=="object"&&typeof a=="object"&&!Array.isArray(o)&&!Array.isArray(a)){Se(o,ke)&&(o=Me(t,o,e,i,l)),Se(a,ke)&&(a=Me(t,a,e,i,l));const p=Q(o,"type"),m=Q(a,"type");if(!p||p===m){const f=Q(n,"maxItems",-1);m==="object"?c=i.reduce((v,y)=>{const k=rn(t,e,a,o,y,l);return k!==void 0&&(f<0||v.length<f)&&v.push(k),v},[]):c=f>0&&i.length>f?i.slice(0,f):i}}else typeof o=="boolean"&&typeof a=="boolean"&&o===a&&(c=i)}return c}function gt(t,e,n,r,i,l,c,o=[],a){if(ke in e||hr in e||fr in e){const f=Me(t,e,l,c,a);if(o.findIndex(y=>ce(y,f))===-1)return gt(t,f,n,r,i,l,c,o.concat(f),a)}if(Ve in e&&!Q(e,[Ve,ke]))return gt(t,Q(e,Ve),n,r,i,l,c,o,a);const m={$id:i||n};if(at(e)==="object"&&ge in e)for(const f in e.properties){const v=Q(e,[ge,f]),y=m[tn]+r+f;m[f]=gt(t,nt(v)?v:{},n,r,y,l,Q(c,[f]),o,a)}return m}function qi(t,e,n,r,i,l="root",c="_",o){return gt(t,e,l,c,n,r,i,void 0,o)}function Ue(t,e,n,r,i,l=[],c){if(ke in e||hr in e||fr in e){const a=Me(t,e,r,i,c);if(l.findIndex(m=>ce(m,a))===-1)return Ue(t,a,n,r,i,l.concat(a),c)}let o={[ft]:n.replace(/^\./,"")};if(Be in e||Ye in e){const a=Be in e?e.oneOf:e.anyOf,p=pr(e),m=mr(t,r,i,a,0,p,c),f=a[m];o={...o,...Ue(t,f,n,r,i,l,c)}}if(fn in e&&e[fn]!==!1&&me(o,gr,!0),Ve in e&&Array.isArray(i)){const{items:a,additionalItems:p}=e;Array.isArray(a)?i.forEach((m,f)=>{a[f]?o[f]=Ue(t,a[f],`${n}.${f}`,r,m,l,c):p?o[f]=Ue(t,p,`${n}.${f}`,r,m,l,c):console.warn(`Unable to generate path schema for "${n}.${f}". No schema defined for it`)}):i.forEach((m,f)=>{o[f]=Ue(t,a,`${n}.${f}`,r,m,l,c)})}else if(ge in e)for(const a in e.properties){const p=Q(e,[ge,a]);o[a]=Ue(t,p,`${n}.${a}`,r,Q(i,[a]),l,c)}return o}function Ki(t,e,n="",r,i,l){return Ue(t,e,n,r,i,void 0,l)}class Yi{constructor(e,n,r,i){this.rootSchema=n,this.validator=e,this.experimental_defaultFormStateBehavior=r,this.experimental_customMergeAllOf=i}getValidator(){return this.validator}doesSchemaUtilsDiffer(e,n,r={},i){return!e||!n?!1:this.validator!==e||!ce(this.rootSchema,n)||!ce(this.experimental_defaultFormStateBehavior,r)||this.experimental_customMergeAllOf!==i}getDefaultFormState(e,n,r=!1){return Qr(this.validator,e,n,this.rootSchema,r,this.experimental_defaultFormStateBehavior,this.experimental_customMergeAllOf)}getDisplayLabel(e,n,r){return Wi(this.validator,e,n,this.rootSchema,r,this.experimental_customMergeAllOf)}getClosestMatchingOption(e,n,r,i){return mr(this.validator,this.rootSchema,e,n,r,i,this.experimental_customMergeAllOf)}getFirstMatchingOption(e,n,r){return es(this.validator,e,n,this.rootSchema,r)}getMatchingOption(e,n,r){return ts(this.validator,e,n,this.rootSchema,r)}isFilesArray(e,n){return kr(this.validator,e,n,this.rootSchema,this.experimental_customMergeAllOf)}isMultiSelect(e){return ur(this.validator,e,this.rootSchema,this.experimental_customMergeAllOf)}isSelect(e){return ns(this.validator,e,this.rootSchema,this.experimental_customMergeAllOf)}mergeValidationData(e,n){return Hi(this.validator,e,n)}retrieveSchema(e,n){return Me(this.validator,e,this.rootSchema,n,this.experimental_customMergeAllOf)}sanitizeDataForNewSchema(e,n,r){return rn(this.validator,this.rootSchema,e,n,r,this.experimental_customMergeAllOf)}toIdSchema(e,n,r,i="root",l="_"){return qi(this.validator,e,n,this.rootSchema,r,i,l,this.experimental_customMergeAllOf)}toPathSchema(e,n,r){return Ki(this.validator,e,n,this.rootSchema,r,this.experimental_customMergeAllOf)}}function Xi(t,e,n={},r){return new Yi(t,e,n,r)}function Gi(t){var e;if(t.indexOf("data:")===-1)throw new Error("File is invalid: URI must be a dataURI");const r=t.slice(5).split(";base64,");if(r.length!==2)throw new Error("File is invalid: dataURI must be base64");const[i,l]=r,[c,...o]=i.split(";"),a=c||"",p=decodeURI(((e=o.map(m=>m.split("=")).find(([m])=>m==="name"))===null||e===void 0?void 0:e[1])||"unknown");try{const m=atob(l),f=new Array(m.length);for(let y=0;y<m.length;y++)f[y]=m.charCodeAt(y);return{blob:new window.Blob([new Uint8Array(f)],{type:a}),name:p}}catch(m){throw new Error("File is invalid: "+m.message)}}function Ae(t,e){let n=String(t);for(;n.length<e;)n="0"+n;return n}function Dr(t,e){if(t<=0&&e<=0)t=new Date().getFullYear()+t,e=new Date().getFullYear()+e;else if(t<0||e<0)throw new Error(`Both start (${t}) and stop (${e}) must both be <= 0 or > 0, got one of each`);if(t>e)return Dr(e,t).reverse();const n=[];for(let r=t;r<=e;r++)n.push({value:r,label:Ae(r,2)});return n}function Ji(t,e){let n=t;if(Array.isArray(e)){const r=n.split(/(%\d)/);e.forEach((i,l)=>{const c=r.findIndex(o=>o===`%${l+1}`);c>=0&&(r[c]=i)}),n=r.join("")}return n}function Zi(t,e){return Ji(t,e)}function je(t,e=[],n){if(Array.isArray(t))return t.map(l=>je(l,e)).filter(l=>l!==n);const r=t===""||t===null?-1:Number(t),i=e[r];return i?i.value:n}function Qi(t,e,n=[]){const r=je(t,n);return Array.isArray(e)?e.filter(i=>!ce(i,r)):ce(r,e)?void 0:e}function cn(t,e){return Array.isArray(e)?e.some(n=>ce(n,t)):ce(e,t)}function ea(t,e=[],n=!1){const r=e.map((i,l)=>cn(i.value,t)?String(l):void 0).filter(i=>typeof i<"u");return n?r:r[0]}function ta(t,e,n=[]){const r=je(t,n);if(!yr(r)){const i=n.findIndex(o=>r===o.value),l=n.map(({value:o})=>o);return e.slice(0,i).concat(r,e.slice(i)).sort((o,a)=>+(l.indexOf(o)>l.indexOf(a)))}return e}function na(t,e,n=[1900,new Date().getFullYear()+2],r="YMD"){const{day:i,month:l,year:c,hour:o,minute:a,second:p}=t,m={type:"day",range:[1,31],value:i},f={type:"month",range:[1,12],value:l},v={type:"year",range:n,value:c},y=[];switch(r){case"MDY":y.push(f,m,v);break;case"DMY":y.push(m,f,v);break;case"YMD":default:y.push(v,f,m)}return e&&y.push({type:"hour",range:[0,23],value:o},{type:"minute",range:[0,59],value:a},{type:"second",range:[0,59],value:p}),y}function ra(t){const e={};return t.multipleOf&&(e.step=t.multipleOf),(t.minimum||t.minimum===0)&&(e.min=t.minimum),(t.maximum||t.maximum===0)&&(e.max=t.maximum),e}function sa(t,e,n={},r=!0){const i={type:e||"text",...ra(t)};return n.inputType?i.type=n.inputType:e||(t.type==="number"?(i.type="number",r&&i.step===void 0&&(i.step="any")):t.type==="integer"&&(i.type="number",i.step===void 0&&(i.step=1))),n.autocomplete&&(i.autoComplete=n.autocomplete),n.accept&&(i.accept=n.accept),i}const zn={props:{disabled:!1},submitText:"Submit",norender:!1};function ia(t={}){const e=ne(t);if(e&&e[bt]){const n=e[bt];return{...zn,...n}}return zn}function te(t,e,n={}){const{templates:r}=e;return t==="ButtonTemplates"?r[t]:n[t]||r[t]}const Ht={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",time:"TimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function aa(t){let e=Q(t,"MergedWidget");if(!e){const n=t.defaultProps&&t.defaultProps.options||{};e=({options:r,...i})=>s.jsx(t,{options:{...n,...r},...i}),me(t,"MergedWidget",e)}return e}function De(t,e,n={}){const r=at(t);if(typeof e=="function"||e&&pn.isForwardRef(T.createElement(e))||pn.isMemo(e))return aa(e);if(typeof e!="string")throw new Error(`Unsupported widget definition: ${typeof e}`);if(e in n){const i=n[e];return De(t,i,n)}if(typeof r=="string"){if(!(r in Ht))throw new Error(`No widget for type '${r}'`);if(e in Ht[r]){const i=n[Ht[r][e]];return De(t,i,n)}}throw new Error(`No widget '${e}' for type '${r}'`)}function oa(t,e,n={}){try{return De(t,e,n),!0}catch(r){const i=r;if(i.message&&(i.message.startsWith("No widget")||i.message.startsWith("Unsupported widget")))return!1;throw r}}function la(t,e,n){return e?n:t}function ca(t){return t?new Date(t).toJSON():void 0}function da(t,e){if(!Array.isArray(e))return t;const n=m=>m.reduce((f,v)=>(f[v]=!0,f),{}),r=m=>m.length>1?`properties '${m.join("', '")}'`:`property '${m[0]}'`,i=n(t),l=e.filter(m=>m==="*"||i[m]),c=n(l),o=t.filter(m=>!c[m]),a=l.indexOf("*");if(a===-1){if(o.length)throw new Error(`uiSchema order list does not contain ${r(o)}`);return l}if(a!==l.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");const p=[...l];return p.splice(a,1,...o),p}function qt(t,e=!0){if(!t)return{year:-1,month:-1,day:-1,hour:e?-1:0,minute:e?-1:0,second:e?-1:0};const n=new Date(t);if(Number.isNaN(n.getTime()))throw new Error("Unable to parse date "+t);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:e?n.getUTCHours():0,minute:e?n.getUTCMinutes():0,second:e?n.getUTCSeconds():0}}function yt(t){if(t.const||t.enum&&t.enum.length===1&&t.enum[0]===!0)return!0;if(t.anyOf&&t.anyOf.length===1)return yt(t.anyOf[0]);if(t.oneOf&&t.oneOf.length===1)return yt(t.oneOf[0]);if(t.allOf){const e=n=>yt(n);return t.allOf.some(e)}return!1}function ua(t,e,n){const{props:r,state:i}=t;return!ce(r,e)||!ce(i,n)}function Bn(t,e=!0){const{year:n,month:r,day:i,hour:l=0,minute:c=0,second:o=0}=t,a=Date.UTC(n,r-1,i,l,c,o),p=new Date(a).toJSON();return e?p:p.slice(0,10)}function ha(t){if(!t)return"";const e=new Date(t),n=Ae(e.getFullYear(),4),r=Ae(e.getMonth()+1,2),i=Ae(e.getDate(),2),l=Ae(e.getHours(),2),c=Ae(e.getMinutes(),2),o=Ae(e.getSeconds(),2),a=Ae(e.getMilliseconds(),3);return`${n}-${r}-${i}T${l}:${c}:${o}.${a}`}function Er(t,e,n){for(var r=-1,i=e.length,l={};++r<i;){var c=e[r],o=rs(t,c);n(o,c)&&ss(l,is(c,t),o)}return l}function fa(t,e){if(t==null)return{};var n=as(os(t),function(r){return[r]});return e=ls(e),Er(t,n,function(r,i){return e(r,i[0])})}var pa=200;function ma(t,e,n,r){var i=-1,l=ds,c=!0,o=t.length,a=[],p=e.length;if(!o)return a;e.length>=pa&&(l=us,c=!1,e=new cs(e));e:for(;++i<o;){var m=t[i],f=m;if(m=m!==0?m:0,c&&f===f){for(var v=p;v--;)if(e[v]===f)continue e;a.push(m)}else l(e,f,r)||a.push(m)}return a}var ga=hs(function(t,e){return mn(t)?ma(t,fs(e,1,mn,!0)):[]});function ya(t,e){const n=gn(t),r=gn(e);if(t===e||!n&&!r)return[];if(n&&!r)return Qe(t);if(!n&&r)return Qe(e);{const i=Qe(fa(t,(c,o)=>!ce(c,Q(e,o)))),l=ga(Qe(e),Qe(t));return[...i,...l]}}function xa(t,e){var n=ys(t)?ps:ms;return n(t,gs(e))}function va(t,e){return Er(t,e,function(n,r){return xs(t,r)})}var Vn=vs(function(t,e){return t==null?{}:va(t,e)}),ba=0;function wa(t){var e=++ba;return bs(t)+e}function sn(){return wa("rjsf-array-item-")}function Wn(t){return Array.isArray(t)?t.map(e=>({key:sn(),item:e})):[]}function et(t){return Array.isArray(t)?t.map(e=>e.item):[]}class Sa extends T.Component{constructor(e){super(e);const{formData:n=[]}=e,r=Wn(n);this.state={keyedFormData:r,updatedKeyedFormData:!1}}static getDerivedStateFromProps(e,n){if(n.updatedKeyedFormData)return{updatedKeyedFormData:!1};const r=Array.isArray(e.formData)?e.formData:[],i=n.keyedFormData||[];return{keyedFormData:r.length===i.length?i.map((c,o)=>({key:c.key,item:r[o]})):Wn(r)}}get itemTitle(){const{schema:e,registry:n}=this.props,{translateString:r}=n;return Q(e,[Ve,"title"],Q(e,[Ve,"description"],r(ae.ArrayItemTitle)))}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):e.type!=="null"}canAddItem(e){const{schema:n,uiSchema:r,registry:i}=this.props;let{addable:l}=ne(r,i.globalUiOptions);return l!==!1&&(n.maxItems!==void 0?l=e.length<n.maxItems:l=!0),l}_getNewFormDataRow=()=>{const{schema:e,registry:n}=this.props,{schemaUtils:r}=n;let i=e.items;return yn(e)&&Bi(e)&&(i=e.additionalItems),r.getDefaultFormState(i)};_handleAddClick(e,n){e&&e.preventDefault();const{onChange:r,errorSchema:i}=this.props,{keyedFormData:l}=this.state;let c;if(i){c={};for(const p in i){const m=parseInt(p);n===void 0||m<n?me(c,[m],i[p]):m>=n&&me(c,[m+1],i[p])}}const o={key:sn(),item:this._getNewFormDataRow()},a=[...l];n!==void 0?a.splice(n,0,o):a.push(o),this.setState({keyedFormData:a,updatedKeyedFormData:!0},()=>r(et(a),c))}onAddClick=e=>{this._handleAddClick(e)};onAddIndexClick=e=>n=>{this._handleAddClick(n,e)};onCopyIndexClick=e=>n=>{n&&n.preventDefault();const{onChange:r,errorSchema:i}=this.props,{keyedFormData:l}=this.state;let c;if(i){c={};for(const p in i){const m=parseInt(p);m<=e?me(c,[m],i[p]):m>e&&me(c,[m+1],i[p])}}const o={key:sn(),item:ws(l[e].item)},a=[...l];e!==void 0?a.splice(e+1,0,o):a.push(o),this.setState({keyedFormData:a,updatedKeyedFormData:!0},()=>r(et(a),c))};onDropIndexClick=e=>n=>{n&&n.preventDefault();const{onChange:r,errorSchema:i}=this.props,{keyedFormData:l}=this.state;let c;if(i){c={};for(const a in i){const p=parseInt(a);p<e?me(c,[p],i[a]):p>e&&me(c,[p-1],i[a])}}const o=l.filter((a,p)=>p!==e);this.setState({keyedFormData:o,updatedKeyedFormData:!0},()=>r(et(o),c))};onReorderClick=(e,n)=>r=>{r&&(r.preventDefault(),r.currentTarget.blur());const{onChange:i,errorSchema:l}=this.props;let c;if(l){c={};for(const m in l){const f=parseInt(m);f==e?me(c,[n],l[e]):f==n?me(c,[e],l[n]):me(c,[m],l[f])}}const{keyedFormData:o}=this.state;function a(){const m=o.slice();return m.splice(e,1),m.splice(n,0,o[e]),m}const p=a();this.setState({keyedFormData:p},()=>i(et(p),c))};onChangeForIndex=e=>(n,r,i)=>{const{formData:l,onChange:c,errorSchema:o}=this.props,p=(Array.isArray(l)?l:[]).map((m,f)=>e===f?typeof n>"u"?null:n:m);c(p,o&&o&&{...o,[e]:r},i)};onSelectChange=e=>{const{onChange:n,idSchema:r}=this.props;n(e,void 0,r&&r.$id)};render(){const{schema:e,uiSchema:n,idSchema:r,registry:i}=this.props,{schemaUtils:l,translateString:c}=i;if(!(Ve in e)){const o=ne(n),a=te("UnsupportedFieldTemplate",i,o);return s.jsx(a,{schema:e,idSchema:r,reason:c(ae.MissingItems),registry:i})}return l.isMultiSelect(e)?this.renderMultiSelect():_r(n)?this.renderCustomWidget():yn(e)?this.renderFixedArray():l.isFilesArray(e,n)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:e,uiSchema:n={},errorSchema:r,idSchema:i,name:l,title:c,disabled:o=!1,readonly:a=!1,autofocus:p=!1,required:m=!1,registry:f,onBlur:v,onFocus:y,idPrefix:k,idSeparator:b="_",rawErrors:j}=this.props,{keyedFormData:d}=this.state,h=e.title||c||l,{schemaUtils:u,formContext:g}=f,x=ne(n),S=Fe(e.items)?e.items:{},w=u.retrieveSchema(S),I=et(this.state.keyedFormData),_=this.canAddItem(I),O={canAdd:_,items:d.map((M,E)=>{const{key:C,item:P}=M,U=P,q=u.retrieveSchema(S,U),Y=r?r[E]:void 0,D=i.$id+b+E,L=u.toIdSchema(q,D,U,k,b);return this.renderArrayFieldItem({key:C,index:E,name:l&&`${l}-${E}`,title:h?`${h}-${E+1}`:void 0,canAdd:_,canMoveUp:E>0,canMoveDown:E<I.length-1,itemSchema:q,itemIdSchema:L,itemErrorSchema:Y,itemData:U,itemUiSchema:n.items,autofocus:p&&E===0,onBlur:v,onFocus:y,rawErrors:j,totalItems:d.length})}),className:`field field-array field-array-of-${w.type}`,disabled:o,idSchema:i,uiSchema:n,onAddClick:this.onAddClick,readonly:a,required:m,schema:e,title:h,formContext:g,formData:I,rawErrors:j,registry:f},N=te("ArrayFieldTemplate",f,x);return s.jsx(N,{...O})}renderCustomWidget(){const{schema:e,idSchema:n,uiSchema:r,disabled:i=!1,readonly:l=!1,autofocus:c=!1,required:o=!1,hideError:a,placeholder:p,onBlur:m,onFocus:f,formData:v=[],registry:y,rawErrors:k,name:b}=this.props,{widgets:j,formContext:d,globalUiOptions:h,schemaUtils:u}=y,{widget:g,title:x,...S}=ne(r,h),w=De(e,g,j),I=x??e.title??b,_=u.getDisplayLabel(e,r,h);return s.jsx(w,{id:n.$id,name:b,multiple:!0,onChange:this.onSelectChange,onBlur:m,onFocus:f,options:S,schema:e,uiSchema:r,registry:y,value:v,disabled:i,readonly:l,hideError:a,required:o,label:I,hideLabel:!_,placeholder:p,formContext:d,autofocus:c,rawErrors:k})}renderMultiSelect(){const{schema:e,idSchema:n,uiSchema:r,formData:i=[],disabled:l=!1,readonly:c=!1,autofocus:o=!1,required:a=!1,placeholder:p,onBlur:m,onFocus:f,registry:v,rawErrors:y,name:k}=this.props,{widgets:b,schemaUtils:j,formContext:d,globalUiOptions:h}=v,u=j.retrieveSchema(e.items,i),g=wt(u,r),{widget:x="select",title:S,...w}=ne(r,h),I=De(e,x,b),_=S??e.title??k,O=j.getDisplayLabel(e,r,h);return s.jsx(I,{id:n.$id,name:k,multiple:!0,onChange:this.onSelectChange,onBlur:m,onFocus:f,options:{...w,enumOptions:g},schema:e,uiSchema:r,registry:v,value:i,disabled:l,readonly:c,required:a,label:_,hideLabel:!O,placeholder:p,formContext:d,autofocus:o,rawErrors:y})}renderFiles(){const{schema:e,uiSchema:n,idSchema:r,name:i,disabled:l=!1,readonly:c=!1,autofocus:o=!1,required:a=!1,onBlur:p,onFocus:m,registry:f,formData:v=[],rawErrors:y}=this.props,{widgets:k,formContext:b,globalUiOptions:j,schemaUtils:d}=f,{widget:h="files",title:u,...g}=ne(n,j),x=De(e,h,k),S=u??e.title??i,w=d.getDisplayLabel(e,n,j);return s.jsx(x,{options:g,id:r.$id,name:i,multiple:!0,onChange:this.onSelectChange,onBlur:p,onFocus:m,schema:e,uiSchema:n,value:v,disabled:l,readonly:c,required:a,registry:f,formContext:b,autofocus:o,rawErrors:y,label:S,hideLabel:!w})}renderFixedArray(){const{schema:e,uiSchema:n={},formData:r=[],errorSchema:i,idPrefix:l,idSeparator:c="_",idSchema:o,name:a,title:p,disabled:m=!1,readonly:f=!1,autofocus:v=!1,required:y=!1,registry:k,onBlur:b,onFocus:j,rawErrors:d}=this.props,{keyedFormData:h}=this.state;let{formData:u=[]}=this.props;const g=e.title||p||a,x=ne(n),{schemaUtils:S,formContext:w}=k,_=(Fe(e.items)?e.items:[]).map((C,P)=>S.retrieveSchema(C,r[P])),O=Fe(e.additionalItems)?S.retrieveSchema(e.additionalItems,r):null;(!u||u.length<_.length)&&(u=u||[],u=u.concat(new Array(_.length-u.length)));const N=this.canAddItem(u)&&!!O,M={canAdd:N,className:"field field-array field-array-fixed-items",disabled:m,idSchema:o,formData:r,items:h.map((C,P)=>{const{key:U,item:q}=C,Y=q,D=P>=_.length,L=(D&&Fe(e.additionalItems)?S.retrieveSchema(e.additionalItems,Y):_[P])||{},z=o.$id+c+P,G=S.toIdSchema(L,z,Y,l,c),J=D?n.additionalItems||{}:Array.isArray(n.items)?n.items[P]:n.items||{},re=i?i[P]:void 0;return this.renderArrayFieldItem({key:U,index:P,name:a&&`${a}-${P}`,title:g?`${g}-${P+1}`:void 0,canAdd:N,canRemove:D,canMoveUp:P>=_.length+1,canMoveDown:D&&P<u.length-1,itemSchema:L,itemData:Y,itemUiSchema:J,itemIdSchema:G,itemErrorSchema:re,autofocus:v&&P===0,onBlur:b,onFocus:j,rawErrors:d,totalItems:h.length})}),onAddClick:this.onAddClick,readonly:f,required:y,registry:k,schema:e,uiSchema:n,title:g,formContext:w,errorSchema:i,rawErrors:d},E=te("ArrayFieldTemplate",k,x);return s.jsx(E,{...M})}renderArrayFieldItem(e){const{key:n,index:r,name:i,canAdd:l,canRemove:c=!0,canMoveUp:o,canMoveDown:a,itemSchema:p,itemData:m,itemUiSchema:f,itemIdSchema:v,itemErrorSchema:y,autofocus:k,onBlur:b,onFocus:j,rawErrors:d,totalItems:h,title:u}=e,{disabled:g,hideError:x,idPrefix:S,idSeparator:w,readonly:I,uiSchema:_,registry:O,formContext:N}=this.props,{fields:{ArraySchemaField:M,SchemaField:E},globalUiOptions:C}=O,P=M||E,{orderable:U=!0,removable:q=!0,copyable:Y=!1}=ne(_,C),D={moveUp:U&&o,moveDown:U&&a,copy:Y&&l,remove:q&&c,toolbar:!1};return D.toolbar=Object.keys(D).some(L=>D[L]),{children:s.jsx(P,{name:i,title:u,index:r,schema:p,uiSchema:f,formData:m,formContext:N,errorSchema:y,idPrefix:S,idSeparator:w,idSchema:v,required:this.isItemRequired(p),onChange:this.onChangeForIndex(r),onBlur:b,onFocus:j,registry:O,disabled:g,readonly:I,hideError:x,autofocus:k,rawErrors:d}),className:"array-item",disabled:g,canAdd:l,hasCopy:D.copy,hasToolbar:D.toolbar,hasMoveUp:D.moveUp,hasMoveDown:D.moveDown,hasRemove:D.remove,index:r,totalItems:h,key:n,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:I,registry:O,schema:p,uiSchema:f}}}function ja(t){const{schema:e,name:n,uiSchema:r,idSchema:i,formData:l,registry:c,required:o,disabled:a,readonly:p,hideError:m,autofocus:f,title:v,onChange:y,onFocus:k,onBlur:b,rawErrors:j}=t,{title:d}=e,{widgets:h,formContext:u,translateString:g,globalUiOptions:x}=c,{widget:S="checkbox",title:w,label:I=!0,..._}=ne(r,x),O=De(e,S,h),N=g(ae.YesLabel),M=g(ae.NoLabel);let E;const C=w??d??v??n;if(Array.isArray(e.oneOf))E=wt({oneOf:e.oneOf.map(P=>{if(Fe(P))return{...P,title:P.title||(P.const===!0?N:M)}}).filter(P=>P)},r);else{const P=e,U=e.enum??[!0,!1];!P.enumNames&&U.length===2&&U.every(q=>typeof q=="boolean")?E=[{value:U[0],label:U[0]?N:M},{value:U[1],label:U[1]?N:M}]:E=wt({enum:U,enumNames:P.enumNames},r)}return s.jsx(O,{options:{..._,enumOptions:E},schema:e,uiSchema:r,id:i.$id,name:n,onChange:y,onFocus:k,onBlur:b,label:C,hideLabel:!I,value:l,required:o,disabled:a,readonly:p,hideError:m,registry:c,formContext:u,autofocus:f,rawErrors:j})}class Hn extends T.Component{constructor(e){super(e);const{formData:n,options:r,registry:{schemaUtils:i}}=this.props,l=r.map(c=>i.retrieveSchema(c,n));this.state={retrievedOptions:l,selectedOption:this.getMatchingOption(0,n,l)}}componentDidUpdate(e,n){const{formData:r,options:i,idSchema:l}=this.props,{selectedOption:c}=this.state;let o=this.state;if(!ce(e.options,i)){const{registry:{schemaUtils:a}}=this.props,p=i.map(m=>a.retrieveSchema(m,r));o={selectedOption:c,retrievedOptions:p}}if(!ce(r,e.formData)&&l.$id===e.idSchema.$id){const{retrievedOptions:a}=o,p=this.getMatchingOption(c,r,a);n&&p!==c&&(o={selectedOption:p,retrievedOptions:a})}o!==this.state&&this.setState(o)}getMatchingOption(e,n,r){const{schema:i,registry:{schemaUtils:l}}=this.props,c=pr(i);return l.getClosestMatchingOption(n,r,e,c)}onOptionChange=e=>{const{selectedOption:n,retrievedOptions:r}=this.state,{formData:i,onChange:l,registry:c}=this.props,{schemaUtils:o}=c,a=e!==void 0?parseInt(e,10):-1;if(a===n)return;const p=a>=0?r[a]:void 0,m=n>=0?r[n]:void 0;let f=o.sanitizeDataForNewSchema(p,m,i);p&&(f=o.getDefaultFormState(p,f,"excludeObjectChildren")),this.setState({selectedOption:a},()=>{l(f,void 0,this.getFieldId())})};getFieldId(){const{idSchema:e,schema:n}=this.props;return`${e.$id}${n.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:e,disabled:n=!1,errorSchema:r={},formContext:i,onBlur:l,onFocus:c,readonly:o,registry:a,schema:p,uiSchema:m}=this.props,{widgets:f,fields:v,translateString:y,globalUiOptions:k,schemaUtils:b}=a,{SchemaField:j}=v,{selectedOption:d,retrievedOptions:h}=this.state,{widget:u="select",placeholder:g,autofocus:x,autocomplete:S,title:w=p.title,...I}=ne(m,k),_=De({type:"number"},u,f),O=Q(r,xn,[]),N=nn(r,[xn]),M=b.getDisplayLabel(p,m,k),E=d>=0&&h[d]||null;let C;if(E){const{required:L}=p;C=L?Ss({required:L},E):E}let P=[];Be in p&&m&&Be in m?Array.isArray(m[Be])?P=m[Be]:console.warn(`uiSchema.oneOf is not an array for "${w||e}"`):Ye in p&&m&&Ye in m&&(Array.isArray(m[Ye])?P=m[Ye]:console.warn(`uiSchema.anyOf is not an array for "${w||e}"`));let U=m;d>=0&&P.length>d&&(U=P[d]);const q=w?ae.TitleOptionPrefix:ae.OptionPrefix,Y=w?[w]:[],D=h.map((L,z)=>{const{title:G=L.title}=ne(P[z]);return{label:G||y(q,Y.concat(String(z+1))),value:z}});return s.jsxs("div",{className:"panel panel-default panel-body",children:[s.jsx("div",{className:"form-group",children:s.jsx(_,{id:this.getFieldId(),name:`${e}${p.oneOf?"__oneof_select":"__anyof_select"}`,schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:l,onFocus:c,disabled:n||on(D),multiple:!1,rawErrors:O,errorSchema:N,value:d>=0?d:void 0,options:{enumOptions:D,...I},registry:a,formContext:i,placeholder:g,autocomplete:S,autofocus:x,label:w??e,hideLabel:!M,readonly:o})}),C&&C.type!=="null"&&s.jsx(j,{...this.props,schema:C,uiSchema:U})]})}}const Ca=/\.([0-9]*0)*$/,Pa=/[0.]0*$/;function _a(t){const{registry:e,onChange:n,formData:r,value:i}=t,[l,c]=T.useState(i),{StringField:o}=e.fields;let a=r;const p=T.useCallback((m,f,v)=>{c(m),`${m}`.charAt(0)==="."&&(m=`0${m}`);const y=typeof m=="string"&&m.match(Ca)?Un(m.replace(Pa,"")):Un(m);n(y,f,v)},[n]);if(typeof l=="string"&&typeof a=="number"){const m=new RegExp(`^(${String(a).replace(".","\\.")})?\\.?0*$`);l.match(m)&&(a=l)}return s.jsx(o,{...t,formData:a,onChange:p})}function ze(){return ze=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ze.apply(this,arguments)}const ka=["children","options"],qn=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((t,e)=>(t[e.toLowerCase()]=e,t),{class:"className",for:"htmlFor"}),Kn={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},Da=["style","script","pre"],Ea=["src","href","data","formAction","srcDoc","action"],Oa=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,Na=/\n{2,}$/,Yn=/^(\s*>[\s\S]*?)(?=\n\n|$)/,Ta=/^ *> ?/gm,Ia=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,Aa=/^ {2,}\n/,Ma=/^(?:([-*_])( *\1){2,}) *(?:\n *)+\n/,Xn=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,Gn=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,Fa=/^(`+)((?:\\`|(?!\1)`|[^`])+)\1/,Ra=/^(?:\n *)*\n/,La=/\r\n?/g,$a=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,Ua=/^\[\^([^\]]+)]/,za=/\f/g,Ba=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,Va=/^\s*?\[(x|\s)\]/,Jn=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Zn=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Qn=/^([^\n]+)\n *(=|-)\2{2,} *\n/,Kt=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,Wa=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,er=/^<!--[\s\S]*?(?:-->)/,Ha=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,Yt=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,qa=/^\{.*\}$/,Ka=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,Ya=/^<([^ >]+[:@\/][^ >]+)>/,Xa=/-([a-z])?/gi,tr=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,Ga=/^[^\n]+(?:  \n|\n{2,})/,Ja=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,Za=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,Qa=/^\[([^\]]*)\] ?\[([^\]]*)\]/,eo=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,to=/\t/g,no=/(^ *\||\| *$)/g,ro=/^ *:-+: *$/,so=/^ *:-+ *$/,io=/^ *-+: *$/,Pt=t=>`(?=[\\s\\S]+?\\1${t?"\\1":""})`,_t="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|\\\\\\1|[\\s\\S])+?)",ao=RegExp(`^([*_])\\1${Pt(1)}${_t}\\1\\1(?!\\1)`),oo=RegExp(`^([*_])${Pt(0)}${_t}\\1(?!\\1)`),lo=RegExp(`^(==)${Pt(0)}${_t}\\1`),co=RegExp(`^(~~)${Pt(0)}${_t}\\1`),uo=/^(:[a-zA-Z0-9-_]+:)/,ho=/^\\([^0-9A-Za-z\s])/,fo=/\\([^0-9A-Za-z\s])/g,po=/^[\s\S](?:(?!  \n|[0-9]\.|http)[^=*_~\-\n:<`\\\[!])*/,mo=/^\n+/,go=/^([ \t]*)/,yo=/(?:^|\n)( *)$/,dn="(?:\\d+\\.)",un="(?:[*+-])";function Or(t){return"( *)("+(t===1?dn:un)+") +"}const Nr=Or(1),Tr=Or(2);function Ir(t){return RegExp("^"+(t===1?Nr:Tr))}const xo=Ir(1),vo=Ir(2);function Ar(t){return RegExp("^"+(t===1?Nr:Tr)+"[^\\n]*(?:\\n(?!\\1"+(t===1?dn:un)+" )[^\\n]*)*(\\n|$)","gm")}const bo=Ar(1),wo=Ar(2);function Mr(t){const e=t===1?dn:un;return RegExp("^( *)("+e+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+e+" (?!"+e+" ))\\n*|\\s*\\n*$)")}const Fr=Mr(1),Rr=Mr(2);function nr(t,e){const n=e===1,r=n?Fr:Rr,i=n?bo:wo,l=n?xo:vo;return{t:c=>l.test(c),o:Xe(function(c,o){const a=yo.exec(o.prevCapture);return a&&(o.list||!o.inline&&!o.simple)?r.exec(c=a[1]+c):null}),i:1,u(c,o,a){const p=n?+c[2]:void 0,m=c[0].replace(Na,`
`).match(i);let f=!1;return{items:m.map(function(v,y){const k=l.exec(v)[0].length,b=RegExp("^ {1,"+k+"}","gm"),j=v.replace(b,"").replace(l,""),d=y===m.length-1,h=j.indexOf(`

`)!==-1||d&&f;f=h;const u=a.inline,g=a.list;let x;a.list=!0,h?(a.inline=!1,x=it(j)+`

`):(a.inline=!0,x=it(j));const S=o(x,a);return a.inline=u,a.list=g,S}),ordered:n,start:p}},l:(c,o,a)=>t(c.ordered?"ol":"ul",{key:a.key,start:c.type==="20"?c.start:void 0},c.items.map(function(p,m){return t("li",{key:m},o(p,a))}))}}const So=RegExp(`^\\[((?:\\[[^\\[\\]]*(?:\\[[^\\[\\]]*\\][^\\[\\]]*)*\\]|[^\\[\\]])*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*\\)`),jo=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/;function rr(t){return typeof t=="string"}function it(t){let e=t.length;for(;e>0&&t[e-1]<=" ";)e--;return t.slice(0,e)}function xt(t,e){return t.startsWith(e)}function Co(t,e,n){if(Array.isArray(n)){for(let r=0;r<n.length;r++)if(xt(t,n[r]))return!0;return!1}return n(t,e)}function tt(t){return t.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function Po(t){return io.test(t)?"right":ro.test(t)?"center":so.test(t)?"left":null}function sr(t,e,n,r){const i=n.inTable;n.inTable=!0;let l=[[]],c="";function o(){if(!c)return;const a=l[l.length-1];a.push.apply(a,e(c,n)),c=""}return t.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach((a,p,m)=>{a.trim()==="|"&&(o(),r)?p!==0&&p!==m.length-1&&l.push([]):c+=a}),o(),n.inTable=i,l}function _o(t,e,n){n.inline=!0;const r=t[2]?t[2].replace(no,"").split("|").map(Po):[],i=t[3]?(function(c,o,a){return c.trim().split(`
`).map(function(p){return sr(p,o,a,!0)})})(t[3],e,n):[],l=sr(t[1],e,n,!!i.length);return n.inline=!1,i.length?{align:r,cells:i,header:l,type:"25"}:{children:l,type:"21"}}function ir(t,e){return t.align[e]==null?{}:{textAlign:t.align[e]}}function Xe(t){return t.inline=1,t}function $e(t){return Xe(function(e,n){return n.inline?t.exec(e):null})}function Ie(t){return Xe(function(e,n){return n.inline||n.simple?t.exec(e):null})}function Pe(t){return function(e,n){return n.inline||n.simple?null:t.exec(e)}}function ht(t){return Xe(function(e){return t.exec(e)})}const ko=/(javascript|vbscript|data(?!:image)):/i;function Do(t){try{const e=decodeURIComponent(t).replace(/[^A-Za-z0-9/:]/g,"");if(ko.test(e))return null}catch{return null}return t}function be(t){return t&&t.replace(fo,"$1")}function vt(t,e,n){const r=n.inline||!1,i=n.simple||!1;n.inline=!0,n.simple=!0;const l=t(e,n);return n.inline=r,n.simple=i,l}function Eo(t,e,n){const r=n.inline||!1,i=n.simple||!1;n.inline=!1,n.simple=!0;const l=t(e,n);return n.inline=r,n.simple=i,l}function Oo(t,e,n){const r=n.inline||!1;n.inline=!1;const i=t(e,n);return n.inline=r,i}const Xt=(t,e,n)=>({children:vt(e,t[2],n)});function Gt(){return{}}function Jt(){return null}function No(...t){return t.filter(Boolean).join(" ")}function Zt(t,e,n){let r=t;const i=e.split(".");for(;i.length&&(r=r[i[0]],r!==void 0);)i.shift();return r||n}function To(t="",e={}){e.overrides=e.overrides||{},e.namedCodesToUnicode=e.namedCodesToUnicode?ze({},Kn,e.namedCodesToUnicode):Kn;const n=e.slugify||tt,r=e.sanitizer||Do,i=e.createElement||T.createElement,l=[Yn,Xn,Gn,e.enforceAtxHeadings?Zn:Jn,Qn,tr,Fr,Rr],c=[...l,Ga,Kt,er,Yt];function o(d,h){for(let u=0;u<d.length;u++)if(d[u].test(h))return!0;return!1}function a(d,h,...u){const g=Zt(e.overrides,d+".props",{});return i((function(x,S){const w=Zt(S,x);return w?typeof w=="function"||typeof w=="object"&&"render"in w?w:Zt(S,x+".component",x):x})(d,e.overrides),ze({},h,g,{className:No(h?.className,g.className)||void 0}),...u)}function p(d){d=d.replace(Ba,"");let h=!1;e.forceInline?h=!0:e.forceBlock||(h=eo.test(d)===!1);const u=b(k(h?d:it(d).replace(mo,"")+`

`,{inline:h}));for(;rr(u[u.length-1])&&!u[u.length-1].trim();)u.pop();if(e.wrapper===null)return u;const g=e.wrapper||(h?"span":"div");let x;if(u.length>1||e.forceWrapper)x=u;else{if(u.length===1)return x=u[0],typeof x=="string"?a("span",{key:"outer"},x):x;x=null}return i(g,{key:"outer"},x)}function m(d,h){if(!h||!h.trim())return null;const u=h.match(Oa);return u?u.reduce(function(g,x){const S=x.indexOf("=");if(S!==-1){const w=(function(N){return N.indexOf("-")!==-1&&N.match(Ha)===null&&(N=N.replace(Xa,function(M,E){return E.toUpperCase()})),N})(x.slice(0,S)).trim(),I=(function(N){const M=N[0];return(M==='"'||M==="'")&&N.length>=2&&N[N.length-1]===M?N.slice(1,-1):N})(x.slice(S+1).trim()),_=qn[w]||w;if(_==="ref")return g;const O=g[_]=(function(N,M,E,C){return M==="style"?(function(P){const U=[];let q="",Y=!1,D=!1,L="";if(!P)return U;for(let G=0;G<P.length;G++){const J=P[G];if(J!=='"'&&J!=="'"||Y||(D?J===L&&(D=!1,L=""):(D=!0,L=J)),J==="("&&q.endsWith("url")?Y=!0:J===")"&&Y&&(Y=!1),J!==";"||D||Y)q+=J;else{const re=q.trim();if(re){const de=re.indexOf(":");if(de>0){const ue=re.slice(0,de).trim(),pe=re.slice(de+1).trim();U.push([ue,pe])}}q=""}}const z=q.trim();if(z){const G=z.indexOf(":");if(G>0){const J=z.slice(0,G).trim(),re=z.slice(G+1).trim();U.push([J,re])}}return U})(E).reduce(function(P,[U,q]){return P[U.replace(/(-[a-z])/g,Y=>Y[1].toUpperCase())]=C(q,N,U),P},{}):Ea.indexOf(M)!==-1?C(be(E),N,M):(E.match(qa)&&(E=be(E.slice(1,E.length-1))),E==="true"||E!=="false"&&E)})(d,w,I,r);typeof O=="string"&&(Kt.test(O)||Yt.test(O))&&(g[_]=p(O.trim()))}else x!=="style"&&(g[qn[x]||x]=!0);return g},{}):null}const f=[],v={},y={0:{t:[">"],o:Pe(Yn),i:1,u(d,h,u){const[,g,x]=d[0].replace(Ta,"").match(Ia);return{alert:g,children:h(x,u)}},l(d,h,u){const g={key:u.key};return d.alert&&(g.className="markdown-alert-"+n(d.alert.toLowerCase(),tt),d.children.unshift({attrs:{},children:[{type:"27",text:d.alert}],noInnerParse:!0,type:"11",tag:"header"})),a("blockquote",g,h(d.children,u))}},1:{t:["  "],o:ht(Aa),i:1,u:Gt,l:(d,h,u)=>a("br",{key:u.key})},2:{t:["--","__","**","- ","* ","_ "],o:Pe(Ma),i:1,u:Gt,l:(d,h,u)=>a("hr",{key:u.key})},3:{t:["    "],o:Pe(Gn),i:0,u:d=>({lang:void 0,text:be(it(d[0].replace(/^ {4}/gm,"")))}),l:(d,h,u)=>a("pre",{key:u.key},a("code",ze({},d.attrs,{className:d.lang?"lang-"+d.lang:""}),d.text))},4:{t:["```","~~~"],o:Pe(Xn),i:0,u:d=>({attrs:m("code",d[3]||""),lang:d[2]||void 0,text:d[4],type:"3"})},5:{t:["`"],o:Ie(Fa),i:3,u:d=>({text:be(d[2])}),l:(d,h,u)=>a("code",{key:u.key},d.text)},6:{t:["[^"],o:Pe($a),i:0,u:d=>(f.push({footnote:d[2],identifier:d[1]}),{}),l:Jt},7:{t:["[^"],o:$e(Ua),i:1,u:d=>({target:"#"+n(d[1],tt),text:d[1]}),l:(d,h,u)=>a("a",{key:u.key,href:r(d.target,"a","href")},a("sup",{key:u.key},d.text))},8:{t:["[ ]","[x]"],o:$e(Va),i:1,u:d=>({completed:d[1].toLowerCase()==="x"}),l:(d,h,u)=>a("input",{checked:d.completed,key:u.key,readOnly:!0,type:"checkbox"})},9:{t:["#"],o:Pe(e.enforceAtxHeadings?Zn:Jn),i:1,u:(d,h,u)=>({children:vt(h,d[2],u),id:n(d[2],tt),level:d[1].length}),l:(d,h,u)=>a("h"+d.level,{id:d.id,key:u.key},h(d.children,u))},10:{t:d=>{const h=d.indexOf(`
`);return h>0&&h<d.length-1&&(d[h+1]==="="||d[h+1]==="-")},o:Pe(Qn),i:1,u:(d,h,u)=>({children:vt(h,d[1],u),level:d[2]==="="?1:2,type:"9"})},11:{t:["<"],o:ht(Kt),i:1,u(d,h,u){const[,g]=d[3].match(go),x=RegExp("^"+g,"gm"),S=d[3].replace(x,""),w=o(c,S)?Oo:vt,I=d[1].toLowerCase(),_=Da.indexOf(I)!==-1,O=(_?I:d[1]).trim(),N={attrs:m(O,d[2]),noInnerParse:_,tag:O};if(u.inAnchor=u.inAnchor||I==="a",_)N.text=d[3];else{const M=u.inHTML;u.inHTML=!0,N.children=w(h,S,u),u.inHTML=M}return u.inAnchor=!1,N},l:(d,h,u)=>a(d.tag,ze({key:u.key},d.attrs),d.text||(d.children?h(d.children,u):""))},13:{t:["<"],o:ht(Yt),i:1,u(d){const h=d[1].trim();return{attrs:m(h,d[2]||""),tag:h}},l:(d,h,u)=>a(d.tag,ze({},d.attrs,{key:u.key}))},12:{t:["<!--"],o:ht(er),i:1,u:()=>({}),l:Jt},14:{t:["!["],o:Ie(jo),i:1,u:d=>({alt:be(d[1]),target:be(d[2]),title:be(d[3])}),l:(d,h,u)=>a("img",{key:u.key,alt:d.alt||void 0,title:d.title||void 0,src:r(d.target,"img","src")})},15:{t:["["],o:$e(So),i:3,u:(d,h,u)=>({children:Eo(h,d[1],u),target:be(d[2]),title:be(d[3])}),l:(d,h,u)=>a("a",{key:u.key,href:r(d.target,"a","href"),title:d.title},h(d.children,u))},16:{t:["<"],o:$e(Ya),i:0,u(d){let h=d[1],u=!1;return h.indexOf("@")!==-1&&h.indexOf("//")===-1&&(u=!0,h=h.replace("mailto:","")),{children:[{text:h,type:"27"}],target:u?"mailto:"+h:h,type:"15"}}},17:{t:(d,h)=>!h.inAnchor&&!e.disableAutoLink&&(xt(d,"http://")||xt(d,"https://")),o:$e(Ka),i:0,u:d=>({children:[{text:d[1],type:"27"}],target:d[1],title:void 0,type:"15"})},20:nr(a,1),33:nr(a,2),19:{t:[`
`],o:Pe(Ra),i:3,u:Gt,l:()=>`
`},21:{o:Xe(function(d,h){if(h.inline||h.simple||h.inHTML&&d.indexOf(`

`)===-1&&h.prevCapture.indexOf(`

`)===-1)return null;let u="",g=0;for(;;){const S=d.indexOf(`
`,g),w=d.slice(g,S===-1?void 0:S+1);if(o(l,w)||(u+=w,S===-1||!w.trim()))break;g=S+1}const x=it(u);return x===""?null:[u,,x]}),i:3,u:Xt,l:(d,h,u)=>a("p",{key:u.key},h(d.children,u))},22:{t:["["],o:$e(Ja),i:0,u:d=>(v[d[1]]={target:d[2],title:d[4]},{}),l:Jt},23:{t:["!["],o:Ie(Za),i:0,u:d=>({alt:d[1]?be(d[1]):void 0,ref:d[2]}),l:(d,h,u)=>v[d.ref]?a("img",{key:u.key,alt:d.alt,src:r(v[d.ref].target,"img","src"),title:v[d.ref].title}):null},24:{t:d=>d[0]==="["&&d.indexOf("](")===-1,o:$e(Qa),i:0,u:(d,h,u)=>({children:h(d[1],u),fallbackChildren:d[0],ref:d[2]}),l:(d,h,u)=>v[d.ref]?a("a",{key:u.key,href:r(v[d.ref].target,"a","href"),title:v[d.ref].title},h(d.children,u)):a("span",{key:u.key},d.fallbackChildren)},25:{t:["|"],o:Pe(tr),i:1,u:_o,l(d,h,u){const g=d;return a("table",{key:u.key},a("thead",null,a("tr",null,g.header.map(function(x,S){return a("th",{key:S,style:ir(g,S)},h(x,u))}))),a("tbody",null,g.cells.map(function(x,S){return a("tr",{key:S},x.map(function(w,I){return a("td",{key:I,style:ir(g,I)},h(w,u))}))})))}},27:{o:Xe(function(d,h){let u;return xt(d,":")&&(u=uo.exec(d)),u||po.exec(d)}),i:4,u(d){const h=d[0];return{text:h.indexOf("&")===-1?h:h.replace(Wa,(u,g)=>e.namedCodesToUnicode[g]||u)}},l:d=>d.text},28:{t:["**","__"],o:Ie(ao),i:2,u:(d,h,u)=>({children:h(d[2],u)}),l:(d,h,u)=>a("strong",{key:u.key},h(d.children,u))},29:{t:d=>{const h=d[0];return(h==="*"||h==="_")&&d[1]!==h},o:Ie(oo),i:3,u:(d,h,u)=>({children:h(d[2],u)}),l:(d,h,u)=>a("em",{key:u.key},h(d.children,u))},30:{t:["\\"],o:Ie(ho),i:1,u:d=>({text:d[1],type:"27"})},31:{t:["=="],o:Ie(lo),i:3,u:Xt,l:(d,h,u)=>a("mark",{key:u.key},h(d.children,u))},32:{t:["~~"],o:Ie(co),i:3,u:Xt,l:(d,h,u)=>a("del",{key:u.key},h(d.children,u))}};e.disableParsingRawHTML===!0&&(delete y[11],delete y[13]);const k=(function(d){var h=Object.keys(d);function u(g,x){var S=[];if(x.prevCapture=x.prevCapture||"",g.trim())for(;g;)for(var w=0;w<h.length;){var I=h[w],_=d[I];if(!_.t||Co(g,x,_.t)){var O=_.o(g,x);if(O&&O[0]){g=g.substring(O[0].length);var N=_.u(O,u,x);x.prevCapture+=O[0],N.type||(N.type=I),S.push(N);break}w++}else w++}return x.prevCapture="",S}return h.sort(function(g,x){return d[g].i-d[x].i||(g<x?-1:1)}),function(g,x){return u((function(S){return S.replace(La,`
`).replace(za,"").replace(to,"    ")})(g),x)}})(y),b=(function(d,h){return function u(g,x={}){if(Array.isArray(g)){const S=x.key,w=[];let I=!1;for(let _=0;_<g.length;_++){x.key=_;const O=u(g[_],x),N=rr(O);N&&I?w[w.length-1]+=O:O!==null&&w.push(O),I=N}return x.key=S,w}return(function(S,w,I){const _=d[S.type].l;return h?h(()=>_(S,w,I),S,w,I):_(S,w,I)})(g,u,x)}})(y,e.renderRule),j=p(t);return f.length?a("div",null,j,a("footer",{key:"footer"},f.map(function(d){return a("div",{id:n(d.identifier,tt),key:d.identifier},d.identifier,b(k(d.footnote,{inline:!0})))}))):j}const kt=t=>{let{children:e="",options:n}=t,r=(function(i,l){if(i==null)return{};var c,o,a={},p=Object.keys(i);for(o=0;o<p.length;o++)l.indexOf(c=p[o])>=0||(a[c]=i[c]);return a})(t,ka);return T.cloneElement(To(e,n),r)};function Io(t,e){return t==null?!0:js(t,e)}class Ao extends T.Component{state={wasPropertyKeyModified:!1,additionalProperties:{}};isRequired(e){const{schema:n}=this.props;return Array.isArray(n.required)&&n.required.indexOf(e)!==-1}onPropertyChange=(e,n=!1)=>(r,i,l)=>{const{formData:c,onChange:o,errorSchema:a}=this.props;r===void 0&&n&&(r="");const p={...c,[e]:r};o(p,a&&a&&{...a,[e]:i},l)};onDropPropertyClick=e=>n=>{n.preventDefault();const{onChange:r,formData:i}=this.props,l={...i};Io(l,e),r(l)};getAvailableKey=(e,n)=>{const{uiSchema:r,registry:i}=this.props,{duplicateKeySuffixSeparator:l="-"}=ne(r,i.globalUiOptions);let c=0,o=e;for(;Se(n,o);)o=`${e}${l}${++c}`;return o};onKeyChange=e=>(n,r)=>{if(e===n)return;const{formData:i,onChange:l,errorSchema:c}=this.props;n=this.getAvailableKey(n,i);const o={...i},a={[e]:n},p=Object.keys(o).map(f=>({[a[f]||f]:o[f]})),m=Object.assign({},...p);this.setState({wasPropertyKeyModified:!0}),l(m,c&&c&&{...c,[n]:r})};getDefaultValue(e){const{registry:{translateString:n}}=this.props;switch(e){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};case"string":default:return n(ae.NewStringDefault)}}handleAddClick=e=>()=>{if(!e.additionalProperties)return;const{formData:n,onChange:r,registry:i}=this.props,l={...n};let c,o,a;if(Fe(e.additionalProperties)){c=e.additionalProperties.type,o=e.additionalProperties.const,a=e.additionalProperties.default;let f=e.additionalProperties;if(ke in f){const{schemaUtils:v}=i;f=v.retrieveSchema({$ref:f[ke]},n),c=f.type,o=f.const,a=f.default}!c&&(Ye in f||Be in f)&&(c="object")}const p=this.getAvailableKey("newKey",l),m=o??a??this.getDefaultValue(c);me(l,p,m),r(l)};render(){const{schema:e,uiSchema:n={},formData:r,errorSchema:i,idSchema:l,name:c,required:o=!1,disabled:a,readonly:p,hideError:m,idPrefix:f,idSeparator:v,onBlur:y,onFocus:k,registry:b,title:j}=this.props,{fields:d,formContext:h,schemaUtils:u,translateString:g,globalUiOptions:x}=b,{SchemaField:S}=d,w=u.retrieveSchema(e,r),I=ne(n,x),{properties:_={}}=w,O=I.title??w.title??j??c,N=I.description??w.description;let M;try{const P=Object.keys(_);M=da(P,I.order)}catch(P){return s.jsxs("div",{children:[s.jsx("p",{className:"config-error",style:{color:"red"},children:s.jsx(kt,{options:{disableParsingRawHTML:!0},children:g(ae.InvalidObjectField,[c||"root",P.message])})}),s.jsx("pre",{children:JSON.stringify(w)})]})}const E=te("ObjectFieldTemplate",b,I),C={title:I.label===!1?"":O,description:I.label===!1?void 0:N,properties:M.map(P=>{const U=Se(w,[ge,P,ln]),q=U?n.additionalProperties:n[P],Y=ne(q).widget==="hidden",D=Q(l,[P],{});return{content:s.jsx(S,{name:P,required:this.isRequired(P),schema:Q(w,[ge,P],{}),uiSchema:q,errorSchema:Q(i,P),idSchema:D,idPrefix:f,idSeparator:v,formData:Q(r,P),formContext:h,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(P),onChange:this.onPropertyChange(P,U),onBlur:y,onFocus:k,registry:b,disabled:a,readonly:p,hideError:m,onDropPropertyClick:this.onDropPropertyClick},P),name:P,readonly:p,disabled:a,required:o,hidden:Y}}),readonly:p,disabled:a,required:o,idSchema:l,uiSchema:n,errorSchema:i,schema:w,formData:r,formContext:h,registry:b};return s.jsx(E,{...C,onAddClick:this.handleAddClick})}}const Mo={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function Fo(t,e,n,r){const i=e.field,{fields:l,translateString:c}=r;if(typeof i=="function")return i;if(typeof i=="string"&&i in l)return l[i];const o=at(t),a=Array.isArray(o)?o[0]:o||"",p=t.$id;let m=Mo[a];return p&&p in l&&(m=p),!m&&(t.anyOf||t.oneOf)?()=>null:m in l?l[m]:()=>{const f=te("UnsupportedFieldTemplate",r,e);return s.jsx(f,{schema:t,idSchema:n,reason:c(ae.UnknownFieldType,[String(t.type)]),registry:r})}}function Ro(t){const{schema:e,idSchema:n,uiSchema:r,formData:i,errorSchema:l,idPrefix:c,idSeparator:o,name:a,onChange:p,onKeyChange:m,onDropPropertyClick:f,required:v,registry:y,wasPropertyKeyModified:k=!1}=t,{formContext:b,schemaUtils:j,globalUiOptions:d}=y,h=ne(r,d),u=te("FieldTemplate",y,h),g=te("DescriptionFieldTemplate",y,h),x=te("FieldHelpTemplate",y,h),S=te("FieldErrorTemplate",y,h),w=j.retrieveSchema(e,i),I=n[tn],_=Ke(j.toIdSchema(w,I,i,c,o),n),O=T.useCallback((K,se,oe)=>p(K,se,oe||I),[I,p]),N=Fo(w,h,_,y),M=!!(h.disabled??t.disabled),E=!!(h.readonly??(t.readonly||t.schema.readOnly||w.readOnly)),C=h.hideError,P=C===void 0?t.hideError:!!C,U=!!(h.autofocus??t.autofocus);if(Object.keys(w).length===0)return null;const q=j.getDisplayLabel(w,r,d),{__errors:Y,...D}=l||{},L=nn(r,["ui:classNames","classNames","ui:style"]);pt in L&&(L[pt]=nn(L[pt],["classNames","style"]));const z=s.jsx(N,{...t,onChange:O,idSchema:_,schema:w,uiSchema:L,disabled:M,readonly:E,hideError:P,autofocus:U,errorSchema:D,formContext:b,rawErrors:Y}),G=_[tn];let J;k?J=a:J=ln in w?a:h.title||t.schema.title||w.title||t.title||a;const re=h.description||t.schema.description||w.description||"",de=h.enableMarkdownInDescription?s.jsx(kt,{options:{disableParsingRawHTML:!0},children:re}):re,ue=h.help,pe=h.widget==="hidden",F=["form-group","field",`field-${at(w)}`];!P&&Y&&Y.length>0&&F.push("field-error has-error has-danger"),r?.classNames&&F.push(r.classNames),h.classNames&&F.push(h.classNames);const V=s.jsx(x,{help:ue,idSchema:_,schema:w,uiSchema:r,hasErrors:!P&&Y&&Y.length>0,registry:y}),W=P||(w.anyOf||w.oneOf)&&!j.isSelect(w)?void 0:s.jsx(S,{errors:Y,errorSchema:l,idSchema:_,schema:w,uiSchema:r,registry:y}),X={description:s.jsx(g,{id:St(G),description:de,schema:w,uiSchema:r,registry:y}),rawDescription:re,help:V,rawHelp:typeof ue=="string"?ue:void 0,errors:W,rawErrors:P?void 0:Y,id:G,label:J,hidden:pe,onChange:p,onKeyChange:m,onDropPropertyClick:f,required:v,disabled:M,readonly:E,hideError:P,displayLabel:q,classNames:F.join(" ").trim(),style:h.style,formContext:b,formData:i,schema:w,uiSchema:r,registry:y},H=y.fields.AnyOfField,Z=y.fields.OneOfField,A=r?.["ui:field"]&&r?.["ui:fieldReplacesAnyOrOneOf"]===!0;return s.jsx(u,{...X,children:s.jsxs(s.Fragment,{children:[z,w.anyOf&&!A&&!j.isSelect(w)&&s.jsx(H,{name:a,disabled:M,readonly:E,hideError:P,errorSchema:l,formData:i,formContext:b,idPrefix:c,idSchema:_,idSeparator:o,onBlur:t.onBlur,onChange:t.onChange,onFocus:t.onFocus,options:w.anyOf.map(K=>j.retrieveSchema(Fe(K)?K:{},i)),registry:y,required:v,schema:w,uiSchema:r}),w.oneOf&&!A&&!j.isSelect(w)&&s.jsx(Z,{name:a,disabled:M,readonly:E,hideError:P,errorSchema:l,formData:i,formContext:b,idPrefix:c,idSchema:_,idSeparator:o,onBlur:t.onBlur,onChange:t.onChange,onFocus:t.onFocus,options:w.oneOf.map(K=>j.retrieveSchema(Fe(K)?K:{},i)),registry:y,required:v,schema:w,uiSchema:r})]})})}class Lo extends T.Component{shouldComponentUpdate(e){return!ce(this.props,e)}render(){return s.jsx(Ro,{...this.props})}}function $o(t){const{schema:e,name:n,uiSchema:r,idSchema:i,formData:l,required:c,disabled:o=!1,readonly:a=!1,autofocus:p=!1,onChange:m,onBlur:f,onFocus:v,registry:y,rawErrors:k,hideError:b}=t,{title:j,format:d}=e,{widgets:h,formContext:u,schemaUtils:g,globalUiOptions:x}=y,S=g.isSelect(e)?wt(e,r):void 0;let w=S?"select":"text";d&&oa(e,d,h)&&(w=d);const{widget:I=w,placeholder:_="",title:O,...N}=ne(r),M=g.getDisplayLabel(e,r,x),E=O??j??n,C=De(e,I,h);return s.jsx(C,{options:{...N,enumOptions:S},schema:e,uiSchema:r,id:i.$id,name:n,label:E,hideLabel:!M,hideError:b,value:l,onChange:m,onBlur:f,onFocus:v,required:c,disabled:o,readonly:a,formContext:u,autofocus:p,registry:y,placeholder:_,rawErrors:k})}function Uo(t){const{formData:e,onChange:n}=t;return T.useEffect(()=>{e===void 0&&n(null)},[e,n]),null}function zo(){return{AnyOfField:Hn,ArrayField:Sa,BooleanField:ja,NumberField:_a,ObjectField:Ao,OneOfField:Hn,SchemaField:Lo,StringField:$o,NullField:Uo}}function Bo(t){const{idSchema:e,description:n,registry:r,schema:i,uiSchema:l}=t,c=ne(l,r.globalUiOptions),{label:o=!0}=c;if(!n||!o)return null;const a=te("DescriptionFieldTemplate",r,c);return s.jsx(a,{id:St(e),description:n,schema:i,uiSchema:l,registry:r})}function Vo(t){const{children:e,className:n,disabled:r,hasToolbar:i,hasMoveDown:l,hasMoveUp:c,hasRemove:o,hasCopy:a,index:p,onCopyIndexClick:m,onDropIndexClick:f,onReorderClick:v,readonly:y,registry:k,uiSchema:b}=t,{CopyButton:j,MoveDownButton:d,MoveUpButton:h,RemoveButton:u}=k.templates.ButtonTemplates,g={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return s.jsxs("div",{className:n,children:[s.jsx("div",{className:i?"col-xs-9":"col-xs-12",children:e}),i&&s.jsx("div",{className:"col-xs-3 array-item-toolbox",children:s.jsxs("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(c||l)&&s.jsx(h,{style:g,disabled:r||y||!c,onClick:v(p,p-1),uiSchema:b,registry:k}),(c||l)&&s.jsx(d,{style:g,disabled:r||y||!l,onClick:v(p,p+1),uiSchema:b,registry:k}),a&&s.jsx(j,{style:g,disabled:r||y,onClick:m(p),uiSchema:b,registry:k}),o&&s.jsx(u,{style:g,disabled:r||y,onClick:f(p),uiSchema:b,registry:k})]})})]})}function Wo(t){const{canAdd:e,className:n,disabled:r,idSchema:i,uiSchema:l,items:c,onAddClick:o,readonly:a,registry:p,required:m,schema:f,title:v}=t,y=ne(l),k=te("ArrayFieldDescriptionTemplate",p,y),b=te("ArrayFieldItemTemplate",p,y),j=te("ArrayFieldTitleTemplate",p,y),{ButtonTemplates:{AddButton:d}}=p.templates;return s.jsxs("fieldset",{className:n,id:i.$id,children:[s.jsx(j,{idSchema:i,title:y.title||v,required:m,schema:f,uiSchema:l,registry:p}),s.jsx(k,{idSchema:i,description:y.description||f.description,schema:f,uiSchema:l,registry:p}),s.jsx("div",{className:"row array-item-list",children:c&&c.map(({key:h,...u})=>s.jsx(b,{...u},h))}),e&&s.jsx(d,{className:"array-item-add",onClick:o,disabled:r||a,uiSchema:l,registry:p})]})}function Ho(t){const{idSchema:e,title:n,schema:r,uiSchema:i,required:l,registry:c}=t,o=ne(i,c.globalUiOptions),{label:a=!0}=o;if(!n||!a)return null;const p=te("TitleFieldTemplate",c,o);return s.jsx(p,{id:xr(e),title:n,required:l,schema:r,uiSchema:i,registry:c})}function qo(t){const{id:e,name:n,value:r,readonly:i,disabled:l,autofocus:c,onBlur:o,onFocus:a,onChange:p,onChangeOverride:m,options:f,schema:v,uiSchema:y,formContext:k,registry:b,rawErrors:j,type:d,hideLabel:h,hideError:u,...g}=t;if(!e)throw console.log("No id for",t),new Error(`no id for props ${JSON.stringify(t)}`);const x={...g,...sa(v,d,f)};let S;x.type==="number"||x.type==="integer"?S=r||r===0?r:"":S=r??"";const w=T.useCallback(({target:{value:O}})=>p(O===""?f.emptyValue:O),[p,f]),I=T.useCallback(({target:O})=>o(e,O&&O.value),[o,e]),_=T.useCallback(({target:O})=>a(e,O&&O.value),[a,e]);return s.jsxs(s.Fragment,{children:[s.jsx("input",{id:e,name:e,className:"form-control",readOnly:i,disabled:l,autoFocus:c,value:S,...x,list:v.examples?vn(e):void 0,onChange:m||w,onBlur:I,onFocus:_,"aria-describedby":Ge(e,!!v.examples)}),Array.isArray(v.examples)&&s.jsx("datalist",{id:vn(e),children:v.examples.concat(v.default&&!v.examples.includes(v.default)?[v.default]:[]).map(O=>s.jsx("option",{value:O},O))},`datalist_${e}`)]})}function Ko({uiSchema:t}){const{submitText:e,norender:n,props:r={}}=ia(t);return n?null:s.jsx("div",{children:s.jsx("button",{type:"submit",...r,className:`btn btn-info ${r.className||""}`,children:e})})}function ot(t){const{iconType:e="default",icon:n,className:r,uiSchema:i,registry:l,...c}=t;return s.jsx("button",{type:"button",className:`btn btn-${e} ${r}`,...c,children:s.jsx("i",{className:`glyphicon glyphicon-${n}`})})}function Yo(t){const{registry:{translateString:e}}=t;return s.jsx(ot,{title:e(ae.CopyButton),className:"array-item-copy",...t,icon:"copy"})}function Xo(t){const{registry:{translateString:e}}=t;return s.jsx(ot,{title:e(ae.MoveDownButton),className:"array-item-move-down",...t,icon:"arrow-down"})}function Go(t){const{registry:{translateString:e}}=t;return s.jsx(ot,{title:e(ae.MoveUpButton),className:"array-item-move-up",...t,icon:"arrow-up"})}function Jo(t){const{registry:{translateString:e}}=t;return s.jsx(ot,{title:e(ae.RemoveButton),className:"array-item-remove",...t,iconType:"danger",icon:"remove"})}function Zo({className:t,onClick:e,disabled:n,registry:r}){const{translateString:i}=r;return s.jsx("div",{className:"row",children:s.jsx("p",{className:`col-xs-3 col-xs-offset-9 text-right ${t}`,children:s.jsx(ot,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:i(ae.AddButton),onClick:e,disabled:n,registry:r})})})}function Qo(){return{SubmitButton:Ko,AddButton:Zo,CopyButton:Yo,MoveDownButton:Xo,MoveUpButton:Go,RemoveButton:Jo}}function el(t){const{id:e,description:n}=t;return n?typeof n=="string"?s.jsx("p",{id:e,className:"field-description",children:n}):s.jsx("div",{id:e,className:"field-description",children:n}):null}function tl({errors:t,registry:e}){const{translateString:n}=e;return s.jsxs("div",{className:"panel panel-danger errors",children:[s.jsx("div",{className:"panel-heading",children:s.jsx("h3",{className:"panel-title",children:n(ae.ErrorsLabel)})}),s.jsx("ul",{className:"list-group",children:t.map((r,i)=>s.jsx("li",{className:"list-group-item text-danger",children:r.stack},i))})]})}const nl="*";function Lr(t){const{label:e,required:n,id:r}=t;return e?s.jsxs("label",{className:"control-label",htmlFor:r,children:[e,n&&s.jsx("span",{className:"required",children:nl})]}):null}function rl(t){const{id:e,label:n,children:r,errors:i,help:l,description:c,hidden:o,required:a,displayLabel:p,registry:m,uiSchema:f}=t,v=ne(f),y=te("WrapIfAdditionalTemplate",m,v);return o?s.jsx("div",{className:"hidden",children:r}):s.jsxs(y,{...t,children:[p&&s.jsx(Lr,{label:n,required:a,id:e}),p&&c?c:null,r,i,l]})}function sl(t){const{errors:e=[],idSchema:n}=t;if(e.length===0)return null;const r=Cs(n);return s.jsx("div",{children:s.jsx("ul",{id:r,className:"error-detail bs-callout bs-callout-info",children:e.filter(i=>!!i).map((i,l)=>s.jsx("li",{className:"text-danger",children:i},l))})})}function il(t){const{idSchema:e,help:n}=t;if(!n)return null;const r=Ps(e);return typeof n=="string"?s.jsx("p",{id:r,className:"help-block",children:n}):s.jsx("div",{id:r,className:"help-block",children:n})}function al(t){const{description:e,disabled:n,formData:r,idSchema:i,onAddClick:l,properties:c,readonly:o,registry:a,required:p,schema:m,title:f,uiSchema:v}=t,y=ne(v),k=te("TitleFieldTemplate",a,y),b=te("DescriptionFieldTemplate",a,y),{ButtonTemplates:{AddButton:j}}=a.templates;return s.jsxs("fieldset",{id:i.$id,children:[f&&s.jsx(k,{id:xr(i),title:f,required:p,schema:m,uiSchema:v,registry:a}),e&&s.jsx(b,{id:St(i),description:e,schema:m,uiSchema:v,registry:a}),c.map(d=>d.content),Vi(m,v,r)&&s.jsx(j,{className:"object-property-expand",onClick:l(m),disabled:n||o,uiSchema:v,registry:a})]})}const ol="*";function ll(t){const{id:e,title:n,required:r}=t;return s.jsxs("legend",{id:e,children:[n,r&&s.jsx("span",{className:"required",children:ol})]})}function cl(t){const{schema:e,idSchema:n,reason:r,registry:i}=t,{translateString:l}=i;let c=ae.UnsupportedField;const o=[];return n&&n.$id&&(c=ae.UnsupportedFieldWithId,o.push(n.$id)),r&&(c=c===ae.UnsupportedField?ae.UnsupportedFieldWithReason:ae.UnsupportedFieldWithIdAndReason,o.push(r)),s.jsxs("div",{className:"unsupported-field",children:[s.jsx("p",{children:s.jsx(kt,{options:{disableParsingRawHTML:!0},children:l(c,o)})}),e&&s.jsx("pre",{children:JSON.stringify(e,null,2)})]})}function dl(t){const{id:e,classNames:n,style:r,disabled:i,label:l,onKeyChange:c,onDropPropertyClick:o,readonly:a,required:p,schema:m,children:f,uiSchema:v,registry:y}=t,{templates:k,translateString:b}=y,{RemoveButton:j}=k.ButtonTemplates,d=b(ae.KeyLabel,[l]);return ln in m?s.jsx("div",{className:n,style:r,children:s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-xs-5 form-additional",children:s.jsxs("div",{className:"form-group",children:[s.jsx(Lr,{label:d,required:p,id:`${e}-key`}),s.jsx("input",{className:"form-control",type:"text",id:`${e}-key`,onBlur:({target:u})=>c(u&&u.value),defaultValue:l})]})}),s.jsx("div",{className:"form-additional form-group col-xs-5",children:f}),s.jsx("div",{className:"col-xs-2",children:s.jsx(j,{className:"array-item-remove btn-block",style:{border:"0"},disabled:i||a,onClick:o(l),uiSchema:v,registry:y})})]})}):s.jsx("div",{className:n,style:r,children:f})}function ul(){return{ArrayFieldDescriptionTemplate:Bo,ArrayFieldItemTemplate:Vo,ArrayFieldTemplate:Wo,ArrayFieldTitleTemplate:Ho,ButtonTemplates:Qo(),BaseInputTemplate:qo,DescriptionFieldTemplate:el,ErrorListTemplate:tl,FieldTemplate:rl,FieldErrorTemplate:sl,FieldHelpTemplate:il,ObjectFieldTemplate:al,TitleFieldTemplate:ll,UnsupportedFieldTemplate:cl,WrapIfAdditionalTemplate:dl}}function hl(t){return Object.values(t).every(e=>e!==-1)}function fl({type:t,range:e,value:n,select:r,rootId:i,name:l,disabled:c,readonly:o,autofocus:a,registry:p,onBlur:m,onFocus:f}){const v=i+"_"+t,{SelectWidget:y}=p.widgets;return s.jsx(y,{schema:{type:"integer"},id:v,name:l,className:"form-control",options:{enumOptions:Dr(e[0],e[1])},placeholder:t,value:n,disabled:c,readonly:o,autofocus:a,onChange:k=>r(t,k),onBlur:m,onFocus:f,registry:p,label:"","aria-describedby":Ge(i)})}function pl({time:t=!1,disabled:e=!1,readonly:n=!1,autofocus:r=!1,options:i,id:l,name:c,registry:o,onBlur:a,onFocus:p,onChange:m,value:f}){const{translateString:v}=o,[y,k]=T.useState(f),[b,j]=T.useReducer((g,x)=>({...g,...x}),qt(f,t));T.useEffect(()=>{const g=Bn(b,t);hl(b)&&g!==f?m(g):y!==f&&(k(f),j(qt(f,t)))},[t,f,m,b,y]);const d=T.useCallback((g,x)=>{j({[g]:x})},[]),h=T.useCallback(g=>{if(g.preventDefault(),e||n)return;const x=qt(new Date().toJSON(),t);m(Bn(x,t))},[e,n,t]),u=T.useCallback(g=>{g.preventDefault(),!(e||n)&&m(void 0)},[e,n,m]);return s.jsxs("ul",{className:"list-inline",children:[na(b,t,i.yearsRange,i.format).map((g,x)=>s.jsx("li",{className:"list-inline-item",children:s.jsx(fl,{rootId:l,name:c,select:d,...g,disabled:e,readonly:n,registry:o,onBlur:a,onFocus:p,autofocus:r&&x===0})},x)),(i.hideNowButton!=="undefined"?!i.hideNowButton:!0)&&s.jsx("li",{className:"list-inline-item",children:s.jsx("a",{href:"#",className:"btn btn-info btn-now",onClick:h,children:v(ae.NowLabel)})}),(i.hideClearButton!=="undefined"?!i.hideClearButton:!0)&&s.jsx("li",{className:"list-inline-item",children:s.jsx("a",{href:"#",className:"btn btn-warning btn-clear",onClick:u,children:v(ae.ClearLabel)})})]})}function ml({time:t=!0,...e}){const{AltDateWidget:n}=e.registry.widgets;return s.jsx(n,{time:t,...e})}function gl({schema:t,uiSchema:e,options:n,id:r,value:i,disabled:l,readonly:c,label:o,hideLabel:a,autofocus:p=!1,onBlur:m,onFocus:f,onChange:v,registry:y}){const k=te("DescriptionFieldTemplate",y,n),b=yt(t),j=T.useCallback(g=>v(g.target.checked),[v]),d=T.useCallback(g=>m(r,g.target.checked),[m,r]),h=T.useCallback(g=>f(r,g.target.checked),[f,r]),u=n.description??t.description;return s.jsxs("div",{className:`checkbox ${l||c?"disabled":""}`,children:[!a&&!!u&&s.jsx(k,{id:St(r),description:u,schema:t,uiSchema:e,registry:y}),s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",id:r,name:r,checked:typeof i>"u"?!1:i,required:b,disabled:l||c,autoFocus:p,onChange:j,onBlur:d,onFocus:h,"aria-describedby":Ge(r)}),la(s.jsx("span",{children:o}),a)]})]})}function yl({id:t,disabled:e,options:{inline:n=!1,enumOptions:r,enumDisabled:i,emptyValue:l},value:c,autofocus:o=!1,readonly:a,onChange:p,onBlur:m,onFocus:f}){const v=Array.isArray(c)?c:[c],y=T.useCallback(({target:b})=>m(t,je(b&&b.value,r,l)),[m,t]),k=T.useCallback(({target:b})=>f(t,je(b&&b.value,r,l)),[f,t]);return s.jsx("div",{className:"checkboxes",id:t,children:Array.isArray(r)&&r.map((b,j)=>{const d=cn(b.value,v),h=Array.isArray(i)&&i.indexOf(b.value)!==-1,u=e||h||a?"disabled":"",g=S=>{S.target.checked?p(ta(j,v,r)):p(Qi(j,v,r))},x=s.jsxs("span",{children:[s.jsx("input",{type:"checkbox",id:vr(t,j),name:t,checked:d,value:String(j),disabled:e||h||a,autoFocus:o&&j===0,onChange:g,onBlur:y,onFocus:k,"aria-describedby":Ge(t)}),s.jsx("span",{children:b.label})]});return n?s.jsx("label",{className:`checkbox-inline ${u}`,children:x},j):s.jsx("div",{className:`checkbox ${u}`,children:s.jsx("label",{children:x})},j)})})}function xl(t){const{disabled:e,readonly:n,options:r,registry:i}=t,l=te("BaseInputTemplate",i,r);return s.jsx(l,{type:"color",...t,disabled:e||n})}function vl(t){const{onChange:e,options:n,registry:r}=t,i=te("BaseInputTemplate",r,n),l=T.useCallback(c=>e(c||void 0),[e]);return s.jsx(i,{type:"date",...t,onChange:l})}function bl(t){const{onChange:e,value:n,options:r,registry:i}=t,l=te("BaseInputTemplate",i,r);return s.jsx(l,{type:"datetime-local",...t,value:ha(n),onChange:c=>e(ca(c))})}function wl(t){const{options:e,registry:n}=t,r=te("BaseInputTemplate",n,e);return s.jsx(r,{type:"email",...t})}function Sl(t,e){return t===null?null:t.replace(";base64",`;name=${encodeURIComponent(e)};base64`)}function jl(t){const{name:e,size:n,type:r}=t;return new Promise((i,l)=>{const c=new window.FileReader;c.onerror=l,c.onload=o=>{typeof o.target?.result=="string"?i({dataURL:Sl(o.target.result,e),name:e,size:n,type:r}):i({dataURL:null,name:e,size:n,type:r})},c.readAsDataURL(t)})}function Cl(t){return Promise.all(Array.from(t).map(jl))}function Pl({fileInfo:t,registry:e}){const{translateString:n}=e,{dataURL:r,type:i,name:l}=t;return r?["image/jpeg","image/png"].includes(i)?s.jsx("img",{src:r,style:{maxWidth:"100%"},className:"file-preview"}):s.jsxs(s.Fragment,{children:[" ",s.jsx("a",{download:`preview-${l}`,href:r,className:"file-download",children:n(ae.PreviewLabel)})]}):null}function _l({filesInfo:t,registry:e,preview:n,onRemove:r,options:i}){if(t.length===0)return null;const{translateString:l}=e,{RemoveButton:c}=te("ButtonTemplates",e,i);return s.jsx("ul",{className:"file-info",children:t.map((o,a)=>{const{name:p,size:m,type:f}=o,v=()=>r(a);return s.jsxs("li",{children:[s.jsx(kt,{children:l(ae.FilesInfo,[p,f,String(m)])}),n&&s.jsx(Pl,{fileInfo:o,registry:e}),s.jsx(c,{onClick:v,registry:e})]},a)})})}function kl(t){return t.reduce((e,n)=>{if(!n)return e;try{const{blob:r,name:i}=Gi(n);return[...e,{dataURL:n,name:i,size:r.size,type:r.type}]}catch{return e}},[])}function Dl(t){const{disabled:e,readonly:n,required:r,multiple:i,onChange:l,value:c,options:o,registry:a}=t,p=te("BaseInputTemplate",a,o),m=T.useCallback(y=>{y.target.files&&Cl(y.target.files).then(k=>{const b=k.map(j=>j.dataURL);l(i?c.concat(b):b[0])})},[i,c,l]),f=T.useMemo(()=>kl(Array.isArray(c)?c:[c]),[c]),v=T.useCallback(y=>{if(i){const k=c.filter((b,j)=>j!==y);l(k)}else l(void 0)},[i,c,l]);return s.jsxs("div",{children:[s.jsx(p,{...t,disabled:e||n,type:"file",required:c?!1:r,onChangeOverride:m,value:"",accept:o.accept?String(o.accept):void 0}),s.jsx(_l,{filesInfo:f,onRemove:v,registry:a,preview:o.filePreview,options:o})]})}function El({id:t,value:e}){return s.jsx("input",{type:"hidden",id:t,name:t,value:typeof e>"u"?"":e})}function Ol(t){const{options:e,registry:n}=t,r=te("BaseInputTemplate",n,e);return s.jsx(r,{type:"password",...t})}function Nl({options:t,value:e,required:n,disabled:r,readonly:i,autofocus:l=!1,onBlur:c,onFocus:o,onChange:a,id:p}){const{enumOptions:m,enumDisabled:f,inline:v,emptyValue:y}=t,k=T.useCallback(({target:j})=>c(p,je(j&&j.value,m,y)),[c,p]),b=T.useCallback(({target:j})=>o(p,je(j&&j.value,m,y)),[o,p]);return s.jsx("div",{className:"field-radio-group",id:p,children:Array.isArray(m)&&m.map((j,d)=>{const h=cn(j.value,e),u=Array.isArray(f)&&f.indexOf(j.value)!==-1,g=r||u||i?"disabled":"",x=()=>a(j.value),S=s.jsxs("span",{children:[s.jsx("input",{type:"radio",id:vr(p,d),checked:h,name:p,required:n,value:String(d),disabled:r||u||i,autoFocus:l&&d===0,onChange:x,onBlur:k,onFocus:b,"aria-describedby":Ge(p)}),s.jsx("span",{children:j.label})]});return v?s.jsx("label",{className:`radio-inline ${g}`,children:S},d):s.jsx("div",{className:`radio ${g}`,children:s.jsx("label",{children:S})},d)})})}function Tl(t){const{value:e,registry:{templates:{BaseInputTemplate:n}}}=t;return s.jsxs("div",{className:"field-range-wrapper",children:[s.jsx(n,{type:"range",...t}),s.jsx("span",{className:"range-view",children:e})]})}function Qt(t,e){return e?Array.from(t.target.options).slice().filter(n=>n.selected).map(n=>n.value):t.target.value}function Il({schema:t,id:e,options:n,value:r,required:i,disabled:l,readonly:c,multiple:o=!1,autofocus:a=!1,onChange:p,onBlur:m,onFocus:f,placeholder:v}){const{enumOptions:y,enumDisabled:k,emptyValue:b}=n,j=o?[]:"",d=T.useCallback(S=>{const w=Qt(S,o);return f(e,je(w,y,b))},[f,e,t,o,y,b]),h=T.useCallback(S=>{const w=Qt(S,o);return m(e,je(w,y,b))},[m,e,t,o,y,b]),u=T.useCallback(S=>{const w=Qt(S,o);return p(je(w,y,b))},[p,t,o,y,b]),g=ea(r,y,o),x=!o&&t.default===void 0;return s.jsxs("select",{id:e,name:e,multiple:o,className:"form-control",value:typeof g>"u"?j:g,required:i,disabled:l||c,autoFocus:a,onBlur:h,onFocus:d,onChange:u,"aria-describedby":Ge(e),children:[x&&s.jsx("option",{value:"",children:v}),Array.isArray(y)&&y.map(({value:S,label:w},I)=>{const _=k&&k.indexOf(S)!==-1;return s.jsx("option",{value:String(I),disabled:_,children:w},I)})]})}function Al(t){const{options:e,registry:n}=t,r=te("BaseInputTemplate",n,e);return s.jsx(r,{...t})}function Ml(t){const{onChange:e,options:n,registry:r}=t,i=te("BaseInputTemplate",r,n),l=T.useCallback(c=>e(c?`${c}:00`:void 0),[e]);return s.jsx(i,{type:"time",...t,onChange:l})}function Fl(t){const{options:e,registry:n}=t,r=te("BaseInputTemplate",n,e);return s.jsx(r,{type:"url",...t})}function Rl(t){const{options:e,registry:n}=t,r=te("BaseInputTemplate",n,e);return s.jsx(r,{type:"number",...t})}function Ll(){return{AltDateWidget:pl,AltDateTimeWidget:ml,CheckboxWidget:gl,CheckboxesWidget:yl,ColorWidget:xl,DateWidget:vl,DateTimeWidget:bl,EmailWidget:wl,FileWidget:Dl,HiddenWidget:El,PasswordWidget:Ol,RadioWidget:Nl,RangeWidget:Tl,SelectWidget:Il,TextWidget:Al,TextareaWidget:_s,TimeWidget:Ml,UpDownWidget:Rl,URLWidget:Fl}}function $l(){return{fields:zo(),templates:ul(),widgets:Ll(),rootSchema:{},formContext:{},translateString:Zi}}class Ul extends T.Component{formElement;constructor(e){if(super(e),!e.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(e,e.formData),this.props.onChange&&!ce(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=T.createRef()}getSnapshotBeforeUpdate(e,n){if(!ce(this.props,e)){const r=ya(this.props.formData,e.formData),i=!ce(e.schema,this.props.schema),l=r.length>0||!ce(e.formData,this.props.formData),c=this.getStateFromProps(this.props,this.props.formData,i||l?void 0:this.state.retrievedSchema,i,r),o=!ce(c,n);return{nextState:c,shouldUpdate:o}}return{shouldUpdate:!1}}componentDidUpdate(e,n,r){if(r.shouldUpdate){const{nextState:i}=r;!ce(i.formData,this.props.formData)&&!ce(i.formData,n.formData)&&this.props.onChange&&this.props.onChange(i),this.setState(i)}}getStateFromProps(e,n,r,i=!1,l=[]){const c=this.state||{},o="schema"in e?e.schema:this.props.schema,a=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},p=typeof n<"u",m="liveValidate"in e?e.liveValidate:this.props.liveValidate,f=p&&!e.noValidate&&m,v=o,y="experimental_defaultFormStateBehavior"in e?e.experimental_defaultFormStateBehavior:this.props.experimental_defaultFormStateBehavior,k="experimental_customMergeAllOf"in e?e.experimental_customMergeAllOf:this.props.experimental_customMergeAllOf;let b=c.schemaUtils;(!b||b.doesSchemaUtilsDiffer(e.validator,v,y,k))&&(b=Xi(e.validator,v,y,k));const j=b.getDefaultFormState(o,n),d=this.updateRetrievedSchema(r??b.retrieveSchema(o,j)),h=()=>e.noValidate||i?{errors:[],errorSchema:{}}:e.liveValidate?{errors:c.errors||[],errorSchema:c.errorSchema||{}}:{errors:c.schemaValidationErrors||[],errorSchema:c.schemaValidationErrorSchema||{}};let u,g,x=c.schemaValidationErrors,S=c.schemaValidationErrorSchema;if(f){const _=this.validate(j,o,b,d);u=_.errors,r===void 0?g=_.errorSchema:g=Ke(this.state?.errorSchema,_.errorSchema,"preventDuplicates"),x=u,S=g}else{const _=h();if(u=_.errors,g=_.errorSchema,l.length>0){const O=l.reduce((N,M)=>(N[M]=void 0,N),{});g=S=Ke(_.errorSchema,O,"preventDuplicates")}}if(e.extraErrors){const _=At({errorSchema:g,errors:u},e.extraErrors);g=_.errorSchema,u=_.errors}const w=b.toIdSchema(d,a["ui:rootFieldId"],j,e.idPrefix,e.idSeparator);return{schemaUtils:b,schema:o,uiSchema:a,idSchema:w,formData:j,edit:p,errors:u,errorSchema:g,schemaValidationErrors:x,schemaValidationErrorSchema:S,retrievedSchema:d}}shouldComponentUpdate(e,n){return ua(this,e,n)}getPreviousCustomValidateErrors(){const{customValidate:e,uiSchema:n}=this.props,r=this.state.formData;let i={};if(typeof e=="function"){const l=e(r,ks(r),n);i=Ds(l)}return i}validate(e,n=this.props.schema,r,i){const l=r||this.state.schemaUtils,{customValidate:c,transformErrors:o,uiSchema:a}=this.props,p=i??l.retrieveSchema(n,e);return l.getValidator().validateFormData(e,p,c,o,a)}renderErrors(e){const{errors:n,errorSchema:r,schema:i,uiSchema:l}=this.state,{formContext:c}=this.props,o=ne(l),a=te("ErrorListTemplate",e,o);return n&&n.length?s.jsx(a,{errors:n,errorSchema:r||{},schema:i,uiSchema:l,formContext:c,registry:e}):null}getUsedFormData=(e,n)=>{if(n.length===0&&typeof e!="object")return e;const r=Vn(e,n);return Array.isArray(e)?Object.keys(r).map(i=>r[i]):r};getFieldNames=(e,n)=>{const r=(i,l=[],c=[[]])=>(Object.keys(i).forEach(o=>{if(typeof i[o]=="object"){const a=c.map(p=>[...p,o]);i[o][gr]&&i[o][ft]!==""?l.push(i[o][ft]):r(i[o],l,a)}else o===ft&&i[o]!==""&&c.forEach(a=>{const p=Q(n,a);(typeof p!="object"||on(p)||Array.isArray(p)&&p.every(m=>typeof m!="object"))&&l.push(a)})}),l);return r(e)};omitExtraData=e=>{const{schema:n,schemaUtils:r}=this.state,i=r.retrieveSchema(n,e),l=r.toPathSchema(i,"",e),c=this.getFieldNames(l,e);return this.getUsedFormData(e,c)};filterErrorsBasedOnSchema(e,n,r){const{retrievedSchema:i,schemaUtils:l}=this.state,c=n??i,o=l.toPathSchema(c,"",r),a=this.getFieldNames(o,r),p=Vn(e,a);n?.type!=="object"&&n?.type!=="array"&&(p.__errors=e.__errors);const m=this.getPreviousCustomValidateErrors(),f=(y=[],k)=>y.length===0?y:y.filter(b=>!k.includes(b)),v=(y,k={})=>(xa(y,(b,j)=>{const d=k[j];yr(b)||Array.isArray(b)&&b.length===0?delete y[j]:nt(b)&&nt(d)&&Array.isArray(d?.__errors)?y[j]=f(b.__errors,d.__errors):typeof b=="object"&&!Array.isArray(b.__errors)&&v(b,k[j])}),y);return v(p,m)}onChange=(e,n,r)=>{const{extraErrors:i,omitExtraData:l,liveOmit:c,noValidate:o,liveValidate:a,onChange:p}=this.props,{schemaUtils:m,schema:f}=this.state;let v=this.state.retrievedSchema;if(nt(e)||Array.isArray(e)){const j=this.getStateFromProps(this.props,e);e=j.formData,v=j.retrievedSchema}const y=!o&&a;let k={formData:e,schema:f},b=e;if(l===!0&&c===!0&&(b=this.omitExtraData(e),k={formData:b}),y){const j=this.validate(b,f,m,v);let d=j.errors,h=j.errorSchema;const u=d,g=h;if(i){const x=At(j,i);h=x.errorSchema,d=x.errors}if(n){const x=this.filterErrorsBasedOnSchema(n,v,b);h=Ke(h,x,"preventDuplicates")}k={formData:b,errors:d,errorSchema:h,schemaValidationErrors:u,schemaValidationErrorSchema:g}}else if(!o&&n){const j=i?Ke(n,i,"preventDuplicates"):n;k={formData:b,errorSchema:j,errors:bn(j)}}this.setState(k,()=>p&&p({...this.state,...k},r))};updateRetrievedSchema(e){return ce(e,this.state?.retrievedSchema)?this.state.retrievedSchema:e}reset=()=>{const{onChange:e}=this.props,i={formData:this.getStateFromProps(this.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};this.setState(i,()=>e&&e({...this.state,...i}))};onBlur=(e,n)=>{const{onBlur:r}=this.props;r&&r(e,n)};onFocus=(e,n)=>{const{onFocus:r}=this.props;r&&r(e,n)};onSubmit=e=>{if(e.preventDefault(),e.target!==e.currentTarget)return;e.persist();const{omitExtraData:n,extraErrors:r,noValidate:i,onSubmit:l}=this.props;let{formData:c}=this.state;if(n===!0&&(c=this.omitExtraData(c)),i||this.validateFormWithFormData(c)){const o=r||{},a=r?bn(r):[];this.setState({formData:c,errors:a,errorSchema:o,schemaValidationErrors:[],schemaValidationErrorSchema:{}},()=>{l&&l({...this.state,formData:c,status:"submitted"},e)})}};getRegistry(){const{translateString:e,uiSchema:n={}}=this.props,{schemaUtils:r}=this.state,{fields:i,templates:l,widgets:c,formContext:o,translateString:a}=$l();return{fields:{...i,...this.props.fields},templates:{...l,...this.props.templates,ButtonTemplates:{...l.ButtonTemplates,...this.props.templates?.ButtonTemplates}},widgets:{...c,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||o,schemaUtils:r,translateString:e||a,globalUiOptions:n[Es]}}submit=()=>{if(this.formElement.current){const e=new CustomEvent("submit",{cancelable:!0});e.preventDefault(),this.formElement.current.dispatchEvent(e),this.formElement.current.requestSubmit()}};focusOnError(e){const{idPrefix:n="root",idSeparator:r="_"}=this.props,{property:i}=e,l=Os(i);l[0]===""?l[0]=n:l.unshift(n);const c=l.join(r);let o=this.formElement.current.elements[c];o||(o=this.formElement.current.querySelector(`input[id^="${c}"`)),o&&o.length&&(o=o[0]),o&&o.focus()}validateFormWithFormData=e=>{const{extraErrors:n,extraErrorsBlockSubmit:r,focusOnFirstError:i,onError:l}=this.props,{errors:c}=this.state,o=this.validate(e);let a=o.errors,p=o.errorSchema;const m=a,f=p,v=a.length>0||n&&r;if(v){if(n){const y=At(o,n);p=y.errorSchema,a=y.errors}i&&(typeof i=="function"?i(a[0]):this.focusOnError(a[0])),this.setState({errors:a,errorSchema:p,schemaValidationErrors:m,schemaValidationErrorSchema:f},()=>{l?l(a):console.error("Form validation failed",a)})}else c.length>0&&this.setState({errors:[],errorSchema:{},schemaValidationErrors:[],schemaValidationErrorSchema:{}});return!v};validateForm(){const{omitExtraData:e}=this.props;let{formData:n}=this.state;return e===!0&&(n=this.omitExtraData(n)),this.validateFormWithFormData(n)}render(){const{children:e,id:n,idPrefix:r,idSeparator:i,className:l="",tagName:c,name:o,method:a,target:p,action:m,autoComplete:f,enctype:v,acceptcharset:y,acceptCharset:k,noHtml5Validate:b=!1,disabled:j,readonly:d,formContext:h,showErrorList:u="top",_internalFormWrapper:g}=this.props,{schema:x,uiSchema:S,formData:w,errorSchema:I,idSchema:_}=this.state,O=this.getRegistry(),{SchemaField:N}=O.fields,{SubmitButton:M}=O.templates.ButtonTemplates,E=g?c:void 0,C=g||c||"form";let{[bt]:P={}}=ne(S);j&&(P={...P,props:{...P.props,disabled:!0}});const U={[pt]:{[bt]:P}};return s.jsxs(C,{className:l||"rjsf",id:n,name:o,method:a,target:p,action:m,autoComplete:f,encType:v,acceptCharset:k||y,noValidate:b,onSubmit:this.onSubmit,as:E,ref:this.formElement,children:[u==="top"&&this.renderErrors(O),s.jsx(N,{name:"",schema:x,uiSchema:S,errorSchema:I,idSchema:_,idPrefix:r,idSeparator:i,formContext:h,formData:w,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:O,disabled:j,readonly:d}),e||s.jsx(M,{uiSchema:U,registry:O}),u==="bottom"&&this.renderErrors(O)]})}}function zl({textInput:t,setTextInput:e,onSubmit:n,onCancel:r}){return s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 backdrop-blur-sm",children:s.jsx("div",{className:"bg-[var(--vp-surface)] p-4 rounded-lg border border-[var(--vp-border)] w-64 shadow-2xl",children:s.jsxs("form",{onSubmit:i=>{i.preventDefault(),n()},children:[s.jsx("input",{type:"text",value:t,onChange:i=>e(i.target.value),onKeyDown:i=>{i.key==="Enter"&&(i.preventDefault(),n())},className:"w-full p-2 mb-2 bg-[var(--vp-surface-elevated)] text-white border border-[var(--vp-border)] rounded",placeholder:"Enter text...",autoFocus:!0}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(le,{variant:"outline",size:"sm",onClick:r,className:"text-white border-white hover:bg-[var(--vp-surface-elevated)]",children:"Cancel"}),s.jsx(le,{type:"submit",size:"sm",className:"bg-[var(--vp-accent)] text-white hover:bg-[var(--vp-accent)]/80 focus:ring-2 focus:ring-[var(--vp-accent)]",children:"Add"})]})]})})})}function Bl({gridSize:t,setGridSize:e,onSubmit:n,onCancel:r}){const i=t.includes(","),[l,c]=rt.useState(i),[o,a]=i?t.split(",").map(y=>y.trim()):[t,t],[p,m]=rt.useState(o),[f,v]=rt.useState(a);return s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-[var(--vp-surface)] p-4 rounded-lg border border-[var(--vp-border)] w-80 shadow-2xl",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-3",children:"Grid Size"}),s.jsxs("form",{onSubmit:y=>{y.preventDefault(),n()},children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("input",{type:"checkbox",id:"customSizeCheckbox",checked:l,onChange:y=>c(y.target.checked),className:"w-4 h-4 bg-[var(--vp-surface-elevated)] border-[var(--vp-border)] rounded text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"customSizeCheckbox",className:"ml-2 text-white text-sm",children:"Custom size (Columns × Rows)"})]}),l?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("input",{type:"number",value:p,onChange:y=>{m(y.target.value),e(`${y.target.value},${f}`)},onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),n())},className:"flex-1 p-2 bg-[var(--vp-surface-elevated)] text-white border border-[var(--vp-border)] rounded",placeholder:"Cols",min:"1",max:"20",autoFocus:!0}),s.jsx("span",{className:"text-white text-lg font-bold",children:"×"}),s.jsx("input",{type:"number",value:f,onChange:y=>{v(y.target.value),e(`${p},${y.target.value}`)},onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),n())},className:"flex-1 p-2 bg-[var(--vp-surface-elevated)] text-white border border-[var(--vp-border)] rounded",placeholder:"Rows",min:"1",max:"20"})]}),s.jsx("p",{className:"text-[var(--vp-text-muted)] text-sm mb-3",children:"Enter columns × rows (e.g., 6×4)"})]}):s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"number",value:t.includes(",")?t.split(",")[0]:t,onChange:y=>e(y.target.value),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),n())},className:"w-full p-2 mb-2 bg-[var(--vp-surface-elevated)] text-white border border-[var(--vp-border)] rounded",placeholder:"Grid size (e.g., 3 for 3x3)",min:"1",max:"20",autoFocus:!0}),s.jsx("p",{className:"text-[var(--vp-text-muted)] text-sm mb-3",children:"Enter a number for NxN grid (1-20)"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(le,{variant:"outline",size:"sm",onClick:r,className:"text-white border-white hover:bg-[var(--vp-surface-elevated)]",children:"Cancel"}),s.jsx(le,{type:"submit",size:"sm",className:"bg-[var(--vp-accent)] text-white hover:bg-green-700 focus:ring-2 focus:ring-green-500",children:"Create Grid"})]})]})]})})}function $r({saveFileName:t,setSaveFileName:e,onSubmit:n,onCancel:r}){return s.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[var(--vp-surface)] p-4 rounded-lg border border-[var(--vp-border)] w-80 z-50",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-3",children:"Export Drawing"}),s.jsxs("form",{onSubmit:i=>{i.preventDefault(),n()},children:[s.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"File Name:"}),s.jsx("input",{type:"text",value:t,onChange:i=>e(i.target.value),onKeyDown:i=>{i.key==="Enter"&&(i.preventDefault(),n())},className:"w-full p-2 mb-2 bg-[var(--vp-surface-elevated)] text-white border border-[var(--vp-border)] rounded",placeholder:"Enter filename...",autoFocus:!0}),s.jsx("p",{className:"text-[var(--vp-text-muted)] text-sm mb-4",children:"File will be saved as PNG format (.png will be added automatically)"}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(le,{variant:"outline",size:"sm",onClick:r,className:"text-white border-white hover:bg-[var(--vp-surface-elevated)]",children:"Cancel"}),s.jsx(le,{type:"submit",size:"sm",className:"bg-[var(--vp-accent)] text-white hover:bg-[var(--vp-accent)]/80 focus:ring-2 focus:ring-[var(--vp-accent)]",children:"Export"})]})]})]})}function Vl({title:t,description:e,schema:n,uiSchema:r,currentSettings:i,currentModel:l,onSettingsChange:c,onReset:o,onCancel:a,onApply:p}){const[m,f]=rt.useState(i);rt.useEffect(()=>{f(i)},[i]);const v=b=>{f(b.formData),c(b.formData)},y=()=>{o(),f(i)},k=()=>{p()};return s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-[var(--vp-surface)] rounded-lg border border-[var(--vp-border)] w-full max-w-md max-h-[85vh] overflow-hidden flex flex-col shadow-2xl",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-[var(--vp-border)]",children:[s.jsxs("h2",{className:"text-lg font-semibold text-white",children:[t,s.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-600 text-white",children:l})]}),s.jsx("p",{className:"text-gray-300 text-sm mt-1",children:e})]}),s.jsx("div",{className:"flex-1 overflow-auto bg-[var(--vp-surface)]",children:s.jsxs(br,{defaultValue:"settings",className:"w-full h-full",children:[s.jsxs(wr,{className:"grid w-full grid-cols-2 bg-[var(--vp-surface-elevated)] mx-4 mt-3 mb-3 p-1",children:[s.jsx(st,{value:"settings",className:"text-sm font-medium transition-all",children:"Model Settings"}),s.jsx(st,{value:"preview",className:"text-sm font-medium transition-all",children:"Settings Preview"})]}),s.jsx(wn,{value:"settings",className:"m-0 data-[state=active]:bg-[var(--vp-surface)]",children:s.jsx("div",{className:"px-4 pb-4 pt-2",children:s.jsx(Ul,{schema:n,uiSchema:r,formData:m,onChange:v,validator:Ns,className:"rjsf-form-dark",liveValidate:!0,children:s.jsx("div",{})})})}),s.jsx(wn,{value:"preview",className:"m-0 data-[state=active]:bg-[var(--vp-surface)]",children:s.jsx("div",{className:"px-4 pb-4 pt-2",children:s.jsxs("div",{className:"bg-[var(--vp-surface-elevated)] rounded-md p-4 max-h-96 overflow-y-auto border border-[var(--vp-border)]",children:[s.jsx("h3",{className:"text-white font-semibold mb-3 text-sm",children:"Current Settings JSON"}),s.jsx("pre",{className:"text-[var(--vp-text-muted)] text-xs whitespace-pre-wrap font-mono leading-relaxed",children:JSON.stringify(m,null,2)})]})})})]})}),s.jsxs("div",{className:"px-4 py-3 border-t border-[var(--vp-border)] flex justify-between items-center",children:[s.jsx(le,{variant:"outline",onClick:y,className:"bg-[var(--vp-accent)] text-gray-300 border-gray-600 hover:bg-gray-700 hover:text-white text-sm px-3 py-1.5",children:"Reset to Defaults"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(le,{variant:"outline",onClick:a,className:"bg-[var(--vp-accent)] text-gray-300 border-gray-600 hover:bg-gray-700 hover:text-white text-sm px-3 py-1.5",children:"Cancel"}),s.jsx(le,{onClick:k,className:"bg-[var(--vp-accent)] text-white hover:bg-[var(--vp-accent)]/80 focus:ring-2 focus:ring-[var(--vp-accent)] text-sm px-4 py-1.5",children:"Apply Settings"})]})]})]})})}const _e=({icon:t,currentTool:e,toolType:n,onClick:r,fillOnActive:i=!0,tooltip:l})=>{const c=e===n;return s.jsx(le,{variant:"ghost",size:"icon",className:`w-6 h-6 p-0.5 transition-all ${c?"bg-[var(--vp-accent)] hover:bg-green-700 text-white":"bg-white/20 text-white/90 hover:bg-[#9ca3af]/20 hover:text-white"}`,onClick:r,title:l,children:s.jsx(t,{className:"h-3 w-3",fill:i&&c?"white":"none"})})},Wl=({colors:t,onToolChange:e,onSave:n,onClear:r})=>{const[i,l]=T.useState({x:16,y:16}),[c,o]=T.useState(!1),[a,p]=T.useState({x:0,y:0}),m=T.useRef(null),{currentTool:f,currentColor:v,hasActiveGrid:y,setCurrentColor:k,setShowGridDialog:b}=mt(),j=()=>{console.log("Grid button clicked!",{hasActiveGrid:y}),y?(console.log("Active grid exists, switching to grid tool"),e("grid")):(console.log("No active grid, showing dialog and switching to grid tool"),e("grid"),b(!0))},d=()=>{e("text")},h=u=>{const g=u.target,x=g.tagName==="BUTTON"||g.closest("button");(g===u.currentTarget||g.closest(".drag-handle"))&&!x&&(u.preventDefault(),u.stopPropagation(),o(!0),p({x:u.clientX-i.x,y:u.clientY-i.y}))};return T.useEffect(()=>{const u=x=>{if(!c)return;const S=x.clientX-a.x,w=x.clientY-a.y,I=window.innerWidth-80,_=window.innerHeight-200;l({x:Math.max(0,Math.min(S,I)),y:Math.max(0,Math.min(w,_))})},g=()=>{o(!1)};return c&&(document.addEventListener("mousemove",u),document.addEventListener("mouseup",g)),()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",g)}},[c,a]),s.jsxs("div",{ref:m,className:"absolute z-30 bg-[var(--vp-surface)]/95 backdrop-blur-sm rounded border border-[var(--vp-border)] p-1 w-20 select-none",style:{left:i.x,top:i.y,userSelect:"none",pointerEvents:"auto"},onMouseDown:h,children:[s.jsx("div",{className:`flex items-center justify-center mb-1 drag-handle ${c?"cursor-grabbing":"cursor-grab"}`,children:s.jsx(Ct,{size:8,className:"text-[var(--vp-text-muted)]"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-0.5",children:[s.jsx(_e,{currentTool:f,toolType:"pen",icon:ki,onClick:()=>e("pen"),tooltip:"Freehand Pen"}),s.jsx(_e,{currentTool:f,toolType:"line",icon:Pr,onClick:()=>e("line"),tooltip:"Draw Line"}),s.jsx(_e,{currentTool:f,toolType:"rectangle",icon:Ai,onClick:()=>e("rectangle"),tooltip:"Draw Rectangle"}),s.jsx(_e,{currentTool:f,toolType:"circle",icon:Ts,onClick:()=>e("circle"),tooltip:"Draw Circle"}),s.jsx(_e,{currentTool:f,toolType:"text",icon:Fi,onClick:d,tooltip:"Add Text"}),s.jsx(_e,{currentTool:f,toolType:"compass",icon:yi,onClick:()=>e("compass"),tooltip:"Draw Angle Arc"}),s.jsx(_e,{currentTool:f,toolType:"grid",icon:bi,onClick:j,tooltip:"Create Grid"}),s.jsx(_e,{currentTool:f,toolType:"save",icon:Ti,onClick:n,tooltip:"Save Drawing"}),s.jsx(_e,{currentTool:f,toolType:"clear",icon:Mi,onClick:r,tooltip:"Clear All"})]}),s.jsx("div",{className:"mt-1 pt-1 border-t border-[var(--vp-border)]",children:s.jsxs("div",{className:"grid grid-cols-4 gap-0.5 p-0.5",children:[t.map(u=>s.jsx("div",{className:`w-4 h-4 rounded-full cursor-pointer border-2 transition-all hover:scale-110 ${v===u?"border-white shadow-lg":"border-gray-600"}`,style:{backgroundColor:u},onClick:()=>k(u),title:`Color: ${u}`},u)),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"color",value:v,onChange:u=>k(u.target.value),className:"w-4 h-4 rounded-full cursor-pointer border-2 border-gray-600 opacity-0 absolute inset-0 z-10",title:"Custom Color"}),s.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-gray-600 bg-gradient-to-br from-red-400 via-purple-400 to-blue-400 flex items-center justify-center cursor-pointer hover:scale-110 transition-all pointer-events-none",children:s.jsx(xi,{className:"w-2 h-2 text-white drop-shadow-sm"})})]})]})})]})};function Hl({isPlaying:t,isFullscreen:e,isSmallVideo:n=!1,playerRef:r}){const i=T.useRef(null),{isDrawing:l,currentTool:c,currentColor:o,drawingObjects:a,currentObject:p,textInput:m,textPosition:f,showTextInput:v,showGridDialog:y,gridSize:k,showSaveDialog:b,saveFileName:j,currentStrategy:d,setIsDrawing:h,setDrawingObjects:u,setCurrentObject:g,setTextInput:x,setTextPosition:S,setShowTextInput:w,setShowGridDialog:I,setGridSize:_,setShowSaveDialog:O,setSaveFileName:N,clearCanvas:M,resetActiveCompassObjects:E}=mt(),C=["#ff9a9e","#88c0ff","#ffd93d","#c792ea","#00ff00","#ffffff","#000000"];T.useEffect(()=>{const F=i.current;if(!F)return;let V=0,W=0;const X=document.querySelector(".react-player");if(X)V=X.clientWidth,W=X.clientHeight;else{const K=i.current?.parentElement;K&&(V=K.clientWidth,W=K.clientHeight)}if(V===0||W===0)return;const H=F.width,Z=F.height;F.width=V,F.height=W,H>0&&Z>0&&(Math.abs(H-F.width)>5||Math.abs(Z-F.height)>5)&&u(K=>K.map(se=>P(se,H,Z,F.width,F.height)));const A=()=>{const K=F.width,se=F.height;let oe=0,Ce=0;const Je=document.querySelector(".react-player");if(Je)oe=Je.clientWidth,Ce=Je.clientHeight;else{const Re=i.current?.parentElement;Re&&(oe=Re.clientWidth,Ce=Re.clientHeight)}oe===0||Ce===0||(F.width=oe,F.height=Ce,K>0&&se>0&&(Math.abs(K-F.width)>5||Math.abs(se-F.height)>5)&&u(Re=>Re.map(Dt=>P(Dt,K,se,F.width,F.height))),q())};return window.addEventListener("resize",A),q(),()=>{window.removeEventListener("resize",A)}},[r,a]),T.useEffect(()=>{if(e===void 0)return;const F=()=>{const H=i.current;if(!H)return;const Z=document.querySelector(".react-player");if(!Z)return;const A=H.width,K=H.height;H.width=Z.clientWidth,H.height=Z.clientHeight,A>0&&K>0&&(Math.abs(A-H.width)>5||Math.abs(K-H.height)>5)&&u(se=>se.map(oe=>P(oe,A,K,H.width,H.height))),q()};F();const V=setTimeout(F,100),W=setTimeout(F,300),X=setTimeout(F,500);return()=>{clearTimeout(V),clearTimeout(W),clearTimeout(X)}},[e]),T.useEffect(()=>{if(!t)return;const F=setInterval(()=>{U(),q()},1e3/30);return()=>clearInterval(F)},[t,a]),T.useEffect(()=>{const F=a.map(W=>{if(W.type==="tracking"&&W.finalized&&!W.isSelecting){const X=Le.getStrategy("tracking");return X.setVideoPlayingState(t),t?X.startTracking(W):X.stopTracking(W)}return W});F.some((W,X)=>{const H=a[X];return W.trackingState?.isTracking!==H.trackingState?.isTracking})&&u(F)},[t]);const P=(F,V,W,X,H)=>{const Z=X/V,A=H/W,K={...F};return F.type==="pen"&&F.points&&(K.points=F.points.map(se=>({x:se.x*Z,y:se.y*A}))),F.x!==void 0&&(K.x=F.x*Z),F.y!==void 0&&(K.y=F.y*A),F.width!==void 0&&(K.width=F.width*Z),F.height!==void 0&&(K.height=F.height*A),K},U=()=>{if(!i.current||!t)return;let V=null;try{if(r.current){const H=r.current.getInternalPlayer();H&&H.tagName==="VIDEO"&&(V=H)}}catch{const Z=document.querySelectorAll("video");Z.length>0&&(V=Z[0])}if(!V)return;const W=a.map(H=>{if(H.type==="tracking"&&H.trackingState?.isTracking){const Z=Le.getStrategy("tracking");return Z.setVideoElement(V),Z.updateTracking(H)}return H});W.some((H,Z)=>{const A=a[Z];return H.x!==A.x||H.y!==A.y})&&u(W)},q=()=>{const F=i.current;if(!F)return;const V=F.getContext("2d");V&&(V.clearRect(0,0,F.width,F.height),V.fillStyle="rgba(0, 0, 0, 0.1)",V.fillRect(0,0,F.width,F.height),a.forEach(W=>{V.strokeStyle=W.color,V.fillStyle=W.color,V.lineWidth=3,W.selected&&Le.getStrategy(W.type).drawSelection(V,W),Le.getStrategy(W.type).drawObject(V,W)}))},Y=()=>{if(!j.trim()){O(!1);return}const F=i.current,V=r.current;if(!F)return;const W=document.createElement("canvas"),X=W.getContext("2d");if(!X)return;if(W.width=F.width,W.height=F.height,V)try{const A=V.getInternalPlayer();A&&A.videoWidth>0?X.drawImage(A,0,0,W.width,W.height):(X.fillStyle="#000000",X.fillRect(0,0,W.width,W.height))}catch(A){console.warn("Could not capture video frame, using black background:",A),X.fillStyle="#000000",X.fillRect(0,0,W.width,W.height)}else X.fillStyle="#000000",X.fillRect(0,0,W.width,W.height);X.drawImage(F,0,0);const H=document.createElement("a"),Z=j.trim().endsWith(".png")?j.trim():`${j.trim()}.png`;H.download=Z,H.href=W.toDataURL("image/png"),document.body.appendChild(H),H.click(),document.body.removeChild(H),O(!1)},D=F=>{const V=zi(i.current,F);if(c==="select"){const X=a.findIndex(H=>Le.getStrategy(H.type).isPointInObject(H,V.x,V.y));u(H=>H.map((Z,A)=>({...Z,selected:A===X}))),X!==-1&&(h(!0),g(a[X]));return}if(c==="text"){S(V),w(!0);return}if(c==="grid"&&a.findIndex(H=>H.type==="grid"&&H.clickCount===1)===-1){I(!0);return}if(d.handleClick){const X=a.findIndex(H=>H.type===c&&!H.finalized&&H.clickCount!==void 0&&H.clickCount<3);if(X!==-1){const H=a[X],Z=d.handleClick(H,V.x,V.y);Z?(u(A=>A.map((K,se)=>se===X?Z:K)),Z.finalized?(g(null),h(!1)):(g(Z),h(!0))):(u(A=>A.filter((K,se)=>se!==X)),g(null),h(!1)),q();return}else if(c==="grid"){const H=d.createObject(V.x,V.y,o);u(Z=>[...Z,H]),g(H),h(!0),q();return}}h(!0);const W=d.createObject(V.x,V.y,o);g(W),u(X=>[...X,W])},L=F=>{if(!l||!p)return;const V=i.current;if(!V)return;const W=V.getBoundingClientRect(),X=F.clientX-W.left,H=F.clientY-W.top,A=Le.getStrategy(p.type,c==="tracking"?d.cv:void 0).updateObject(p,X,H);u(K=>K.map(se=>se===p?A:se)),g(A),q()},z=()=>{if(c==="tracking"&&p){const V=d.finalizeObject(p);u(W=>W.map(X=>X===p?V:X)),h(!1),g(null);return}if(!(p&&p.type==="compass")){if(p&&p.type==="grid"&&p.draggedCornerIndex!==null){const F={...p,draggedCornerIndex:null};u(V=>V.map(W=>W===p?F:W)),g(F);return}h(!1),g(null)}},G=()=>{if(!m.trim()){w(!1);return}const F={type:"text",x:f.x,y:f.y,text:m,color:o};u(V=>[...V,F]),x(""),w(!1),q()},J=()=>{w(!1)},re=()=>{let F,V;if(k.includes(",")?[F,V]=k.split(",").map(A=>parseInt(A.trim())):F=V=parseInt(k),!F||!V||F<1||F>20||V<1||V>20){I(!1);return}const W=i.current;if(!W)return;const X=Le.getStrategy("grid"),H=X.createObject(0,0,o),Z=X.initializeGrid(H,F,V,W.width,W.height);u(A=>[...A,Z]),g(Z),h(!0),I(!1),q()},de=()=>{I(!1)},ue=()=>{O(!1)},pe=async F=>{if(E(),F==="tracking")try{await he(()=>import("./opencv-BQmsmeaI.js").then(V=>V.o),__vite__mapDeps([16,1,2,17])),mt.getState().setCurrentTool(F)}catch(V){console.error("Error loading OpenCV: ",V)}else mt.getState().setCurrentTool(F)};return s.jsxs("div",{className:"absolute inset-0 w-full h-full pointer-events-auto z-20",children:[s.jsx("canvas",{ref:i,className:"absolute top-0 left-0 w-full h-full cursor-crosshair z-20",onMouseDown:D,onMouseMove:L,onMouseUp:z}),s.jsx(Wl,{isSmallVideo:n,colors:C,onToolChange:pe,onSave:()=>O(!0),onClear:M}),v&&s.jsx(zl,{textInput:m,setTextInput:x,onSubmit:G,onCancel:J}),y&&s.jsx(Bl,{gridSize:k,setGridSize:_,onSubmit:re,onCancel:de}),b&&s.jsx($r,{saveFileName:j,setSaveFileName:N,onSubmit:Y,onCancel:ue})]})}class uc{constructor(e={}){this.modelProvider=null,this.animationId=null,this.isInitialized=!1,this.onPoseDetected=null,this.video=null,this.lastDetectionTime=0,this.detectionInterval=50,this.config={...Is,...e}}async initialize(e,n){this.video=e;try{!this.modelProvider||!this.modelProvider.isReady()?(this.modelProvider&&this.modelProvider.dispose(),this.modelProvider=await As(n),await this.modelProvider.initialize(e,n),console.log(`New model provider initialized with ${n.type} ${n.model}`)):console.log("Reusing existing model provider"),this.isInitialized=!0}catch(r){throw console.error("Failed to initialize pose detection provider:",r),r}}setModelProvider(e,n){this.modelProvider=e,this.video=n,this.isInitialized=e.isReady(),console.log(`setModelProvider - ready: ${e.isReady()}, initialized: ${this.isInitialized}`)}setDetectionInterval(e){e==="blazepose"?this.detectionInterval=100:this.detectionInterval=50,console.log(`Detection interval set to ${this.detectionInterval}ms for model: ${e}`)}getCurrentModelConfig(){return null}startDetection(){if(!this.isInitialized||!this.modelProvider||!this.video){console.warn("Provider not initialized. Call initialize first."),console.log(`Debug - initialized: ${this.isInitialized}, modelProvider: ${!!this.modelProvider}, video: ${!!this.video}`),console.log(`Model provider ready: ${this.modelProvider?.isReady()}`);return}this.stopDetection(),console.log("Starting pose detection...");const e=async()=>{try{if(!this.animationId||!this.modelProvider?.isReady()||!this.video)return;const n=Date.now();if(n-this.lastDetectionTime>=this.detectionInterval&&this.video.readyState>=2){const r=await this.modelProvider.estimatePoses(this.video);this.lastDetectionTime=n,this.onPoseDetected&&this.animationId&&this.onPoseDetected(r)}}catch(n){this.animationId&&console.error("Error in detection loop:",n)}this.animationId&&(this.animationId=requestAnimationFrame(e))};this.animationId=requestAnimationFrame(e)}stopDetection(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)}setOnPoseDetected(e){this.onPoseDetected=e}isDetecting(){return this.animationId!==null}dispose(e=!1){this.stopDetection(),this.modelProvider&&!e&&(this.modelProvider.dispose(),this.modelProvider=null),this.isInitialized=!1,this.onPoseDetected=null,this.video=null}}async function ql(t,e={}){if(t==="3d"){const{PoseDetection3DProvider:n}=await he(async()=>{const{PoseDetection3DProvider:r}=await import("./PoseDetection3DProvider-BSvwhnEB.js");return{PoseDetection3DProvider:r}},__vite__mapDeps([18,1,2,19,20,21]));return new n(e)}else{const{PoseDetection2DProvider:n}=await he(async()=>{const{PoseDetection2DProvider:r}=await import("./PoseDetection2DProvider-Bq9ZzG3k.js");return{PoseDetection2DProvider:r}},__vite__mapDeps([22,1,2,19,20,21]));return new n(e)}}async function Kl(t){const{fileName:e,canvas:n,videoElement:r,includeVideoBackground:i=!0,format:l="png",quality:c=.92}=t;if(!e.trim())return{success:!1,error:"File name is required"};if(!n)return{success:!1,error:"Canvas element is required"};try{let o,a;if(i&&r){const v=document.createElement("canvas"),y=v.getContext("2d");if(!y)return{success:!1,error:"Could not create temporary canvas context"};v.width=n.width,v.height=n.height;try{r.videoWidth>0&&r.readyState>=2?y.drawImage(r,0,0,v.width,v.height):(y.fillStyle="#000000",y.fillRect(0,0,v.width,v.height))}catch(k){console.warn("Could not capture video frame, using black background:",k),y.fillStyle="#000000",y.fillRect(0,0,v.width,v.height)}y.drawImage(n,0,0),o=v,a=y}else o=n,a=n.getContext("2d");if(!a)return{success:!1,error:"Could not get canvas context"};const p=l==="jpeg"?"jpg":"png",m=e.trim().toLowerCase().endsWith(`.${p}`)?e.trim():`${e.trim()}.${p}`,f=document.createElement("a");return f.download=m,l==="jpeg"?f.href=o.toDataURL("image/jpeg",c):f.href=o.toDataURL("image/png"),document.body.appendChild(f),f.click(),document.body.removeChild(f),{success:!0,fileName:m}}catch(o){return console.error("Error saving canvas screenshot:",o),{success:!1,error:o instanceof Error?o.message:"Unknown error occurred"}}}function Yl(){return{saveScreenshot:async e=>Kl(e)}}const Xl={MOVENET_POSENET:{leftShoulder:5,rightShoulder:6,leftElbow:7,rightElbow:8,leftWrist:9,rightWrist:10,leftHip:11,rightHip:12,leftKnee:13,rightKnee:14,leftAnkle:15,rightAnkle:16}};function Gl(t,e,n){const r={x:t.x-e.x,y:t.y-e.y},i={x:n.x-e.x,y:n.y-e.y},l=r.x*i.x+r.y*i.y,c=Math.sqrt(r.x*r.x+r.y*r.y),o=Math.sqrt(i.x*i.x+i.y*i.y);if(c===0||o===0)return 0;const a=l/(c*o),p=Math.max(-1,Math.min(1,a));return Math.acos(p)*180/Math.PI}function en(t,e=.3){if(!t)return!1;const n=t.score||t.visibility||1;return!isNaN(n)&&n>=e&&!isNaN(t.x)&&!isNaN(t.y)}function we(t,e,n,r,i=.3){const l=en(t,i),c=en(e,i),o=en(n,i);if(!l||!c||!o)return{joint:r,angle:0,confidence:0,valid:!1};const a=Gl(t,e,n),p=t.score||t.visibility||1,m=e.score||e.visibility||1,f=n.score||n.visibility||1,v=(p+m+f)/3;return{joint:r,angle:Math.round(a*10)/10,confidence:Math.round(v*100)/100,valid:!0}}function ar(t,e="movenet",n=.3){if(!t||t.length===0){const l={joint:"",angle:0,confidence:0,valid:!1};return{leftElbow:{...l,joint:"Left Elbow"},rightElbow:{...l,joint:"Right Elbow"},leftKnee:{...l,joint:"Left Knee"},rightKnee:{...l,joint:"Right Knee"},leftShoulder:{...l,joint:"Left Shoulder"},rightShoulder:{...l,joint:"Right Shoulder"},leftHip:{...l,joint:"Left Hip"},rightHip:{...l,joint:"Right Hip"},leftAnkle:{...l,joint:"Left Ankle"},rightAnkle:{...l,joint:"Right Ankle"}}}const r=Xl.MOVENET_POSENET;return{leftElbow:we(t[r.leftShoulder],t[r.leftElbow],t[r.leftWrist],"Left Elbow",n),rightElbow:we(t[r.rightShoulder],t[r.rightElbow],t[r.rightWrist],"Right Elbow",n),leftKnee:we(t[r.leftHip],t[r.leftKnee],t[r.leftAnkle],"Left Knee",n),rightKnee:we(t[r.rightHip],t[r.rightKnee],t[r.rightAnkle],"Right Knee",n),leftShoulder:we(t[r.leftElbow],t[r.leftShoulder],t[r.leftHip],"Left Shoulder",n),rightShoulder:we(t[r.rightElbow],t[r.rightShoulder],t[r.rightHip],"Right Shoulder",n),leftHip:we(t[r.leftShoulder],t[r.leftHip],t[r.leftKnee],"Left Hip",n),rightHip:we(t[r.rightShoulder],t[r.rightHip],t[r.rightKnee],"Right Hip",n),leftAnkle:we(t[r.leftKnee],t[r.leftAnkle],t[r.leftHip],"Left Ankle",n),rightAnkle:we(t[r.rightKnee],t[r.rightAnkle],t[r.rightHip],"Right Ankle",n)}}function Jl(t){return t.valid?`${t.angle}°`:"N/A"}function Zl(t){return t>=.8?"text-green-400":t>=.6?"text-yellow-400":t>=.4?"text-orange-400":"text-red-400"}const Ur=({children:t,initialPosition:e={x:16,y:16},initialSize:n,className:r="",style:i={},bounds:l,minSize:c={width:150,height:150},maxSize:o={width:600,height:600},resizable:a=!1,disabled:p=!1,header:m,showGrip:f=!0,onResize:v})=>{const[y,k]=T.useState(e),[b,j]=T.useState(n),[d,h]=T.useState(!1),[u,g]=T.useState(!1),[x,S]=T.useState({x:0,y:0}),[w,I]=T.useState({x:0,y:0,width:0,height:0}),_=T.useRef(null),O=E=>{p||(E.target===E.currentTarget||E.target.closest(".drag-handle"))&&(h(!0),S({x:E.clientX-y.x,y:E.clientY-y.y}))};T.useEffect(()=>{const E=P=>{if(!d)return;const U=P.clientX-x.x,q=P.clientY-x.y,Y=l||{width:b?.width||_.current?.offsetWidth||200,height:b?.height||_.current?.offsetHeight||300},D=window.innerWidth-Y.width,L=window.innerHeight-Y.height;k({x:Math.max(0,Math.min(U,D)),y:Math.max(0,Math.min(q,L))})},C=()=>{h(!1)};return d&&(document.addEventListener("mousemove",E),document.addEventListener("mouseup",C)),()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",C)}},[d,x,l,b]);const N=E=>{a&&(E.stopPropagation(),E.preventDefault(),g(!0),I({x:E.clientX,y:E.clientY,width:b?.width||_.current?.offsetWidth||200,height:b?.height||_.current?.offsetHeight||300}))};T.useEffect(()=>{const E=P=>{if(!u)return;const U=P.clientX-w.x,q=P.clientY-w.y,Y=Math.max(c.width,Math.min(o.width,w.width+U)),D=Math.max(c.height,Math.min(o.height,w.height+q)),L={width:Y,height:D};j(L),v?.(L)},C=()=>{g(!1)};return u&&(document.addEventListener("mousemove",E),document.addEventListener("mouseup",C)),()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",C)}},[u,w,c,o,v]);const M=`absolute z-40 bg-black/90 backdrop-blur-sm rounded border border-white/20 select-none ${d?"cursor-grabbing":"cursor-grab"}`;return s.jsxs("div",{ref:_,className:`${M} ${r}`,style:{left:y.x,top:y.y,width:b?.width,height:b?.height,userSelect:"none",...i},onMouseDown:O,children:[(f||m)&&s.jsx("div",{className:"drag-handle",children:m||s.jsx("div",{className:"flex items-center justify-center p-1",children:s.jsx(Ct,{size:8,className:"text-gray-400"})})}),t,a&&s.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50",onMouseDown:N,style:{background:"linear-gradient(135deg, transparent 0%, transparent 50%, rgba(255, 255, 255, 0.3) 50%, rgba(255, 255, 255, 0.3) 100%)"},title:"Drag to resize"})]})},qe=({angle:t})=>{const e=Zl(t.confidence);return s.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-black/20 rounded text-xs",children:[s.jsx("span",{className:"text-white truncate mr-2",children:t.joint.replace("Left ","L ").replace("Right ","R ")}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-white font-mono",children:Jl(t)}),t.valid&&s.jsxs("span",{className:`ml-1 ${e}`,children:[Math.round(t.confidence*100),"%"]})]})]})},Ql=({angles:t,isVisible:e,modelType:n})=>{if(!e)return null;const r=s.jsxs("div",{className:"flex items-center justify-between p-2 drag-handle",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ct,{size:12,className:"text-gray-400"}),s.jsx("h3",{className:"text-white text-xs font-semibold",children:"Joint Angles"})]}),s.jsx("div",{className:"text-gray-400 text-xs",children:n.split(" ")[0]})]});return s.jsx(Ur,{initialPosition:{x:16,y:16},initialSize:{width:192,height:300},minSize:{width:150,height:200},maxSize:{width:400,height:600},resizable:!0,header:r,showGrip:!1,className:"bg-black/85 p-0",style:{overflow:"hidden"},children:s.jsx("div",{className:"overflow-y-auto px-2 pb-2",style:{height:"calc(100% - 32px)"},children:t?s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(qe,{angle:t.leftElbow}),s.jsx(qe,{angle:t.rightElbow}),s.jsx(qe,{angle:t.leftKnee}),s.jsx(qe,{angle:t.rightKnee}),s.jsx(qe,{angle:t.leftShoulder}),s.jsx(qe,{angle:t.rightShoulder})]}),s.jsx("div",{className:"mt-2 pt-2 border-t border-white/20 text-xs",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Valid:"}),s.jsxs("span",{className:"text-white",children:[Object.values(t).filter(i=>i.valid).length,"/",Object.values(t).length]})]})})]}):s.jsx("div",{className:"text-center py-4",children:s.jsx("div",{className:"text-gray-400 text-xs",children:"No pose detected"})})})})},ec=({poseResult:t,isVisible:e,modelType:n,connections:r,minConfidence:i})=>{const[l,c]=T.useState({width:200,height:200}),[o,a]=T.useState({isDown:!1,lastX:0,lastY:0,rotationX:0,rotationY:0,scale:1}),p=T.useRef(null),m=h=>{a(u=>({...u,isDown:!0,lastX:h.clientX,lastY:h.clientY}))},f=h=>{if(!o.isDown)return;const u=h.clientX-o.lastX,g=h.clientY-o.lastY;a(x=>({...x,rotationY:x.rotationY+u*.01,rotationX:x.rotationX+g*.01,lastX:h.clientX,lastY:h.clientY}))},v=()=>{a(h=>({...h,isDown:!1}))},y=h=>{h.preventDefault();const u=h.deltaY>0?.9:1.1;a(g=>({...g,scale:Math.max(.5,Math.min(3,g.scale*u))}))},k=(h,u,g,x,S)=>{const w=Math.cos(S),I=Math.sin(S),_=h*w-g*I,O=h*I+g*w,N=Math.cos(x),M=Math.sin(x),E=u*N-O*M,C=u*M+O*N;return{x:_,y:E,z:C}},b=(h,u,g,x)=>{h.strokeStyle="rgba(100, 100, 100, 0.3)",h.lineWidth=1;for(let _=-3;_<=3;_++)for(let O=-3;O<=3;O++){const N=_*50,M=O*50,E=k(N/100,.8,M/100,o.rotationX,o.rotationY),P=1/((E.z+1.5)*.5+.5),U=u+E.x*x*100*P,q=g+E.y*x*100*P;if(_===-3){const D=k(1.5,.8,M/100,o.rotationX,o.rotationY),z=1/((D.z+1.5)*.5+.5),G=u+D.x*x*100*z,J=g+D.y*x*100*z;h.beginPath(),h.moveTo(U,q),h.lineTo(G,J),h.stroke()}if(O===-3){const D=k(N/100,.8,1.5,o.rotationX,o.rotationY),z=1/((D.z+1.5)*.5+.5),G=u+D.x*x*100*z,J=g+D.y*x*100*z;h.beginPath(),h.moveTo(U,q),h.lineTo(G,J),h.stroke()}}},j=(h,u,g,x,S)=>{const _=i||.3,O=u[15],N=u[16];let M=480/2;O&&O.score>_&&N&&N.score>_?M=(O.y+N.y)/2:O&&O.score>_?M=O.y:N&&N.score>_&&(M=N.y);const E=u.map(C=>{if(C&&C.score&&C.score>_){const P=(C.x-320)/320,q=.8+(C.y-M)/(480/2),Y=(C.z||C.score)*.5-.25,D=k(P,q,Y,o.rotationX,o.rotationY),L=D.z+1.5,z=1/(L*.5+.5),G=g+D.x*S*100*z,J=x+D.y*S*100*z,re=L*50;return{...C,x3D:G,y3D:J,z3D:re,size:Math.max(2,3*z*o.scale),alpha:Math.min(1,.4+L*.4)}}return null});r.forEach(([C,P])=>{const U=E[C],q=E[P];if(U&&q&&U.x3D&&q.x3D){const Y=(U.z3D+q.z3D)/2,D=Math.min(1,.3+Y/100*.5);h.strokeStyle=`rgba(0, 255, 150, ${D})`,h.lineWidth=2,h.beginPath(),h.moveTo(U.x3D,U.y3D),h.lineTo(q.x3D,q.y3D),h.stroke()}}),E.forEach(C=>{C&&C.x3D&&(h.fillStyle=`rgba(255, 100, 100, ${C.alpha})`,h.beginPath(),h.arc(C.x3D,C.y3D,C.size,0,2*Math.PI),h.fill())})};if(T.useEffect(()=>{const h=p.current;if(!h)return;const u=h.getContext("2d");if(!u)return;const x=l.height-24,S=window.devicePixelRatio||1;h.width=l.width*S,h.height=x*S,h.style.width=`${l.width}px`,h.style.height=`${x}px`,u.scale(S,S),u.clearRect(0,0,l.width,x);const w=l.width/2,I=x/2,_=Math.min(l.width,x)/400*o.scale;b(u,w,I,_),t&&t.poses.length>0?t.poses.forEach(O=>{O.keypoints&&j(u,O.keypoints,w,I,_)}):(u.fillStyle="#999",u.font="12px Arial",u.textAlign="center",u.fillText("No pose detected",w,I))},[t,o.rotationX,o.rotationY,o.scale,l]),!e)return null;const d=s.jsxs("div",{className:"flex items-center justify-between p-2 drag-handle",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ct,{size:12,className:"text-gray-400"}),s.jsx("h3",{className:"text-white text-xs font-semibold",children:"3D Pose View"})]}),s.jsx("div",{className:"text-gray-400 text-xs",children:n.split(" ")[0]})]});return s.jsxs(Ur,{initialPosition:{x:0,y:100},initialSize:{width:200,height:200},minSize:{width:150,height:150},maxSize:{width:600,height:600},resizable:!0,header:d,showGrip:!1,className:"bg-black/85 p-0",style:{overflow:"hidden"},onResize:h=>c(h),children:[s.jsx("canvas",{ref:p,className:"cursor-move",onMouseDown:m,onMouseMove:f,onMouseUp:v,onMouseLeave:v,onWheel:y}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 border-t border-white/20",children:s.jsxs("div",{className:"flex justify-between text-xs text-white",children:[s.jsxs("span",{children:["Rotation: ",(o.rotationY*57.3).toFixed(0),"°,"," ",(o.rotationX*57.3).toFixed(0),"°"]}),s.jsxs("span",{children:["Scale: ",(o.scale*100).toFixed(0),"%"]})]})})]})};function tc({videoRef:t,is3DMode:e=!1,isPlaying:n,currentTime:r=0,modelType:i="movenet",config:l={}}){const c=T.useRef(null),o=T.useRef(null),[a,p]=T.useState(null),[m,f]=T.useState(0),[v,y]=T.useState(null),[k,b]=T.useState(e),[j,d]=T.useState(!1),[h,u]=T.useState(i),[g,x]=T.useState(!1),[S]=T.useState(!1),[w,I]=T.useState(!1),[_,O]=T.useState({}),[N,M]=T.useState(!1),[E,C]=T.useState("pose-detection-screenshot"),[P,U]=T.useState(!1),[q,Y]=T.useState(null),[D,L]=T.useState(!1),[z,G]=T.useState({layers:[],activeLayerId:null,draggedKeypointIndex:null}),J=T.useRef(null),re=T.useRef(Date.now()),{modelProvider:de,isModelLoaded:ue,isLoading:pe,loadModel:F}=Ms(),{saveScreenshot:V}=Yl(),W=()=>{switch(h){case"movenet":return{schema:Cn,uiSchema:jn};case"tensorflowPosenet":return{schema:$s,uiSchema:Ls};case"blazepose":return{schema:Rs,uiSchema:Fs};default:return{schema:Cn,uiSchema:jn}}};T.useEffect(()=>{const{schema:$}=W(),R={};Object.entries($.properties).forEach(([B,ee])=>{ee.default!==void 0&&(R[B]=ee.default)}),O(R)},[h]);const X={minConfidence:_.minConfidence??(h==="blazepose"?.1:.3),keypointColor:_.keypointColor??"#FF0000",keypointSize:_.keypointSize??5,skeletonColor:_.skeletonColor??"#FF0000",skeletonThickness:_.skeletonThickness??2,showKeypointLabels:_.showKeypointLabels??h==="blazepose",keypointLabelColor:_.keypointLabelColor??"#FFFFFF",keypointLabelSize:_.keypointLabelSize??10,showBoundingBox:_.showBoundingBox??S,boundingBoxColor:_.boundingBoxColor??"#00FFFF",boundingBoxThickness:_.boundingBoxThickness??2,...l},H=()=>{const $=Sn[h];if(!$)throw new Error(`Unknown model type: ${h}`);return $};T.useEffect(()=>{(async()=>{if(!(!t.current||j))try{d(!0),y(null),f(0),o.current&&(console.log("Stopping existing detection before model change..."),o.current.stopDetection(),await new Promise(ee=>setTimeout(ee,100)));const R=setInterval(()=>{f(ee=>ee>=80?(clearInterval(R),80):ee+10)},200),B=H();console.log(`Loading model: ${B.type} ${B.model}`),await F(t.current,B),clearInterval(R),f(100),console.log(`Model loaded successfully: ${B.type} ${B.model}`)}catch(R){console.error("Error loading model:",R),y(`Failed to load ${h} model`)}finally{d(!1)}})()},[h,t.current,F]),T.useEffect(()=>{ue&&de&&(async()=>{if(!(!t.current||!ue||!de))try{if(console.log(`Switching to ${k?"3D":"2D"} mode...`),o.current){const B=o.current.isDetecting();o.current.stopDetection(),console.log(`Was detecting: ${B}`)}const R=await ql(k?"3d":"2d",X);if(R.setModelProvider(de,t.current),"setDetectionInterval"in R&&R.setDetectionInterval(h),R.setOnPoseDetected(B=>{if(p(B),!D)if(B.poses&&B.poses.length>0){const ee=B.poses[0];if(ee.keypoints){const xe=ar(ee.keypoints,h,X.minConfidence||.3);Y(xe)}}else Y(null)}),"updateConnectionsForModel"in R&&de){const B=de.getConnections();B&&R.updateConnectionsForModel(B)}o.current=R,n&&(console.log("Starting detection..."),R.startDetection()),console.log(`Successfully switched to ${k?"3D":"2D"} mode`)}catch(R){console.error("Error updating view mode:",R)}})()},[k,ue,de]),T.useEffect(()=>{if(o.current&&"updateConfig"in o.current&&typeof o.current.updateConfig=="function"){const $={showBoundingBox:S,boundingBoxColor:"#00FFFF",boundingBoxThickness:2};o.current.updateConfig($)}},[S]),T.useEffect(()=>{o.current&&(n?(D&&(L(!1),G({layers:[],activeLayerId:null,draggedKeypointIndex:null})),o.current.startDetection()):o.current.stopDetection())},[n,D]),T.useEffect(()=>{if(!o.current||!t.current||n)return;const $=async()=>{try{console.log("Video time changed to:",r,"- running single pose detection"),"runSingleDetection"in o.current?o.current.runSingleDetection():(o.current.startDetection(),setTimeout(()=>{o.current&&!n&&o.current.stopDetection()},100))}catch(B){console.error("Error running single pose detection on time change:",B)}};Math.abs(r)>.1&&$()},[r,n]);const Z=$=>{if(console.log("🎯 Mouse down in manual edit mode:",D,"activeLayerId:",z.activeLayerId),!D||!z.activeLayerId)return;const R=z.layers.find(fe=>fe.id===z.activeLayerId);if(!R||!R.isEditable){console.log("❌ No active editable layer found");return}console.log("✅ Active layer found:",R.id,"keypoints:",R.keypoints.length);const B=c.current,ee=t.current;if(!B||!ee)return;const xe=B.getBoundingClientRect(),Ze=$.clientX-xe.left,We=$.clientY-xe.top,Et=B.width/B.clientWidth,Ot=B.height/B.clientHeight,lt=Ze*Et,ct=We*Ot,Nt=ee.videoWidth/B.width,Tt=ee.videoHeight/B.height,dt=lt*Nt,ve=ct*Tt;console.log("📍 Click position:",{mouse:{x:Ze,y:We},canvas:{x:lt,y:ct},video:{x:dt,y:ve},videoNative:{w:ee.videoWidth,h:ee.videoHeight},canvasSize:{w:B.width,h:B.height}});const ut=20;for(let fe=0;fe<R.keypoints.length;fe++){const ye=R.keypoints[fe];if(ye&&ye.score>.3){const hn=Math.sqrt(Math.pow(dt-ye.x,2)+Math.pow(ve-ye.y,2));if(console.log(`🔍 Keypoint ${fe}:`,{x:ye.x,y:ye.y,distance:hn,radius:ut}),hn<=ut){console.log("🎯 HIT! Keypoint",fe,"selected for dragging"),G(Kr=>({...Kr,draggedKeypointIndex:fe})),$.preventDefault();return}}}console.log("❌ No keypoint found within radius")},A=$=>{if(!D||!z.activeLayerId||z.draggedKeypointIndex===null)return;const R=c.current,B=t.current;if(!R||!B)return;const ee=R.getBoundingClientRect(),xe=$.clientX-ee.left,Ze=$.clientY-ee.top,We=R.width/R.clientWidth,Et=R.height/R.clientHeight,Ot=xe*We,lt=Ze*Et,ct=B.videoWidth/R.width,Nt=B.videoHeight/R.height,Tt=Ot*ct,dt=lt*Nt;G(ve=>{const ut=ve.layers.map(fe=>{if(fe.id===ve.activeLayerId&&fe.isEditable){const ye=[...fe.keypoints];return ve.draggedKeypointIndex!==null&&ye[ve.draggedKeypointIndex]&&(ye[ve.draggedKeypointIndex]={...ye[ve.draggedKeypointIndex],x:Tt,y:dt}),{...fe,keypoints:ye}}return fe});return{...ve,layers:ut}})},K=()=>{G($=>({...$,draggedKeypointIndex:null}))};T.useEffect(()=>{if(!c.current||!t.current||!o.current)return;const $=c.current,R=t.current;if(D&&z.layers.length>0){const B=$.getContext("2d");B&&B.clearRect(0,0,$.width,$.height),z.layers.sort((ee,xe)=>ee.createdAt-xe.createdAt).forEach(ee=>{if(ee.isVisible){const xe={poses:[{keypoints:ee.keypoints,score:1}],timestamp:Date.now()},We={...{...X},keypointColor:ee.isEditable?"#FF4444":"#888888",skeletonColor:ee.isEditable?"#FF4444":"#888888",keypointSize:ee.isEditable?8:4};B&&(B.globalAlpha=ee.opacity),o.current&&"updateConfig"in o.current&&typeof o.current.updateConfig=="function"&&o.current.updateConfig(We),o.current&&o.current.renderPoses($,xe,R.clientWidth,R.clientHeight),B&&(B.globalAlpha=1)}}),o.current&&"updateConfig"in o.current&&typeof o.current.updateConfig=="function"&&o.current.updateConfig(X)}else a&&o.current.renderPoses($,a,R.clientWidth,R.clientHeight)},[a,z,D,X,t.current?.clientWidth,t.current?.clientHeight]),T.useEffect(()=>{const $=()=>{if(c.current&&t.current){const R=c.current,B=t.current;R.width=B.clientWidth,R.height=B.clientHeight,o.current&&a&&o.current.renderPoses(R,a,B.clientWidth,B.clientHeight)}};return window.addEventListener("resize",$),$(),()=>window.removeEventListener("resize",$)},[a]);const se=()=>{b($=>!$)},oe=()=>{const $=H();return`${$.type.toUpperCase()} ${$.model.toUpperCase()}`},Ce=$=>{O($)},Je=()=>{const{schema:$}=W(),R={};Object.entries($.properties).forEach(([B,ee])=>{ee.default!==void 0&&(R[B]=ee.default)}),O(R)},Re=()=>{console.log("Applying model settings:",_);const $=H(),R={...$,options:{...$.options,..._}};t.current&&F(t.current,R).then(()=>{console.log("Model reloaded with new settings")}).catch(B=>{console.error("Failed to reload model with new settings:",B),y(`Failed to apply settings: ${B.message}`)}),I(!1)},Dt=()=>{I(!1)},zr=async()=>{if(!E.trim()){M(!1);return}const $=c.current,R=t.current;if(!$){console.error("Canvas not available for screenshot"),M(!1);return}const B=await V({fileName:E,canvas:$,videoElement:R,includeVideoBackground:!0,format:"png"});B.success?console.log(`Screenshot saved: ${B.fileName}`):console.error(`Screenshot failed: ${B.error}`),M(!1)},Br=()=>{M(!1)},Vr=()=>{if(a&&a.poses.length>0){const $=a.poses[0];if($.keypoints)return{id:`ai-capture-${Date.now()}`,name:"AI Detection Copy",keypoints:[...$.keypoints],isEditable:!0,isVisible:!0,opacity:1,createdAt:Date.now()}}return null},Wr=()=>{const $=c.current,R=$?$.width/2:400,B=$?$.height/2:300,ee=[{x:R,y:B-80,score:1,name:"nose"},{x:R-10,y:B-85,score:1,name:"left_eye"},{x:R+10,y:B-85,score:1,name:"right_eye"},{x:R-15,y:B-75,score:1,name:"left_ear"},{x:R+15,y:B-75,score:1,name:"right_ear"},{x:R-30,y:B-30,score:1,name:"left_shoulder"},{x:R+30,y:B-30,score:1,name:"right_shoulder"},{x:R-50,y:B+20,score:1,name:"left_elbow"},{x:R+50,y:B+20,score:1,name:"right_elbow"},{x:R-60,y:B+70,score:1,name:"left_wrist"},{x:R+60,y:B+70,score:1,name:"right_wrist"},{x:R-20,y:B+40,score:1,name:"left_hip"},{x:R+20,y:B+40,score:1,name:"right_hip"},{x:R-25,y:B+120,score:1,name:"left_knee"},{x:R+25,y:B+120,score:1,name:"right_knee"},{x:R-30,y:B+200,score:1,name:"left_ankle"},{x:R+30,y:B+200,score:1,name:"right_ankle"}];return{id:`default-pose-${Date.now()}`,name:"Default Pose",keypoints:ee,isEditable:!0,isVisible:!0,opacity:1,createdAt:Date.now()}},Hr=()=>{if(D)G({layers:[],activeLayerId:null,draggedKeypointIndex:null}),console.log("Exiting manual edit mode");else{re.current=a?.timestamp||Date.now();let $=Vr();$||($=Wr());const R=a&&a.poses.length>0?[{id:"ai-original",name:"AI Detection",keypoints:a.poses[0].keypoints||[],isEditable:!1,isVisible:!0,opacity:.4,createdAt:Date.now()-1},$]:[$];G({layers:R,activeLayerId:$.id,draggedKeypointIndex:null}),console.log("Entering manual edit mode with",R.length,"layers")}L(!D)};T.useEffect(()=>{if(D&&z.activeLayerId){const $=z.layers.find(R=>R.id===z.activeLayerId);if($&&$.keypoints){const R=ar($.keypoints,h,.3);Y(R)}}},[z,D,h]),T.useEffect(()=>{const $=R=>{J.current&&!J.current.contains(R.target)&&x(!1)};return document.addEventListener("mousedown",$),()=>document.removeEventListener("mousedown",$)},[]);const qr=T.useMemo(()=>{if(D&&z.activeLayerId){const $=z.layers.find(R=>R.id===z.activeLayerId);if($&&$.keypoints)return console.log("🎨 Using manual edit layer for 3D panel:",$.id),{poses:[{keypoints:$.keypoints,score:1}],timestamp:re.current}}return a},[D,z.activeLayerId,z.layers,a]);return!ue||j||pe?s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/70 backdrop-blur-sm",children:[s.jsxs("div",{className:"text-xl mb-4 text-white",children:["Loading ",oe()," model..."]}),s.jsx("div",{className:"w-64 h-2 bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300 ease-in-out",style:{width:`${m}%`}})}),s.jsxs("div",{className:"mt-2 text-white",children:[m,"%"]}),v&&s.jsx("div",{className:"mt-4 text-red-500",children:v})]}):s.jsxs("div",{className:"absolute inset-0 w-full h-full pointer-events-auto",children:[s.jsxs("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-2",children:[s.jsxs("div",{className:"relative",ref:J,children:[s.jsxs("button",{onClick:()=>x(!g),className:"bg-black/50 hover:bg-black/70 text-white px-3 py-2 rounded-lg text-xs font-medium transition-all flex items-center gap-2",title:"Select AI model",children:[s.jsx("span",{children:h==="movenet"?"MoveNet":h==="tensorflowPosenet"?"PoseNet":"BlazePose"}),s.jsx("svg",{className:`w-3 h-3 transition-transform ${g?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&s.jsx("div",{className:"absolute top-full mt-1 right-0 bg-black/90 backdrop-blur-sm rounded-lg shadow-lg border border-white/20 py-1 min-w-[120px]",children:Object.entries(Sn).map(([$,R])=>s.jsx("button",{onClick:()=>{u($),x(!1)},className:`w-full px-3 py-2 text-xs font-medium text-left transition-all hover:bg-white/10 ${h===$?"bg-blue-600/20 text-blue-300":"text-white/70 hover:text-white"}`,title:`Switch to ${R.model.toUpperCase()} model`,children:$==="movenet"?"MoveNet":$==="tensorflowPosenet"?"PoseNet":"BlazePose"},$))})]}),s.jsx("button",{onClick:()=>M(!0),className:"p-2 rounded-lg transition-all bg-black/50 hover:bg-black/70 text-white",title:"Take screenshot of pose detection",children:s.jsx(Qs,{size:20})}),!n&&s.jsx("button",{onClick:Hr,className:`p-2 rounded-lg transition-all ${D?"bg-[var(--vp-accent)] hover:bg-[var(--vp-accent)]/80 text-white":"bg-black/50 hover:bg-black/70 text-white"}`,title:D?"Exit manual pose editing":"Enable manual pose editing",children:s.jsx(Pr,{size:20})}),s.jsx("button",{onClick:()=>U(!P),className:`p-2 rounded-lg transition-all ${P?"bg-[var(--vp-accent)] hover:bg-[var(--vp-accent)]/80 text-white":"bg-black/50 hover:bg-black/70 text-white"}`,title:P?"Hide angles panel":"Show angles panel",children:s.jsx(gi,{size:20})}),s.jsxs("button",{onClick:()=>I(!0),className:"p-2 rounded-lg transition-all flex items-center gap-2 bg-black/50 hover:bg-black/70 text-white",title:"Configure AI model settings",children:[s.jsx(Ii,{size:20}),s.jsx("span",{className:"text-xs font-medium",children:"CONFIG"})]}),s.jsxs("button",{onClick:se,className:`p-2 rounded-lg transition-all flex items-center gap-2 ${k?"bg-[var(--vp-accent)] hover:bg-[var(--vp-accent)]/80 text-white":"bg-black/50 hover:bg-black/70 text-white"}`,title:k?"Switch to 2D mode":"Switch to 3D mode",children:[s.jsx(mi,{size:20}),s.jsx("span",{className:"text-xs font-medium",children:k?"3D":"2D"})]})]}),s.jsx("canvas",{ref:c,className:`absolute top-0 left-0 w-full h-full ${D?"cursor-grab":"cursor-crosshair"}`,style:{objectFit:"contain",pointerEvents:D?"auto":"none"},onMouseDown:$=>{console.log("🖱️ Canvas mouse down event fired!",{isManualEditMode:D,target:$.target}),Z($)},onMouseMove:A,onMouseUp:K,onMouseLeave:K}),s.jsx(Ql,{angles:q,isVisible:P,modelType:oe()}),k&&s.jsx(ec,{poseResult:qr,isVisible:k,modelType:oe(),connections:de?.getConnections()||[],minConfidence:X.minConfidence}),a&&a.poses.length>0&&s.jsxs("div",{className:"absolute top-4 left-4 bg-black/50 text-white px-3 py-2 rounded-lg text-xs font-medium z-30",children:[a.poses.length," poses • ",oe()]}),N&&s.jsx($r,{saveFileName:E,setSaveFileName:C,onSubmit:zr,onCancel:Br}),w&&s.jsx(Vl,{title:"Configuration",description:`Customize rendering and performance settings for the ${oe()} AI model`,schema:W().schema,uiSchema:W().uiSchema,currentSettings:_,currentModel:oe(),onSettingsChange:Ce,onReset:Je,onCancel:Dt,onApply:Re})]})}const nc="/assets/linceIcon-U2517Fr_.svg";function rc({videoSource:t,playerType:e="file",autoPlay:n=!1,muted:r=!1,initialDrawingMode:i=!1,initialPoseDetection:l=!1,initial3DMode:c=!1,chapters:o=[]}){const a=T.useRef(null),p=T.useRef(null),m=T.useRef(null),[f,v]=T.useState(n),[y,k]=T.useState(0),[b,j]=T.useState(0),[d,h]=T.useState(1),[u,g]=T.useState(r),[x,S]=T.useState(!1),[w,I]=T.useState(1),[_,O]=T.useState(i?"drawing":l?"pose":"video"),[N,M]=T.useState(!1),[E,C]=T.useState(!1),[P,U]=T.useState(!1);T.useEffect(()=>{if(a.current){const A=a.current.getInternalPlayer();A&&(e==="youtube"?m.current=null:m.current=A)}},[a.current,e]),T.useEffect(()=>{if(!p.current)return;const K=()=>{S(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",K),()=>{document.removeEventListener("fullscreenchange",K)}},[]),T.useEffect(()=>{const A=()=>{const K=p.current;K&&M(K.clientWidth<800)};return A(),window.addEventListener("resize",A),()=>{window.removeEventListener("resize",A)}},[]);const q=()=>{v(!f)},Y=()=>{g(!u)},D=A=>{h(A[0]),A[0]===0?g(!0):u&&g(!1)},L=A=>{const K=a.current;K&&(K.seekTo(A[0],"seconds"),k(A[0]))},z=()=>{const A=p.current;A&&(document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():A.requestFullscreen&&A.requestFullscreen())},G=A=>{const K=Math.floor(A/60),se=Math.floor(A%60);return`${K}:${se<10?"0":""}${se}`},J=()=>{const A=a.current;if(!A)return;const K=Math.min(y+10,b);A.seekTo(K,"seconds"),k(K)},re=()=>{const A=a.current;if(!A)return;const K=Math.max(y-10,0);A.seekTo(K,"seconds"),k(K)},de=()=>{const A=a.current;A&&(A.seekTo(0,"seconds"),k(0),v(!0))},ue=A=>{const K=a.current;K&&(K.seekTo(A,"seconds"),k(A))},pe=A=>{k(A.playedSeconds)},F=A=>{j(A)},V=()=>{v(!1)},W=()=>{if(N)return null;const K="text-white bg-white/5 hover:bg-white/15 data-[state=active]:bg-white/20 data-[state=active]:text-white rounded-full transition-all px-4 "+(N?" text-xs px-2 h-7 flex-1":"");return s.jsx(br,{value:_,onValueChange:O,className:"w-auto",children:s.jsxs(wr,{className:"bg-transparent border-0 gap-1.5 "+(N?"h-8 w-full":""),children:[s.jsx(st,{value:"video",className:K,children:"Video"}),s.jsx(st,{value:"drawing",className:K,children:"Drawing"}),s.jsx(st,{value:"pose",className:K,children:"Pose"})]})})},X=()=>{C(!E)},H=async()=>{if(m.current)try{document.pictureInPictureElement?(await document.exitPictureInPicture(),U(!1)):(await m.current.requestPictureInPicture(),U(!0))}catch(A){console.error("Failed to toggle Picture-in-Picture mode:",A)}},Z=({isSmallVideo:A,allowIframeInteraction:K,playerType:se})=>s.jsx("div",{className:"lince-video-player-controls bg-gradient-to-t from-black/95 via-black/90 to-black/80 backdrop-blur-sm",style:{pointerEvents:K&&se==="youtube"?"none":"auto"},children:s.jsxs("div",{className:"flex flex-col gap-1.5 px-3 py-1.5",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("div",{className:"text-white text-xs font-medium min-w-[80px] text-center",children:[G(y)," / ",G(b)]}),s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Pn,{value:[y],min:0,max:b||100,step:.01,onValueChange:L,className:"w-full [&>span:first-child]:h-1.5 [&>span:first-child]:bg-white/30 [&_[role=slider]]:bg-[#43a0a0] [&_[role=slider]]:w-4 [&_[role=slider]]:h-4 [&_[role=slider]]:border-0 [&>span:first-child_span]:bg-[#43a0a0] [&_[role=slider]:focus-visible]:ring-0 [&_[role=slider]:focus-visible]:ring-offset-0"}),o.map(oe=>{const Ce=`${oe.startTime/(b||100)*100}%`;return s.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-white cursor-pointer hover:scale-125 transition-transform group",style:{left:Ce,zIndex:10},onClick:()=>ue(oe.startTime),children:s.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-black/80 text-white text-xs rounded px-2 py-1 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:[G(oe.startTime)," - ",oe.title]})},oe.id?oe.id:oe.title)})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:`flex items-center ${A?"space-x-1":"space-x-2"}`,children:[s.jsx("img",{src:nc,alt:"Lince",className:`${A?"w-6 h-6":"w-8 h-8"}`,style:{filter:"brightness(0) saturate(100%) invert(78%) sepia(14%) saturate(1291%) hue-rotate(131deg) brightness(94%) contrast(89%)"}}),s.jsx(Ee,{children:s.jsxs(Oe,{children:[s.jsx(Ne,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white bg-white/5 hover:bg-white/15 rounded-full transition-all ${A?"w-8 h-8 p-1":"w-9 h-9"}`,onClick:q,children:f?s.jsx(_i,{className:`${A?"w-4 h-4":"w-5 h-5"}`}):s.jsx($n,{className:`${A?"w-4 h-4":"w-5 h-5"}`})})}),s.jsx(Te,{children:s.jsx("p",{children:f?"Pause":"Play"})})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{children:[s.jsx(Ne,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white bg-white/5 hover:bg-white/15 rounded-full transition-all ${A?"w-8 h-8 p-1":"w-9 h-9"}`,onClick:re,children:s.jsx(Ei,{className:`${A?"w-4 h-4":"w-5 h-5"}`})})}),s.jsx(Te,{children:s.jsx("p",{children:"Rewind 10s"})})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{children:[s.jsx(Ne,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white bg-white/5 hover:bg-white/15 rounded-full transition-all ${A?"w-8 h-8 p-1":"w-9 h-9"}`,onClick:J,children:s.jsx(Ni,{className:`${A?"w-4 h-4":"w-5 h-5"}`})})}),s.jsx(Te,{children:s.jsx("p",{children:"Forward 10s"})})]})}),s.jsx(Ee,{children:s.jsxs(Oe,{children:[s.jsx(Ne,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white bg-white/5 hover:bg-white/15 rounded-full transition-all ${A?"w-8 h-8 p-1":"w-9 h-9"}`,onClick:de,children:s.jsx(Oi,{className:`${A?"w-4 h-4":"w-5 h-5"}`})})}),s.jsx(Te,{children:s.jsx("p",{children:"Restart"})})]})}),s.jsxs("div",{className:`flex items-center ${A?"ml-1 space-x-1":"ml-2 space-x-2"}`,children:[s.jsx(Ee,{children:s.jsxs(Oe,{children:[s.jsx(Ne,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white bg-white/5 hover:bg-white/15 rounded-full transition-all ${A?"w-8 h-8 p-1":"w-9 h-9"}`,onClick:Y,children:u||d===0?s.jsx(Li,{className:`${A?"w-4 h-4":"w-5 h-5"}`}):s.jsx(Ri,{className:`${A?"w-4 h-4":"w-5 h-5"}`})})}),s.jsx(Te,{children:s.jsx("p",{children:u?"Unmute":"Mute"})})]})}),s.jsx("div",{className:`${A?"w-16":"w-24"}`,children:s.jsx(Pn,{value:[u?0:d],min:0,max:1,step:.01,onValueChange:D,className:"[&>span:first-child]:h-1 [&>span:first-child]:bg-white/30 [&_[role=slider]]:bg-white [&_[role=slider]]:w-3 [&_[role=slider]]:h-3 [&_[role=slider]]:border-0 [&>span:first-child_span]:bg-white [&_[role=slider]:focus-visible]:ring-0 [&_[role=slider]:focus-visible]:ring-offset-0"})}),s.jsx(Ui,{currentSpeed:w,onSpeedChange:I,isSmallVideo:A}),s.jsx(Ee,{children:s.jsxs(Oe,{children:[s.jsx(Ne,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white bg-white/5 hover:bg-white/15 rounded-full transition-all ${A?"w-8 h-8 p-1":"w-9 h-9"}`,onClick:z,children:x?s.jsx(ji,{className:`${A?"w-4 h-4":"w-5 h-5"}`}):s.jsx(Si,{className:`${A?"w-4 h-4":"w-5 h-5"}`})})}),s.jsx(Te,{children:s.jsx("p",{children:x?"Exit Fullscreen":"Fullscreen"})})]})}),se==="file"&&s.jsx(Ee,{children:s.jsxs(Oe,{children:[s.jsx(Ne,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white bg-white/5 hover:bg-white/15 rounded-full transition-all ${A?"w-8 h-8 p-1":"w-9 h-9"}`,onClick:H,children:s.jsx(Di,{className:`${A?"w-4 h-4":"w-5 h-5"} ${P?"text-blue-400":""}`})})}),s.jsx(Te,{children:s.jsx("p",{children:P?"Exit Picture-in-Picture":"Picture-in-Picture"})})]})})]})]}),!A&&s.jsx("div",{className:"flex items-center space-x-2",children:W()})]})]})});return s.jsxs("div",{ref:p,className:"lince-video-player-container relative w-full max-w-4xl overflow-hidden rounded-lg bg-black",children:[s.jsxs("div",{className:"relative aspect-video",children:[e==="youtube"&&s.jsx("div",{className:"absolute top-2 right-2 z-50",children:s.jsx(Ee,{children:s.jsxs(Oe,{children:[s.jsx(Ne,{asChild:!0,children:s.jsx(le,{variant:"outline",size:"icon",className:`bg-black/50 border-white/20 hover:bg-black/70 ${E?"text-blue-400":"text-white"}`,onClick:X,children:E?s.jsx(Ci,{className:"h-4 w-4"}):s.jsx(Pi,{className:"h-4 w-4"})})}),s.jsx(Te,{children:s.jsx("p",{children:E?"Disable YouTube controls interaction":"Enable YouTube controls interaction"})})]})})}),s.jsx(pi,{ref:a,url:t,className:"w-full h-full object-contain",width:"100%",height:"100%",playing:f,volume:d,muted:u,playbackRate:w,onProgress:pe,onDuration:F,onEnded:V,onClick:q,onReady:()=>{if(a.current){const A=a.current.getInternalPlayer();A&&e==="file"&&(m.current=A)}},playsinline:!0,config:{file:{attributes:{controlsList:"nodownload"}},youtube:{playerVars:{modestbranding:1,rel:0,showinfo:0,iv_load_policy:3,fs:0,disablekb:1,controls:_==="drawing"?0:1}}}}),!f&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{pointerEvents:E&&e==="youtube"?"none":"auto"},children:s.jsx(le,{variant:"ghost",size:"icon",className:"w-20 h-20 rounded-full bg-black/30 text-white hover:bg-black/50",onClick:q,children:s.jsx($n,{className:"w-10 h-10"})})}),_==="drawing"&&s.jsx("div",{style:{pointerEvents:E&&e==="youtube"?"none":"auto"},children:s.jsx(Hl,{isPlaying:f,isFullscreen:x,isSmallVideo:N,playerRef:a})}),_==="pose"&&!N&&s.jsx("div",{style:{pointerEvents:E&&e==="youtube"?"none":"auto"},children:s.jsx(Us,{children:s.jsx(tc,{videoRef:m,is3DMode:c,isPlaying:f,currentTime:y})})})]}),s.jsx(Z,{isSmallVideo:N,allowIframeInteraction:E,playerType:e}),o&&o.length>0&&s.jsx($i,{chapters:o,currentTime:y,onChapterSelect:ue})]})}const sc=({videoSource:t,className:e,style:n,playerType:r="file",autoPlay:i=!1,muted:l=!1,initialDrawingMode:c=!1,initialPoseDetection:o=!1,initial3DMode:a=!1,chapters:p=[]})=>s.jsx("div",{className:e,style:n,children:s.jsx(rc,{videoSource:t,playerType:r,autoPlay:i,muted:l,initialDrawingMode:c,initialPoseDetection:o,initial3DMode:a,chapters:p})}),ic=({className:t,style:e})=>{const n=zs(),r=Bs(l=>l.lince.videos);T.useEffect(()=>{n(Vs()),n(Ws()),n(Hs()),qs()},[n]);const i=()=>{const l=r&&r.length>0?r[0]:null,c=Js.url.API_BASE_URL;if(!l)return s.jsx(ti,{message:"No video available",description:"Please upload a video to start analyzing",type:"info",showIcon:!0});const o=c+l.url,p=o.includes("youtube.com")||o.includes("youtu.be")?"youtube":"file";return s.jsx(sc,{videoSource:o,playerType:p,style:{width:"100%",height:"100%"}})};return s.jsx(Ks,{children:s.jsx(ei,{className:t,style:{...e,height:"100%",overflow:"hidden",padding:0},children:s.jsxs("div",{style:{display:"flex",width:"100%",height:"calc(100% - 60px)",overflow:"hidden"},children:[s.jsx(Ys,{defaultSize:{width:"65%",height:"100%"},minWidth:"400",minHeight:"500",maxWidth:"80%",enable:{right:!0,top:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},children:s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[s.jsx(_n,{style:{minHeight:"400px",flex:"0 0 auto"},gutter:0,children:s.jsx(kn,{span:24,style:{height:"auto"},children:i()})}),s.jsx(_n,{style:{flex:"1 1 auto",overflow:"auto",marginTop:"8px"},gutter:0,children:s.jsx(kn,{span:24,children:s.jsx(Xs,{})})})]})}),s.jsx("div",{style:{flex:1,minWidth:"300px",overflow:"hidden",display:"flex",flexDirection:"column",paddingLeft:"8px"},children:s.jsx(Gs,{})})]})})})},ac=()=>s.jsxs(s.Fragment,{children:[s.jsx(Zs,{pageName:"AIStudio"}),s.jsx("div",{className:"overflow-hidden rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:s.jsx(ic,{})})]}),hc=Object.freeze(Object.defineProperty({__proto__:null,default:ac},Symbol.toStringTag,{value:"Module"}));export{hc as A,uc as B,ri as a,jt as r};
