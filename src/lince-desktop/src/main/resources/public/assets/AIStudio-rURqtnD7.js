const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/YouTube-DE-pSXRM.js","assets/index-DdjfOgen.js","assets/index-Bh_aMxAd.css","assets/SoundCloud-mhR1lPki.js","assets/Vimeo-CrZKjPEw.js","assets/Mux-C0pHj-gj.js","assets/Facebook-DbpxfP18.js","assets/Streamable-CVZBxCVj.js","assets/Wistia-BQOr7Cqq.js","assets/Twitch-BsEMugN3.js","assets/DailyMotion-CIDlA4Qi.js","assets/Mixcloud-BB9d6qUI.js","assets/Vidyard-BEvBfadN.js","assets/Kaltura-COBhxIL8.js","assets/FilePlayer-Dwu7Y9Aw.js","assets/Preview-DlRomXi8.js","assets/opencv-B7T7lWMu.js","assets/___vite-browser-external_commonjs-proxy-DSc3qcS5.js","assets/PoseDetection3DProvider-UzNhqUVu.js","assets/camera-o3831Zuu.js","assets/index-DswTrfOC.js","assets/index-Cz4D0QpQ.js","assets/PoseDetection2DProvider-4Nuqui7U.js"])))=>i.map(i=>d[i]);
import{cI as ir,cJ as he,cK as Xn,cL as Gn,cM as It,ca as Jn,M as ae,d as T,I as s,cN as on,cO as ln,cP as le,cQ as cn,cR as Zn,cS as nt,cT as ie,cU as dn,cV as Re,cW as ot,cX as un,cY as Qn,cZ as ar,c_ as Ye,c$ as Pe,d0 as te,d1 as xe,d2 as De,d3 as hn,d4 as fn,d5 as ce,d6 as We,d7 as tr,d8 as pt,d9 as Ve,da as Xe,db as pn,dc as mn,dd as hr,de as ye,df as gn,dg as es,dh as ts,di as rs,dj as ns,dk as yn,dl as wt,dm as fr,dn as ss,dp as is,dq as as,dr as os,ds as ls,dt as cs,du as ds,dv as us,dw as hs,dx as fs,dy as pr,dz as ps,dA as mr,dB as et,dC as ms,dD as gs,dE as ys,dF as xs,dG as vs,dH as bs,dI as ws,dJ as oe,dK as gr,dL as Ss,dM as Le,dN as St,dO as yr,dP as rr,dQ as js,dR as Cs,dS as or,dT as mt,dU as jt,dV as xn,dW as Je,dX as xr,dY as Ps,dZ as _s,d_ as vn,d$ as ks,e0 as At,e1 as Ds,e2 as Es,e3 as vr,e4 as Os,e5 as Ns,l as st,e6 as bn,e7 as wn,e8 as it,e9 as br,ea as Ts,eb as gt,ec as Is,ed as $e,ee as As,ef as Ms,eg as Fs,eh as wr,ei as Sr,ej as jr,ek as Rs,el as Ls,em as $s,en as zs,eo as Ne,ep as Te,eq as Ie,er as Ae,es as Us,et as Cr,O as Bs,Q as Vs,bP as Ws,b4 as Hs,bQ as qs,bI as Ks,bJ as Ys,cx as Xs,R as Pr,n as _r,bM as Gs,cy as Js,a8 as Zs,aN as Qs}from"./index-DdjfOgen.js";import{C as ei}from"./camera-o3831Zuu.js";import{L as ti}from"./index-DswTrfOC.js";import{A as ri}from"./index-Cz4D0QpQ.js";var Mt,kr;function ni(){if(kr)return Mt;kr=1,Mt=function(i,l,c){var o=document.head||document.getElementsByTagName("head")[0],a=document.createElement("script");typeof l=="function"&&(c=l,l={}),l=l||{},c=c||function(){},a.type=l.type||"text/javascript",a.charset=l.charset||"utf8",a.async="async"in l?!!l.async:!0,a.src=i,l.attrs&&t(a,l.attrs),l.text&&(a.text=""+l.text);var p="onload"in a?e:r;p(a,c),a.onload||e(a,c),o.appendChild(a)};function t(n,i){for(var l in i)n.setAttribute(l,i[l])}function e(n,i){n.onload=function(){this.onerror=this.onload=null,i(null,n)},n.onerror=function(){this.onerror=this.onload=null,i(new Error("Failed to load "+this.src),n)}}function r(n,i){n.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,i(null,n))}}return Mt}var Ft,Dr;function Sn(){if(Dr)return Ft;Dr=1;var t=function(h){return e(h)&&!r(h)};function e(d){return!!d&&typeof d=="object"}function r(d){var h=Object.prototype.toString.call(d);return h==="[object RegExp]"||h==="[object Date]"||l(d)}var n=typeof Symbol=="function"&&Symbol.for,i=n?Symbol.for("react.element"):60103;function l(d){return d.$$typeof===i}function c(d){return Array.isArray(d)?[]:{}}function o(d,h){return h.clone!==!1&&h.isMergeableObject(d)?b(c(d),d,h):d}function a(d,h,u){return d.concat(h).map(function(g){return o(g,u)})}function p(d,h){if(!h.customMerge)return b;var u=h.customMerge(d);return typeof u=="function"?u:b}function m(d){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(d).filter(function(h){return Object.propertyIsEnumerable.call(d,h)}):[]}function f(d){return Object.keys(d).concat(m(d))}function v(d,h){try{return h in d}catch{return!1}}function y(d,h){return v(d,h)&&!(Object.hasOwnProperty.call(d,h)&&Object.propertyIsEnumerable.call(d,h))}function _(d,h,u){var g={};return u.isMergeableObject(d)&&f(d).forEach(function(x){g[x]=o(d[x],u)}),f(h).forEach(function(x){y(d,x)||(v(d,x)&&u.isMergeableObject(h[x])?g[x]=p(x,u)(d[x],h[x],u):g[x]=o(h[x],u))}),g}function b(d,h,u){u=u||{},u.arrayMerge=u.arrayMerge||a,u.isMergeableObject=u.isMergeableObject||t,u.cloneUnlessOtherwiseSpecified=o;var g=Array.isArray(h),x=Array.isArray(d),S=g===x;return S?g?u.arrayMerge(d,h,u):_(d,h,u):o(h,u)}b.all=function(h,u){if(!Array.isArray(h))throw new Error("first argument should be an array");return h.reduce(function(g,x){return b(g,x,u)},{})};var C=b;return Ft=C,Ft}var Rt,Er;function Ct(){if(Er)return Rt;Er=1;var t=Object.create,e=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(D,R)=>{for(var $ in R)e(D,$,{get:R[$],enumerable:!0})},o=(D,R,$,G)=>{if(R&&typeof R=="object"||typeof R=="function")for(let J of n(R))!l.call(D,J)&&J!==$&&e(D,J,{get:()=>R[J],enumerable:!(G=r(R,J))||G.enumerable});return D},a=(D,R,$)=>($=D!=null?t(i(D)):{},o(!D||!D.__esModule?e($,"default",{value:D,enumerable:!0}):$,D)),p=D=>o(e({},"__esModule",{value:!0}),D),m={};c(m,{callPlayer:()=>P,getConfig:()=>A,getSDK:()=>N,isBlobUrl:()=>U,isMediaStream:()=>j,lazy:()=>_,omit:()=>E,parseEndTime:()=>S,parseStartTime:()=>x,queryString:()=>I,randomString:()=>w,supportsWebKitPresentationMode:()=>K}),Rt=p(m);var f=a(ir()),v=a(ni()),y=a(Sn());const _=D=>f.default.lazy(async()=>{const R=await D();return typeof R.default=="function"?R:R.default}),b=/[?&#](?:start|t)=([0-9hms]+)/,C=/[?&#]end=([0-9hms]+)/,d=/(\d+)(h|m|s)/g,h=/^\d+$/;function u(D,R){if(D instanceof Array)return;const $=D.match(R);if($){const G=$[1];if(G.match(d))return g(G);if(h.test(G))return parseInt(G)}}function g(D){let R=0,$=d.exec(D);for(;$!==null;){const[,G,J]=$;J==="h"&&(R+=parseInt(G,10)*60*60),J==="m"&&(R+=parseInt(G,10)*60),J==="s"&&(R+=parseInt(G,10)),$=d.exec(D)}return R}function x(D){return u(D,b)}function S(D){return u(D,C)}function w(){return Math.random().toString(36).substr(2,5)}function I(D){return Object.keys(D).map(R=>`${R}=${D[R]}`).join("&")}function k(D){return window[D]?window[D]:window.exports&&window.exports[D]?window.exports[D]:window.module&&window.module.exports&&window.module.exports[D]?window.module.exports[D]:null}const O={},N=function(R,$,G=null,J=()=>!0,se=v.default){const de=k($);return de&&J(de)?Promise.resolve(de):new Promise((ue,me)=>{if(O[R]){O[R].push({resolve:ue,reject:me});return}O[R]=[{resolve:ue,reject:me}];const M=B=>{O[R].forEach(V=>V.resolve(B))};if(G){const B=window[G];window[G]=function(){B&&B(),M(k($))}}se(R,B=>{B?(O[R].forEach(V=>V.reject(B)),O[R]=null):G||M(k($))})})};function A(D,R){return(0,y.default)(R.config,D.config)}function E(D,...R){const $=[].concat(...R),G={},J=Object.keys(D);for(const se of J)$.indexOf(se)===-1&&(G[se]=D[se]);return G}function P(D,...R){if(!this.player||!this.player[D]){let $=`ReactPlayer: ${this.constructor.displayName} player could not call %c${D}%c – `;return this.player?this.player[D]||($+="The method was not available"):$+="The player was not available",console.warn($,"font-weight: bold",""),null}return this.player[D](...R)}function j(D){return typeof window<"u"&&typeof window.MediaStream<"u"&&D instanceof window.MediaStream}function U(D){return/^blob:/.test(D)}function K(D=document.createElement("video")){const R=/iPhone|iPod/.test(navigator.userAgent)===!1;return D.webkitSupportsPresentationMode&&typeof D.webkitSetPresentationMode=="function"&&R}function Y(D){return D}return Rt}var Lt,Or;function si(){if(Or)return Lt;Or=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,i=(P,j)=>{for(var U in j)t(P,U,{get:j[U],enumerable:!0})},l=(P,j,U,K)=>{if(j&&typeof j=="object"||typeof j=="function")for(let Y of r(j))!n.call(P,Y)&&Y!==U&&t(P,Y,{get:()=>j[Y],enumerable:!(K=e(j,Y))||K.enumerable});return P},c=P=>l(t({},"__esModule",{value:!0}),P),o={};i(o,{AUDIO_EXTENSIONS:()=>w,DASH_EXTENSIONS:()=>O,FLV_EXTENSIONS:()=>N,HLS_EXTENSIONS:()=>k,MATCH_URL_DAILYMOTION:()=>u,MATCH_URL_FACEBOOK:()=>y,MATCH_URL_FACEBOOK_WATCH:()=>_,MATCH_URL_KALTURA:()=>S,MATCH_URL_MIXCLOUD:()=>g,MATCH_URL_MUX:()=>v,MATCH_URL_SOUNDCLOUD:()=>m,MATCH_URL_STREAMABLE:()=>b,MATCH_URL_TWITCH_CHANNEL:()=>h,MATCH_URL_TWITCH_VIDEO:()=>d,MATCH_URL_VIDYARD:()=>x,MATCH_URL_VIMEO:()=>f,MATCH_URL_WISTIA:()=>C,MATCH_URL_YOUTUBE:()=>p,VIDEO_EXTENSIONS:()=>I,canPlay:()=>E}),Lt=c(o);var a=Ct();const p=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,m=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,f=/vimeo\.com\/(?!progressive_redirect).+/,v=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,y=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,_=/^https?:\/\/fb\.watch\/.+$/,b=/streamable\.com\/([a-z0-9]+)$/,C=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,d=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,h=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,u=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,g=/mixcloud\.com\/([^/]+\/[^/]+)/,x=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,S=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,w=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,I=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,k=/\.(m3u8)($|\?)/i,O=/\.(mpd)($|\?)/i,N=/\.(flv)($|\?)/i,A=P=>{if(P instanceof Array){for(const j of P)if(typeof j=="string"&&A(j)||A(j.src))return!0;return!1}return(0,a.isMediaStream)(P)||(0,a.isBlobUrl)(P)?!0:w.test(P)||I.test(P)||k.test(P)||O.test(P)||N.test(P)},E={youtube:P=>P instanceof Array?P.every(j=>p.test(j)):p.test(P),soundcloud:P=>m.test(P)&&!w.test(P),vimeo:P=>f.test(P)&&!I.test(P)&&!k.test(P),mux:P=>v.test(P),facebook:P=>y.test(P)||_.test(P),streamable:P=>b.test(P),wistia:P=>C.test(P),twitch:P=>d.test(P)||h.test(P),dailymotion:P=>u.test(P),mixcloud:P=>g.test(P),vidyard:P=>x.test(P),kaltura:P=>S.test(P),file:A};return Lt}var $t,Nr;function ii(){if(Nr)return $t;Nr=1;var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,n=Object.prototype.hasOwnProperty,i=(f,v)=>{for(var y in v)t(f,y,{get:v[y],enumerable:!0})},l=(f,v,y,_)=>{if(v&&typeof v=="object"||typeof v=="function")for(let b of r(v))!n.call(f,b)&&b!==y&&t(f,b,{get:()=>v[b],enumerable:!(_=e(v,b))||_.enumerable});return f},c=f=>l(t({},"__esModule",{value:!0}),f),o={};i(o,{default:()=>m}),$t=c(o);var a=Ct(),p=si(),m=[{key:"youtube",name:"YouTube",canPlay:p.canPlay.youtube,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./YouTube-DE-pSXRM.js").then(f=>f.Y),__vite__mapDeps([0,1,2])))},{key:"soundcloud",name:"SoundCloud",canPlay:p.canPlay.soundcloud,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./SoundCloud-mhR1lPki.js").then(f=>f.S),__vite__mapDeps([3,1,2])))},{key:"vimeo",name:"Vimeo",canPlay:p.canPlay.vimeo,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Vimeo-CrZKjPEw.js").then(f=>f.V),__vite__mapDeps([4,1,2])))},{key:"mux",name:"Mux",canPlay:p.canPlay.mux,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Mux-C0pHj-gj.js").then(f=>f.M),__vite__mapDeps([5,1,2])))},{key:"facebook",name:"Facebook",canPlay:p.canPlay.facebook,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Facebook-DbpxfP18.js").then(f=>f.F),__vite__mapDeps([6,1,2])))},{key:"streamable",name:"Streamable",canPlay:p.canPlay.streamable,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Streamable-CVZBxCVj.js").then(f=>f.S),__vite__mapDeps([7,1,2])))},{key:"wistia",name:"Wistia",canPlay:p.canPlay.wistia,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Wistia-BQOr7Cqq.js").then(f=>f.W),__vite__mapDeps([8,1,2])))},{key:"twitch",name:"Twitch",canPlay:p.canPlay.twitch,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Twitch-BsEMugN3.js").then(f=>f.T),__vite__mapDeps([9,1,2])))},{key:"dailymotion",name:"DailyMotion",canPlay:p.canPlay.dailymotion,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./DailyMotion-CIDlA4Qi.js").then(f=>f.D),__vite__mapDeps([10,1,2])))},{key:"mixcloud",name:"Mixcloud",canPlay:p.canPlay.mixcloud,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Mixcloud-BB9d6qUI.js").then(f=>f.M),__vite__mapDeps([11,1,2])))},{key:"vidyard",name:"Vidyard",canPlay:p.canPlay.vidyard,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Vidyard-BEvBfadN.js").then(f=>f.V),__vite__mapDeps([12,1,2])))},{key:"kaltura",name:"Kaltura",canPlay:p.canPlay.kaltura,lazyPlayer:(0,a.lazy)(()=>he(()=>import("./Kaltura-COBhxIL8.js").then(f=>f.K),__vite__mapDeps([13,1,2])))},{key:"file",name:"FilePlayer",canPlay:p.canPlay.file,canEnablePIP:f=>p.canPlay.file(f)&&(document.pictureInPictureEnabled||(0,a.supportsWebKitPresentationMode)())&&!p.AUDIO_EXTENSIONS.test(f),lazyPlayer:(0,a.lazy)(()=>he(()=>import("./FilePlayer-Dwu7Y9Aw.js").then(f=>f.F),__vite__mapDeps([14,1,2])))}];return $t}var Tr=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function ai(t,e){return!!(t===e||Tr(t)&&Tr(e))}function oi(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!ai(t[r],e[r]))return!1;return!0}function li(t,e){e===void 0&&(e=oi);var r,n=[],i,l=!1;function c(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];return l&&r===this&&e(o,n)||(i=t.apply(this,o),l=!0,r=this,n=o),i}return c}const ci=Object.freeze(Object.defineProperty({__proto__:null,default:li},Symbol.toStringTag,{value:"Module"})),di=Xn(ci);var zt,Ir;function jn(){if(Ir)return zt;Ir=1;var t=typeof Element<"u",e=typeof Map=="function",r=typeof Set=="function",n=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(l,c){if(l===c)return!0;if(l&&c&&typeof l=="object"&&typeof c=="object"){if(l.constructor!==c.constructor)return!1;var o,a,p;if(Array.isArray(l)){if(o=l.length,o!=c.length)return!1;for(a=o;a--!==0;)if(!i(l[a],c[a]))return!1;return!0}var m;if(e&&l instanceof Map&&c instanceof Map){if(l.size!==c.size)return!1;for(m=l.entries();!(a=m.next()).done;)if(!c.has(a.value[0]))return!1;for(m=l.entries();!(a=m.next()).done;)if(!i(a.value[1],c.get(a.value[0])))return!1;return!0}if(r&&l instanceof Set&&c instanceof Set){if(l.size!==c.size)return!1;for(m=l.entries();!(a=m.next()).done;)if(!c.has(a.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(l)&&ArrayBuffer.isView(c)){if(o=l.length,o!=c.length)return!1;for(a=o;a--!==0;)if(l[a]!==c[a])return!1;return!0}if(l.constructor===RegExp)return l.source===c.source&&l.flags===c.flags;if(l.valueOf!==Object.prototype.valueOf&&typeof l.valueOf=="function"&&typeof c.valueOf=="function")return l.valueOf()===c.valueOf();if(l.toString!==Object.prototype.toString&&typeof l.toString=="function"&&typeof c.toString=="function")return l.toString()===c.toString();if(p=Object.keys(l),o=p.length,o!==Object.keys(c).length)return!1;for(a=o;a--!==0;)if(!Object.prototype.hasOwnProperty.call(c,p[a]))return!1;if(t&&l instanceof Element)return!1;for(a=o;a--!==0;)if(!((p[a]==="_owner"||p[a]==="__v"||p[a]==="__o")&&l.$$typeof)&&!i(l[p[a]],c[p[a]]))return!1;return!0}return l!==l&&c!==c}return zt=function(c,o){try{return i(c,o)}catch(a){if((a.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw a}},zt}var Ut,Ar;function Cn(){if(Ar)return Ut;Ar=1;var t=Object.create,e=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(I,k)=>{for(var O in k)e(I,O,{get:k[O],enumerable:!0})},o=(I,k,O,N)=>{if(k&&typeof k=="object"||typeof k=="function")for(let A of n(k))!l.call(I,A)&&A!==O&&e(I,A,{get:()=>k[A],enumerable:!(N=r(k,A))||N.enumerable});return I},a=(I,k,O)=>(O=I!=null?t(i(I)):{},o(!I||!I.__esModule?e(O,"default",{value:I,enumerable:!0}):O,I)),p=I=>o(e({},"__esModule",{value:!0}),I),m={};c(m,{defaultProps:()=>w,propTypes:()=>x}),Ut=p(m);var f=a(Gn());const{string:v,bool:y,number:_,array:b,oneOfType:C,shape:d,object:h,func:u,node:g}=f.default,x={url:C([v,b,h]),playing:y,loop:y,controls:y,volume:_,muted:y,playbackRate:_,width:C([v,_]),height:C([v,_]),style:h,progressInterval:_,playsinline:y,pip:y,stopOnUnmount:y,light:C([y,v,h]),playIcon:g,previewTabIndex:_,previewAriaLabel:v,fallback:g,oEmbedUrl:v,wrapper:C([v,u,d({render:u.isRequired})]),config:d({soundcloud:d({options:h}),youtube:d({playerVars:h,embedOptions:h,onUnstarted:u}),facebook:d({appId:v,version:v,playerId:v,attributes:h}),dailymotion:d({params:h}),vimeo:d({playerOptions:h,title:v}),mux:d({attributes:h,version:v}),file:d({attributes:h,tracks:b,forceVideo:y,forceAudio:y,forceHLS:y,forceSafariHLS:y,forceDisableHls:y,forceDASH:y,forceFLV:y,hlsOptions:h,hlsVersion:v,dashVersion:v,flvVersion:v}),wistia:d({options:h,playerId:v,customControls:b}),mixcloud:d({options:h}),twitch:d({options:h,playerId:v}),vidyard:d({options:h})}),onReady:u,onStart:u,onPlay:u,onPause:u,onBuffer:u,onBufferEnd:u,onEnded:u,onError:u,onDuration:u,onSeek:u,onPlaybackRateChange:u,onPlaybackQualityChange:u,onProgress:u,onClickPreview:u,onEnablePIP:u,onDisablePIP:u},S=()=>{},w={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:S},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:S,onStart:S,onPlay:S,onPause:S,onBuffer:S,onBufferEnd:S,onEnded:S,onError:S,onDuration:S,onSeek:S,onPlaybackRateChange:S,onPlaybackQualityChange:S,onProgress:S,onClickPreview:S,onEnablePIP:S,onDisablePIP:S};return Ut}var Bt,Mr;function ui(){if(Mr)return Bt;Mr=1;var t=Object.create,e=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(u,g,x)=>g in u?e(u,g,{enumerable:!0,configurable:!0,writable:!0,value:x}):u[g]=x,o=(u,g)=>{for(var x in g)e(u,x,{get:g[x],enumerable:!0})},a=(u,g,x,S)=>{if(g&&typeof g=="object"||typeof g=="function")for(let w of n(g))!l.call(u,w)&&w!==x&&e(u,w,{get:()=>g[w],enumerable:!(S=r(g,w))||S.enumerable});return u},p=(u,g,x)=>(x=u!=null?t(i(u)):{},a(!u||!u.__esModule?e(x,"default",{value:u,enumerable:!0}):x,u)),m=u=>a(e({},"__esModule",{value:!0}),u),f=(u,g,x)=>(c(u,typeof g!="symbol"?g+"":g,x),x),v={};o(v,{default:()=>h}),Bt=m(v);var y=p(ir()),_=p(jn()),b=Cn(),C=Ct();const d=5e3;class h extends y.Component{constructor(){super(...arguments),f(this,"mounted",!1),f(this,"isReady",!1),f(this,"isPlaying",!1),f(this,"isLoading",!0),f(this,"loadOnReady",null),f(this,"startOnPlay",!0),f(this,"seekOnPlay",null),f(this,"onDurationCalled",!1),f(this,"handlePlayerMount",g=>{if(this.player){this.progress();return}this.player=g,this.player.load(this.props.url),this.progress()}),f(this,"getInternalPlayer",g=>this.player?this.player[g]:null),f(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const g=this.getCurrentTime()||0,x=this.getSecondsLoaded(),S=this.getDuration();if(S){const w={playedSeconds:g,played:g/S};x!==null&&(w.loadedSeconds=x,w.loaded=x/S),(w.playedSeconds!==this.prevPlayed||w.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(w),this.prevPlayed=w.playedSeconds,this.prevLoaded=w.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),f(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:g,playing:x,volume:S,muted:w}=this.props;g(),!w&&S!==null&&this.player.setVolume(S),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):x&&this.player.play(),this.handleDurationCheck()}),f(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:g,onPlay:x,playbackRate:S}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&S!==1&&this.player.setPlaybackRate(S),g(),this.startOnPlay=!1),x(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),f(this,"handlePause",g=>{this.isPlaying=!1,this.isLoading||this.props.onPause(g)}),f(this,"handleEnded",()=>{const{activePlayer:g,loop:x,onEnded:S}=this.props;g.loopOnEnded&&x&&this.seekTo(0),x||(this.isPlaying=!1,S())}),f(this,"handleError",(...g)=>{this.isLoading=!1,this.props.onError(...g)}),f(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const g=this.getDuration();g?this.onDurationCalled||(this.props.onDuration(g),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),f(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(g){if(!this.player)return;const{url:x,playing:S,volume:w,muted:I,playbackRate:k,pip:O,loop:N,activePlayer:A,disableDeferredLoading:E}=this.props;if(!(0,_.default)(g.url,x)){if(this.isLoading&&!A.forceLoad&&!E&&!(0,C.isMediaStream)(x)){console.warn(`ReactPlayer: the attempt to load ${x} is being deferred until the player has loaded`),this.loadOnReady=x;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(x,this.isReady)}!g.playing&&S&&!this.isPlaying&&this.player.play(),g.playing&&!S&&this.isPlaying&&this.player.pause(),!g.pip&&O&&this.player.enablePIP&&this.player.enablePIP(),g.pip&&!O&&this.player.disablePIP&&this.player.disablePIP(),g.volume!==w&&w!==null&&this.player.setVolume(w),g.muted!==I&&(I?this.player.mute():(this.player.unmute(),w!==null&&setTimeout(()=>this.player.setVolume(w)))),g.playbackRate!==k&&this.player.setPlaybackRate&&this.player.setPlaybackRate(k),g.loop!==N&&this.player.setLoop&&this.player.setLoop(N)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(g,x,S){if(!this.isReady){g!==0&&(this.seekOnPlay=g,setTimeout(()=>{this.seekOnPlay=null},d));return}if(x?x==="fraction":g>0&&g<1){const I=this.player.getDuration();if(!I){console.warn("ReactPlayer: could not seek using fraction – duration not yet available");return}this.player.seekTo(I*g,S);return}this.player.seekTo(g,S)}render(){const g=this.props.activePlayer;return g?y.default.createElement(g,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}return f(h,"displayName","Player"),f(h,"propTypes",b.propTypes),f(h,"defaultProps",b.defaultProps),Bt}var Vt,Fr;function hi(){if(Fr)return Vt;Fr=1;var t=Object.create,e=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(N,A,E)=>A in N?e(N,A,{enumerable:!0,configurable:!0,writable:!0,value:E}):N[A]=E,o=(N,A)=>{for(var E in A)e(N,E,{get:A[E],enumerable:!0})},a=(N,A,E,P)=>{if(A&&typeof A=="object"||typeof A=="function")for(let j of n(A))!l.call(N,j)&&j!==E&&e(N,j,{get:()=>A[j],enumerable:!(P=r(A,j))||P.enumerable});return N},p=(N,A,E)=>(E=N!=null?t(i(N)):{},a(!N||!N.__esModule?e(E,"default",{value:N,enumerable:!0}):E,N)),m=N=>a(e({},"__esModule",{value:!0}),N),f=(N,A,E)=>(c(N,typeof A!="symbol"?A+"":A,E),E),v={};o(v,{createReactPlayer:()=>O}),Vt=m(v);var y=p(ir()),_=p(Sn()),b=p(di),C=p(jn()),d=Cn(),h=Ct(),u=p(ui());const g=(0,h.lazy)(()=>he(()=>import("./Preview-DlRomXi8.js").then(N=>N.P),__vite__mapDeps([15,1,2]))),x=typeof window<"u"&&window.document&&typeof document<"u",S=typeof It<"u"&&It.window&&It.window.document,w=Object.keys(d.propTypes),I=x||S?y.Suspense:()=>null,k=[],O=(N,A)=>{var E;return E=class extends y.Component{constructor(){super(...arguments),f(this,"state",{showPreview:!!this.props.light}),f(this,"references",{wrapper:P=>{this.wrapper=P},player:P=>{this.player=P}}),f(this,"handleClickPreview",P=>{this.setState({showPreview:!1}),this.props.onClickPreview(P)}),f(this,"showPreview",()=>{this.setState({showPreview:!0})}),f(this,"getDuration",()=>this.player?this.player.getDuration():null),f(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),f(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),f(this,"getInternalPlayer",(P="player")=>this.player?this.player.getInternalPlayer(P):null),f(this,"seekTo",(P,j,U)=>{if(!this.player)return null;this.player.seekTo(P,j,U)}),f(this,"handleReady",()=>{this.props.onReady(this)}),f(this,"getActivePlayer",(0,b.default)(P=>{for(const j of[...k,...N])if(j.canPlay(P))return j;return A||null})),f(this,"getConfig",(0,b.default)((P,j)=>{const{config:U}=this.props;return _.default.all([d.defaultProps.config,d.defaultProps.config[j]||{},U,U[j]||{}])})),f(this,"getAttributes",(0,b.default)(P=>(0,h.omit)(this.props,w))),f(this,"renderActivePlayer",P=>{if(!P)return null;const j=this.getActivePlayer(P);if(!j)return null;const U=this.getConfig(P,j.key);return y.default.createElement(u.default,{...this.props,key:j.key,ref:this.references.player,config:U,activePlayer:j.lazyPlayer||j,onReady:this.handleReady})})}shouldComponentUpdate(P,j){return!(0,C.default)(this.props,P)||!(0,C.default)(this.state,j)}componentDidUpdate(P){const{light:j}=this.props;!P.light&&j&&this.setState({showPreview:!0}),P.light&&!j&&this.setState({showPreview:!1})}renderPreview(P){if(!P)return null;const{light:j,playIcon:U,previewTabIndex:K,oEmbedUrl:Y,previewAriaLabel:D}=this.props;return y.default.createElement(g,{url:P,light:j,playIcon:U,previewTabIndex:K,previewAriaLabel:D,oEmbedUrl:Y,onClick:this.handleClickPreview})}render(){const{url:P,style:j,width:U,height:K,fallback:Y,wrapper:D}=this.props,{showPreview:R}=this.state,$=this.getAttributes(P),G=typeof D=="string"?this.references.wrapper:void 0;return y.default.createElement(D,{ref:G,style:{...j,width:U,height:K},...$},y.default.createElement(I,{fallback:Y},R?this.renderPreview(P):this.renderActivePlayer(P)))}},f(E,"displayName","ReactPlayer"),f(E,"propTypes",d.propTypes),f(E,"defaultProps",d.defaultProps),f(E,"addCustomPlayer",P=>{k.push(P)}),f(E,"removeCustomPlayers",()=>{k.length=0}),f(E,"canPlay",P=>{for(const j of[...k,...N])if(j.canPlay(P))return!0;return!1}),f(E,"canEnablePIP",P=>{for(const j of[...k,...N])if(j.canEnablePIP&&j.canEnablePIP(P))return!0;return!1}),E};return Vt}var Wt,Rr;function fi(){if(Rr)return Wt;Rr=1;var t=Object.create,e=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(b,C)=>{for(var d in C)e(b,d,{get:C[d],enumerable:!0})},o=(b,C,d,h)=>{if(C&&typeof C=="object"||typeof C=="function")for(let u of n(C))!l.call(b,u)&&u!==d&&e(b,u,{get:()=>C[u],enumerable:!(h=r(C,u))||h.enumerable});return b},a=(b,C,d)=>(d=b!=null?t(i(b)):{},o(!b||!b.__esModule?e(d,"default",{value:b,enumerable:!0}):d,b)),p=b=>o(e({},"__esModule",{value:!0}),b),m={};c(m,{default:()=>_}),Wt=p(m);var f=a(ii()),v=hi();const y=f.default[f.default.length-1];var _=(0,v.createReactPlayer)(f.default,y);return Wt}var pi=fi();const mi=Jn(pi);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gi=ae("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yi=ae("ChartLine",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xi=ae("DraftingCompass",[["path",{d:"m12.99 6.74 1.93 3.44",key:"iwagvd"}],["path",{d:"M19.136 12a10 10 0 0 1-14.271 0",key:"ppmlo4"}],["path",{d:"m21 21-2.16-3.84",key:"vylbct"}],["path",{d:"m3 21 8.02-14.26",key:"1ssaw4"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vi=ae("Droplet",[["path",{d:"M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5C6 11.1 5 13 5 15a7 7 0 0 0 7 7z",key:"c7niix"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bi=ae("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=ae("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pt=ae("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Si=ae("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=ae("Maximize",[["path",{d:"M8 3H5a2 2 0 0 0-2 2v3",key:"1dcmit"}],["path",{d:"M21 8V5a2 2 0 0 0-2-2h-3",key:"1e4gt3"}],["path",{d:"M3 16v3a2 2 0 0 0 2 2h3",key:"wsl5sc"}],["path",{d:"M16 21h3a2 2 0 0 0 2-2v-3",key:"18trek"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ci=ae("Minimize",[["path",{d:"M8 3v3a2 2 0 0 1-2 2H3",key:"hohbtr"}],["path",{d:"M21 8h-3a2 2 0 0 1-2-2V3",key:"5jw1f3"}],["path",{d:"M3 16h3a2 2 0 0 1 2 2v3",key:"198tvr"}],["path",{d:"M16 21v-3a2 2 0 0 1 2-2h3",key:"ph8mxp"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=ae("MousePointerClick",[["path",{d:"M14 4.1 12 6",key:"ita8i4"}],["path",{d:"m5.1 8-2.9-.8",key:"1go3kf"}],["path",{d:"m6 12-1.9 2",key:"mnht97"}],["path",{d:"M7.2 2.2 8 5.1",key:"1cfko1"}],["path",{d:"M9.037 9.69a.498.498 0 0 1 .653-.653l11 4.5a.5.5 0 0 1-.074.949l-4.349 1.041a1 1 0 0 0-.74.739l-1.04 4.35a.5.5 0 0 1-.95.074z",key:"s0h3yz"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=ae("MousePointer",[["path",{d:"M12.586 12.586 19 19",key:"ea5xo7"}],["path",{d:"M3.688 3.037a.497.497 0 0 0-.651.651l6.5 15.999a.501.501 0 0 0 .947-.062l1.569-6.083a2 2 0 0 1 1.448-1.479l6.124-1.579a.5.5 0 0 0 .063-.947z",key:"277e5u"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _i=ae("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _n=ae("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.376 3.622a1 1 0 0 1 3.002 3.002L7.368 18.635a2 2 0 0 1-.855.506l-2.872.838a.5.5 0 0 1-.62-.62l.838-2.872a2 2 0 0 1 .506-.854z",key:"1ykcvy"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=ae("Pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Di=ae("PictureInPicture2",[["path",{d:"M21 9V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h4",key:"daa4of"}],["rect",{width:"10",height:"7",x:"12",y:"13",rx:"2",key:"1nb8gs"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lr=ae("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ei=ae("RotateCcwSquare",[["path",{d:"M20 9V7a2 2 0 0 0-2-2h-6",key:"19z8uc"}],["path",{d:"m15 2-3 3 3 3",key:"177bxs"}],["path",{d:"M20 13v5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h2",key:"d36hnl"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oi=ae("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ni=ae("RotateCwSquare",[["path",{d:"M12 5H6a2 2 0 0 0-2 2v3",key:"l96uqu"}],["path",{d:"m9 8 3-3-3-3",key:"1gzgc3"}],["path",{d:"M4 14v4a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2",key:"1w2k5h"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ti=ae("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ii=ae("ScanEye",[["path",{d:"M3 7V5a2 2 0 0 1 2-2h2",key:"aa7l1z"}],["path",{d:"M17 3h2a2 2 0 0 1 2 2v2",key:"4qcy5o"}],["path",{d:"M21 17v2a2 2 0 0 1-2 2h-2",key:"6vwrx8"}],["path",{d:"M7 21H5a2 2 0 0 1-2-2v-2",key:"ioqczr"}],["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M18.944 12.33a1 1 0 0 0 0-.66 7.5 7.5 0 0 0-13.888 0 1 1 0 0 0 0 .66 7.5 7.5 0 0 0 13.888 0",key:"11ak4c"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ai=ae("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=ae("Square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fi=ae("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ri=ae("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=ae("Volume2",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]]);/**
 * @license lucide-react v0.438.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=ae("VolumeX",[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]]);function zi({chapters:t,currentTime:e,onChapterSelect:r}){const[n,i]=T.useState(!1),l=t.reduce((c,o)=>o.startTime<=e&&(c===null||o.startTime>c.startTime)?o:c,null);return s.jsx("div",{className:"absolute top-4 right-4 z-10",children:s.jsxs(on,{open:n,onOpenChange:i,children:[s.jsx(ln,{asChild:!0,children:s.jsx(le,{variant:"outline",size:"icon",className:"bg-black/50 border-white/20 text-white hover:bg-black/70 hover:text-white",children:s.jsx(Si,{className:"h-5 w-5"})})}),s.jsxs(cn,{className:"w-[300px] bg-gray-900/95 text-white border-gray-800 backdrop-blur-sm p-0 rounded-md",sideOffset:5,align:"end",children:[s.jsx("div",{className:"p-4 border-b border-gray-800",children:s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Chapters"})}),s.jsx("div",{className:"max-h-[300px] overflow-y-auto py-2",children:t.map(c=>s.jsx(le,{variant:"ghost",className:`w-full justify-start rounded-none ${l?.id===c.id?"bg-white/20 text-white":"text-gray-300 hover:text-white hover:bg-white/10"}`,onClick:()=>{r(c.startTime),i(!1)},children:s.jsxs("div",{className:"flex items-center",children:[s.jsxs("div",{className:"w-8 text-right mr-2",children:[Math.floor(c.startTime/60),":",String(Math.floor(c.startTime%60)).padStart(2,"0")]}),s.jsx("div",{children:c.title})]})},c.id||c.title))})]})]})})}function Ui({currentSpeed:t,onSpeedChange:e,isSmallVideo:r=!1}){const n=[.25,.5,.75,1,1.25,1.5,1.75,2];return s.jsxs(on,{modal:!0,children:[s.jsx(ln,{asChild:!0,children:s.jsxs(le,{variant:"ghost",className:`text-white hover:bg-white/10 flex items-center ${r?"space-x-0 h-8 px-2":"space-x-1"}`,children:[s.jsx(bi,{className:`${r?"w-4 h-4":"w-4 h-4 mr-1"}`}),!r&&s.jsxs("span",{children:[t,"x"]})]})}),s.jsx(cn,{className:"bg-gray-900 text-white border-gray-800 z-50 w-16 min-w-16",side:"top",children:n.map(i=>s.jsxs(Zn,{className:`cursor-pointer ${i===t?"bg-white/20":"hover:bg-white/10"}`,onClick:()=>e(i),children:[i,"x"]},i))})]})}const Bi=(t,e)=>{if(!t)return{x:0,y:0};const r=t.getBoundingClientRect(),n=e.clientX-r.left,i=e.clientY-r.top;return{x:n,y:i}};function Vi(t){return t.additionalItems===!0&&console.warn("additionalItems=true is currently not supported"),nt(t.additionalItems)}function $r(t){if(t==="")return;if(t===null)return null;if(/\.$/.test(t)||/\.0$/.test(t)||/\.\d*0$/.test(t))return t;const e=Number(t);return typeof e=="number"&&!Number.isNaN(e)?e:t}function Wi(t,e={},r){if(!t.additionalProperties)return!1;const{expandable:n=!0}=ie(e);return n===!1?n:t.maxProperties!==void 0&&r?Object.keys(r).length<t.maxProperties:!0}function kn(t={}){return"widget"in ie(t)&&ie(t).widget!=="hidden"}function Dn(t,e,r={},n,i){if(r[dn]==="files")return!0;if(e.items){const l=Re(t,e.items,n,void 0,i);return l.type==="string"&&l.format==="data-url"}return!1}function Hi(t,e,r={},n,i,l){const c=ie(r,i),{label:o=!0}=c;let a=!!o;const p=ot(e);return p==="array"&&(a=un(t,e,n,l)||Dn(t,e,r,n,l)||kn(r)),p==="object"&&(a=!1),p==="boolean"&&!r[dn]&&(a=!1),r[Qn]&&(a=!1),a}function qi(t,e,r){if(!r)return e;const{errors:n,errorSchema:i}=e;let l=t.toErrorList(r),c=r;return ar(i)||(c=Ye(i,r,!0),l=[...n].concat(l)),{errorSchema:c,errors:l}}const qe=Symbol("no Value");function nr(t,e,r,n,i={},l){let c;if(Pe(r,xe)){const o={};if(Pe(n,xe)){const m=te(n,xe,{});Object.keys(m).forEach(f=>{Pe(i,f)&&(o[f]=void 0)})}const a=Object.keys(te(r,xe,{})),p={};a.forEach(m=>{const f=te(i,m);let v=te(n,[xe,m],{}),y=te(r,[xe,m],{});Pe(v,De)&&(v=Re(t,v,e,f,l)),Pe(y,De)&&(y=Re(t,y,e,f,l));const _=te(v,"type"),b=te(y,"type");if(!_||_===b)if(Pe(o,m)&&delete o[m],b==="object"||b==="array"&&Array.isArray(f)){const C=nr(t,e,y,v,f,l);(C!==void 0||b==="array")&&(p[m]=C)}else{const C=te(y,"default",qe),d=te(v,"default",qe);C!==qe&&C!==f&&(d===f?o[m]=C:te(y,"readOnly")===!0&&(o[m]=void 0));const h=te(y,"const",qe),u=te(v,"const",qe);h!==qe&&h!==f&&(o[m]=u===f?h:void 0)}}),c={...typeof i=="string"||Array.isArray(i)?void 0:i,...o,...p}}else if(te(n,"type")==="array"&&te(r,"type")==="array"&&Array.isArray(i)){let o=te(n,"items"),a=te(r,"items");if(typeof o=="object"&&typeof a=="object"&&!Array.isArray(o)&&!Array.isArray(a)){Pe(o,De)&&(o=Re(t,o,e,i,l)),Pe(a,De)&&(a=Re(t,a,e,i,l));const p=te(o,"type"),m=te(a,"type");if(!p||p===m){const f=te(r,"maxItems",-1);m==="object"?c=i.reduce((v,y)=>{const _=nr(t,e,a,o,y,l);return _!==void 0&&(f<0||v.length<f)&&v.push(_),v},[]):c=f>0&&i.length>f?i.slice(0,f):i}}else typeof o=="boolean"&&typeof a=="boolean"&&o===a&&(c=i)}return c}function yt(t,e,r,n,i,l,c,o=[],a){if(De in e||hn in e||fn in e){const f=Re(t,e,l,c,a);if(o.findIndex(y=>ce(y,f))===-1)return yt(t,f,r,n,i,l,c,o.concat(f),a)}if(We in e&&!te(e,[We,De]))return yt(t,te(e,We),r,n,i,l,c,o,a);const m={$id:i||r};if(ot(e)==="object"&&xe in e)for(const f in e.properties){const v=te(e,[xe,f]),y=m[tr]+n+f;m[f]=yt(t,nt(v)?v:{},r,n,y,l,te(c,[f]),o,a)}return m}function Ki(t,e,r,n,i,l="root",c="_",o){return yt(t,e,l,c,r,n,i,void 0,o)}function Ue(t,e,r,n,i,l=[],c){if(De in e||hn in e||fn in e){const a=Re(t,e,n,i,c);if(l.findIndex(m=>ce(m,a))===-1)return Ue(t,a,r,n,i,l.concat(a),c)}let o={[pt]:r.replace(/^\./,"")};if(Ve in e||Xe in e){const a=Ve in e?e.oneOf:e.anyOf,p=pn(e),m=mn(t,n,i,a,0,p,c),f=a[m];o={...o,...Ue(t,f,r,n,i,l,c)}}if(hr in e&&e[hr]!==!1&&ye(o,gn,!0),We in e&&Array.isArray(i)){const{items:a,additionalItems:p}=e;Array.isArray(a)?i.forEach((m,f)=>{a[f]?o[f]=Ue(t,a[f],`${r}.${f}`,n,m,l,c):p?o[f]=Ue(t,p,`${r}.${f}`,n,m,l,c):console.warn(`Unable to generate path schema for "${r}.${f}". No schema defined for it`)}):i.forEach((m,f)=>{o[f]=Ue(t,a,`${r}.${f}`,n,m,l,c)})}else if(xe in e)for(const a in e.properties){const p=te(e,[xe,a]);o[a]=Ue(t,p,`${r}.${a}`,n,te(i,[a]),l,c)}return o}function Yi(t,e,r="",n,i,l){return Ue(t,e,r,n,i,void 0,l)}class Xi{constructor(e,r,n,i){this.rootSchema=r,this.validator=e,this.experimental_defaultFormStateBehavior=n,this.experimental_customMergeAllOf=i}getValidator(){return this.validator}doesSchemaUtilsDiffer(e,r,n={},i){return!e||!r?!1:this.validator!==e||!ce(this.rootSchema,r)||!ce(this.experimental_defaultFormStateBehavior,n)||this.experimental_customMergeAllOf!==i}getDefaultFormState(e,r,n=!1){return es(this.validator,e,r,this.rootSchema,n,this.experimental_defaultFormStateBehavior,this.experimental_customMergeAllOf)}getDisplayLabel(e,r,n){return Hi(this.validator,e,r,this.rootSchema,n,this.experimental_customMergeAllOf)}getClosestMatchingOption(e,r,n,i){return mn(this.validator,this.rootSchema,e,r,n,i,this.experimental_customMergeAllOf)}getFirstMatchingOption(e,r,n){return ts(this.validator,e,r,this.rootSchema,n)}getMatchingOption(e,r,n){return rs(this.validator,e,r,this.rootSchema,n)}isFilesArray(e,r){return Dn(this.validator,e,r,this.rootSchema,this.experimental_customMergeAllOf)}isMultiSelect(e){return un(this.validator,e,this.rootSchema,this.experimental_customMergeAllOf)}isSelect(e){return ns(this.validator,e,this.rootSchema,this.experimental_customMergeAllOf)}mergeValidationData(e,r){return qi(this.validator,e,r)}retrieveSchema(e,r){return Re(this.validator,e,this.rootSchema,r,this.experimental_customMergeAllOf)}sanitizeDataForNewSchema(e,r,n){return nr(this.validator,this.rootSchema,e,r,n,this.experimental_customMergeAllOf)}toIdSchema(e,r,n,i="root",l="_"){return Ki(this.validator,e,r,this.rootSchema,n,i,l,this.experimental_customMergeAllOf)}toPathSchema(e,r,n){return Yi(this.validator,e,r,this.rootSchema,n,this.experimental_customMergeAllOf)}}function Gi(t,e,r={},n){return new Xi(t,e,r,n)}function Ji(t){var e;if(t.indexOf("data:")===-1)throw new Error("File is invalid: URI must be a dataURI");const n=t.slice(5).split(";base64,");if(n.length!==2)throw new Error("File is invalid: dataURI must be base64");const[i,l]=n,[c,...o]=i.split(";"),a=c||"",p=decodeURI(((e=o.map(m=>m.split("=")).find(([m])=>m==="name"))===null||e===void 0?void 0:e[1])||"unknown");try{const m=atob(l),f=new Array(m.length);for(let y=0;y<m.length;y++)f[y]=m.charCodeAt(y);return{blob:new window.Blob([new Uint8Array(f)],{type:a}),name:p}}catch(m){throw new Error("File is invalid: "+m.message)}}function Fe(t,e){let r=String(t);for(;r.length<e;)r="0"+r;return r}function En(t,e){if(t<=0&&e<=0)t=new Date().getFullYear()+t,e=new Date().getFullYear()+e;else if(t<0||e<0)throw new Error(`Both start (${t}) and stop (${e}) must both be <= 0 or > 0, got one of each`);if(t>e)return En(e,t).reverse();const r=[];for(let n=t;n<=e;n++)r.push({value:n,label:Fe(n,2)});return r}function Zi(t,e){let r=t;if(Array.isArray(e)){const n=r.split(/(%\d)/);e.forEach((i,l)=>{const c=n.findIndex(o=>o===`%${l+1}`);c>=0&&(n[c]=i)}),r=n.join("")}return r}function Qi(t,e){return Zi(t,e)}function _e(t,e=[],r){if(Array.isArray(t))return t.map(l=>_e(l,e)).filter(l=>l!==r);const n=t===""||t===null?-1:Number(t),i=e[n];return i?i.value:r}function ea(t,e,r=[]){const n=_e(t,r);return Array.isArray(e)?e.filter(i=>!ce(i,n)):ce(n,e)?void 0:e}function lr(t,e){return Array.isArray(e)?e.some(r=>ce(r,t)):ce(e,t)}function ta(t,e=[],r=!1){const n=e.map((i,l)=>lr(i.value,t)?String(l):void 0).filter(i=>typeof i<"u");return r?n:n[0]}function ra(t,e,r=[]){const n=_e(t,r);if(!yn(n)){const i=r.findIndex(o=>n===o.value),l=r.map(({value:o})=>o);return e.slice(0,i).concat(n,e.slice(i)).sort((o,a)=>+(l.indexOf(o)>l.indexOf(a)))}return e}function na(t,e,r=[1900,new Date().getFullYear()+2],n="YMD"){const{day:i,month:l,year:c,hour:o,minute:a,second:p}=t,m={type:"day",range:[1,31],value:i},f={type:"month",range:[1,12],value:l},v={type:"year",range:r,value:c},y=[];switch(n){case"MDY":y.push(f,m,v);break;case"DMY":y.push(m,f,v);break;case"YMD":default:y.push(v,f,m)}return e&&y.push({type:"hour",range:[0,23],value:o},{type:"minute",range:[0,59],value:a},{type:"second",range:[0,59],value:p}),y}function sa(t){const e={};return t.multipleOf&&(e.step=t.multipleOf),(t.minimum||t.minimum===0)&&(e.min=t.minimum),(t.maximum||t.maximum===0)&&(e.max=t.maximum),e}function ia(t,e,r={},n=!0){const i={type:e||"text",...sa(t)};return r.inputType?i.type=r.inputType:e||(t.type==="number"?(i.type="number",n&&i.step===void 0&&(i.step="any")):t.type==="integer"&&(i.type="number",i.step===void 0&&(i.step=1))),r.autocomplete&&(i.autoComplete=r.autocomplete),r.accept&&(i.accept=r.accept),i}const zr={props:{disabled:!1},submitText:"Submit",norender:!1};function aa(t={}){const e=ie(t);if(e&&e[wt]){const r=e[wt];return{...zr,...r}}return zr}function ne(t,e,r={}){const{templates:n}=e;return t==="ButtonTemplates"?n[t]:r[t]||n[t]}const Ht={boolean:{checkbox:"CheckboxWidget",radio:"RadioWidget",select:"SelectWidget",hidden:"HiddenWidget"},string:{text:"TextWidget",password:"PasswordWidget",email:"EmailWidget",hostname:"TextWidget",ipv4:"TextWidget",ipv6:"TextWidget",uri:"URLWidget","data-url":"FileWidget",radio:"RadioWidget",select:"SelectWidget",textarea:"TextareaWidget",hidden:"HiddenWidget",date:"DateWidget",datetime:"DateTimeWidget","date-time":"DateTimeWidget","alt-date":"AltDateWidget","alt-datetime":"AltDateTimeWidget",time:"TimeWidget",color:"ColorWidget",file:"FileWidget"},number:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},integer:{text:"TextWidget",select:"SelectWidget",updown:"UpDownWidget",range:"RangeWidget",radio:"RadioWidget",hidden:"HiddenWidget"},array:{select:"SelectWidget",checkboxes:"CheckboxesWidget",files:"FileWidget",hidden:"HiddenWidget"}};function oa(t){let e=te(t,"MergedWidget");if(!e){const r=t.defaultProps&&t.defaultProps.options||{};e=({options:n,...i})=>s.jsx(t,{options:{...r,...n},...i}),ye(t,"MergedWidget",e)}return e}function Ee(t,e,r={}){const n=ot(t);if(typeof e=="function"||e&&fr.isForwardRef(T.createElement(e))||fr.isMemo(e))return oa(e);if(typeof e!="string")throw new Error(`Unsupported widget definition: ${typeof e}`);if(e in r){const i=r[e];return Ee(t,i,r)}if(typeof n=="string"){if(!(n in Ht))throw new Error(`No widget for type '${n}'`);if(e in Ht[n]){const i=r[Ht[n][e]];return Ee(t,i,r)}}throw new Error(`No widget '${e}' for type '${n}'`)}function la(t,e,r={}){try{return Ee(t,e,r),!0}catch(n){const i=n;if(i.message&&(i.message.startsWith("No widget")||i.message.startsWith("Unsupported widget")))return!1;throw n}}function ca(t,e,r){return e?r:t}function da(t){return t?new Date(t).toJSON():void 0}function ua(t,e){if(!Array.isArray(e))return t;const r=m=>m.reduce((f,v)=>(f[v]=!0,f),{}),n=m=>m.length>1?`properties '${m.join("', '")}'`:`property '${m[0]}'`,i=r(t),l=e.filter(m=>m==="*"||i[m]),c=r(l),o=t.filter(m=>!c[m]),a=l.indexOf("*");if(a===-1){if(o.length)throw new Error(`uiSchema order list does not contain ${n(o)}`);return l}if(a!==l.lastIndexOf("*"))throw new Error("uiSchema order list contains more than one wildcard item");const p=[...l];return p.splice(a,1,...o),p}function qt(t,e=!0){if(!t)return{year:-1,month:-1,day:-1,hour:e?-1:0,minute:e?-1:0,second:e?-1:0};const r=new Date(t);if(Number.isNaN(r.getTime()))throw new Error("Unable to parse date "+t);return{year:r.getUTCFullYear(),month:r.getUTCMonth()+1,day:r.getUTCDate(),hour:e?r.getUTCHours():0,minute:e?r.getUTCMinutes():0,second:e?r.getUTCSeconds():0}}function xt(t){if(t.const||t.enum&&t.enum.length===1&&t.enum[0]===!0)return!0;if(t.anyOf&&t.anyOf.length===1)return xt(t.anyOf[0]);if(t.oneOf&&t.oneOf.length===1)return xt(t.oneOf[0]);if(t.allOf){const e=r=>xt(r);return t.allOf.some(e)}return!1}function ha(t,e,r){const{props:n,state:i}=t;return!ce(n,e)||!ce(i,r)}function Ur(t,e=!0){const{year:r,month:n,day:i,hour:l=0,minute:c=0,second:o=0}=t,a=Date.UTC(r,n-1,i,l,c,o),p=new Date(a).toJSON();return e?p:p.slice(0,10)}function fa(t){if(!t)return"";const e=new Date(t),r=Fe(e.getFullYear(),4),n=Fe(e.getMonth()+1,2),i=Fe(e.getDate(),2),l=Fe(e.getHours(),2),c=Fe(e.getMinutes(),2),o=Fe(e.getSeconds(),2),a=Fe(e.getMilliseconds(),3);return`${r}-${n}-${i}T${l}:${c}:${o}.${a}`}function On(t,e,r){for(var n=-1,i=e.length,l={};++n<i;){var c=e[n],o=ss(t,c);r(o,c)&&is(l,as(c,t),o)}return l}function pa(t,e){if(t==null)return{};var r=os(ls(t),function(n){return[n]});return e=cs(e),On(t,r,function(n,i){return e(n,i[0])})}var ma=200;function ga(t,e,r,n){var i=-1,l=us,c=!0,o=t.length,a=[],p=e.length;if(!o)return a;e.length>=ma&&(l=hs,c=!1,e=new ds(e));e:for(;++i<o;){var m=t[i],f=m;if(m=m!==0?m:0,c&&f===f){for(var v=p;v--;)if(e[v]===f)continue e;a.push(m)}else l(e,f,n)||a.push(m)}return a}var ya=fs(function(t,e){return pr(t)?ga(t,ps(e,1,pr,!0)):[]});function xa(t,e){const r=mr(t),n=mr(e);if(t===e||!r&&!n)return[];if(r&&!n)return et(t);if(!r&&n)return et(e);{const i=et(pa(t,(c,o)=>!ce(c,te(e,o)))),l=ya(et(e),et(t));return[...i,...l]}}function va(t,e){var r=xs(t)?ms:gs;return r(t,ys(e))}function ba(t,e){return On(t,e,function(r,n){return vs(t,n)})}var Br=bs(function(t,e){return t==null?{}:ba(t,e)}),wa=0;function Sa(t){var e=++wa;return ws(t)+e}function sr(){return Sa("rjsf-array-item-")}function Vr(t){return Array.isArray(t)?t.map(e=>({key:sr(),item:e})):[]}function tt(t){return Array.isArray(t)?t.map(e=>e.item):[]}class ja extends T.Component{constructor(e){super(e);const{formData:r=[]}=e,n=Vr(r);this.state={keyedFormData:n,updatedKeyedFormData:!1}}static getDerivedStateFromProps(e,r){if(r.updatedKeyedFormData)return{updatedKeyedFormData:!1};const n=Array.isArray(e.formData)?e.formData:[],i=r.keyedFormData||[];return{keyedFormData:n.length===i.length?i.map((c,o)=>({key:c.key,item:n[o]})):Vr(n)}}get itemTitle(){const{schema:e,registry:r}=this.props,{translateString:n}=r;return te(e,[We,"title"],te(e,[We,"description"],n(oe.ArrayItemTitle)))}isItemRequired(e){return Array.isArray(e.type)?!e.type.includes("null"):e.type!=="null"}canAddItem(e){const{schema:r,uiSchema:n,registry:i}=this.props;let{addable:l}=ie(n,i.globalUiOptions);return l!==!1&&(r.maxItems!==void 0?l=e.length<r.maxItems:l=!0),l}_getNewFormDataRow=()=>{const{schema:e,registry:r}=this.props,{schemaUtils:n}=r;let i=e.items;return gr(e)&&Vi(e)&&(i=e.additionalItems),n.getDefaultFormState(i)};_handleAddClick(e,r){e&&e.preventDefault();const{onChange:n,errorSchema:i}=this.props,{keyedFormData:l}=this.state;let c;if(i){c={};for(const p in i){const m=parseInt(p);r===void 0||m<r?ye(c,[m],i[p]):m>=r&&ye(c,[m+1],i[p])}}const o={key:sr(),item:this._getNewFormDataRow()},a=[...l];r!==void 0?a.splice(r,0,o):a.push(o),this.setState({keyedFormData:a,updatedKeyedFormData:!0},()=>n(tt(a),c))}onAddClick=e=>{this._handleAddClick(e)};onAddIndexClick=e=>r=>{this._handleAddClick(r,e)};onCopyIndexClick=e=>r=>{r&&r.preventDefault();const{onChange:n,errorSchema:i}=this.props,{keyedFormData:l}=this.state;let c;if(i){c={};for(const p in i){const m=parseInt(p);m<=e?ye(c,[m],i[p]):m>e&&ye(c,[m+1],i[p])}}const o={key:sr(),item:Ss(l[e].item)},a=[...l];e!==void 0?a.splice(e+1,0,o):a.push(o),this.setState({keyedFormData:a,updatedKeyedFormData:!0},()=>n(tt(a),c))};onDropIndexClick=e=>r=>{r&&r.preventDefault();const{onChange:n,errorSchema:i}=this.props,{keyedFormData:l}=this.state;let c;if(i){c={};for(const a in i){const p=parseInt(a);p<e?ye(c,[p],i[a]):p>e&&ye(c,[p-1],i[a])}}const o=l.filter((a,p)=>p!==e);this.setState({keyedFormData:o,updatedKeyedFormData:!0},()=>n(tt(o),c))};onReorderClick=(e,r)=>n=>{n&&(n.preventDefault(),n.currentTarget.blur());const{onChange:i,errorSchema:l}=this.props;let c;if(l){c={};for(const m in l){const f=parseInt(m);f==e?ye(c,[r],l[e]):f==r?ye(c,[e],l[r]):ye(c,[m],l[f])}}const{keyedFormData:o}=this.state;function a(){const m=o.slice();return m.splice(e,1),m.splice(r,0,o[e]),m}const p=a();this.setState({keyedFormData:p},()=>i(tt(p),c))};onChangeForIndex=e=>(r,n,i)=>{const{formData:l,onChange:c,errorSchema:o}=this.props,p=(Array.isArray(l)?l:[]).map((m,f)=>e===f?typeof r>"u"?null:r:m);c(p,o&&o&&{...o,[e]:n},i)};onSelectChange=e=>{const{onChange:r,idSchema:n}=this.props;r(e,void 0,n&&n.$id)};render(){const{schema:e,uiSchema:r,idSchema:n,registry:i}=this.props,{schemaUtils:l,translateString:c}=i;if(!(We in e)){const o=ie(r),a=ne("UnsupportedFieldTemplate",i,o);return s.jsx(a,{schema:e,idSchema:n,reason:c(oe.MissingItems),registry:i})}return l.isMultiSelect(e)?this.renderMultiSelect():kn(r)?this.renderCustomWidget():gr(e)?this.renderFixedArray():l.isFilesArray(e,r)?this.renderFiles():this.renderNormalArray()}renderNormalArray(){const{schema:e,uiSchema:r={},errorSchema:n,idSchema:i,name:l,title:c,disabled:o=!1,readonly:a=!1,autofocus:p=!1,required:m=!1,registry:f,onBlur:v,onFocus:y,idPrefix:_,idSeparator:b="_",rawErrors:C}=this.props,{keyedFormData:d}=this.state,h=e.title||c||l,{schemaUtils:u,formContext:g}=f,x=ie(r),S=Le(e.items)?e.items:{},w=u.retrieveSchema(S),I=tt(this.state.keyedFormData),k=this.canAddItem(I),O={canAdd:k,items:d.map((A,E)=>{const{key:P,item:j}=A,U=j,K=u.retrieveSchema(S,U),Y=n?n[E]:void 0,D=i.$id+b+E,R=u.toIdSchema(K,D,U,_,b);return this.renderArrayFieldItem({key:P,index:E,name:l&&`${l}-${E}`,title:h?`${h}-${E+1}`:void 0,canAdd:k,canMoveUp:E>0,canMoveDown:E<I.length-1,itemSchema:K,itemIdSchema:R,itemErrorSchema:Y,itemData:U,itemUiSchema:r.items,autofocus:p&&E===0,onBlur:v,onFocus:y,rawErrors:C,totalItems:d.length})}),className:`field field-array field-array-of-${w.type}`,disabled:o,idSchema:i,uiSchema:r,onAddClick:this.onAddClick,readonly:a,required:m,schema:e,title:h,formContext:g,formData:I,rawErrors:C,registry:f},N=ne("ArrayFieldTemplate",f,x);return s.jsx(N,{...O})}renderCustomWidget(){const{schema:e,idSchema:r,uiSchema:n,disabled:i=!1,readonly:l=!1,autofocus:c=!1,required:o=!1,hideError:a,placeholder:p,onBlur:m,onFocus:f,formData:v=[],registry:y,rawErrors:_,name:b}=this.props,{widgets:C,formContext:d,globalUiOptions:h,schemaUtils:u}=y,{widget:g,title:x,...S}=ie(n,h),w=Ee(e,g,C),I=x??e.title??b,k=u.getDisplayLabel(e,n,h);return s.jsx(w,{id:r.$id,name:b,multiple:!0,onChange:this.onSelectChange,onBlur:m,onFocus:f,options:S,schema:e,uiSchema:n,registry:y,value:v,disabled:i,readonly:l,hideError:a,required:o,label:I,hideLabel:!k,placeholder:p,formContext:d,autofocus:c,rawErrors:_})}renderMultiSelect(){const{schema:e,idSchema:r,uiSchema:n,formData:i=[],disabled:l=!1,readonly:c=!1,autofocus:o=!1,required:a=!1,placeholder:p,onBlur:m,onFocus:f,registry:v,rawErrors:y,name:_}=this.props,{widgets:b,schemaUtils:C,formContext:d,globalUiOptions:h}=v,u=C.retrieveSchema(e.items,i),g=St(u,n),{widget:x="select",title:S,...w}=ie(n,h),I=Ee(e,x,b),k=S??e.title??_,O=C.getDisplayLabel(e,n,h);return s.jsx(I,{id:r.$id,name:_,multiple:!0,onChange:this.onSelectChange,onBlur:m,onFocus:f,options:{...w,enumOptions:g},schema:e,uiSchema:n,registry:v,value:i,disabled:l,readonly:c,required:a,label:k,hideLabel:!O,placeholder:p,formContext:d,autofocus:o,rawErrors:y})}renderFiles(){const{schema:e,uiSchema:r,idSchema:n,name:i,disabled:l=!1,readonly:c=!1,autofocus:o=!1,required:a=!1,onBlur:p,onFocus:m,registry:f,formData:v=[],rawErrors:y}=this.props,{widgets:_,formContext:b,globalUiOptions:C,schemaUtils:d}=f,{widget:h="files",title:u,...g}=ie(r,C),x=Ee(e,h,_),S=u??e.title??i,w=d.getDisplayLabel(e,r,C);return s.jsx(x,{options:g,id:n.$id,name:i,multiple:!0,onChange:this.onSelectChange,onBlur:p,onFocus:m,schema:e,uiSchema:r,value:v,disabled:l,readonly:c,required:a,registry:f,formContext:b,autofocus:o,rawErrors:y,label:S,hideLabel:!w})}renderFixedArray(){const{schema:e,uiSchema:r={},formData:n=[],errorSchema:i,idPrefix:l,idSeparator:c="_",idSchema:o,name:a,title:p,disabled:m=!1,readonly:f=!1,autofocus:v=!1,required:y=!1,registry:_,onBlur:b,onFocus:C,rawErrors:d}=this.props,{keyedFormData:h}=this.state;let{formData:u=[]}=this.props;const g=e.title||p||a,x=ie(r),{schemaUtils:S,formContext:w}=_,k=(Le(e.items)?e.items:[]).map((P,j)=>S.retrieveSchema(P,n[j])),O=Le(e.additionalItems)?S.retrieveSchema(e.additionalItems,n):null;(!u||u.length<k.length)&&(u=u||[],u=u.concat(new Array(k.length-u.length)));const N=this.canAddItem(u)&&!!O,A={canAdd:N,className:"field field-array field-array-fixed-items",disabled:m,idSchema:o,formData:n,items:h.map((P,j)=>{const{key:U,item:K}=P,Y=K,D=j>=k.length,R=(D&&Le(e.additionalItems)?S.retrieveSchema(e.additionalItems,Y):k[j])||{},$=o.$id+c+j,G=S.toIdSchema(R,$,Y,l,c),J=D?r.additionalItems||{}:Array.isArray(r.items)?r.items[j]:r.items||{},se=i?i[j]:void 0;return this.renderArrayFieldItem({key:U,index:j,name:a&&`${a}-${j}`,title:g?`${g}-${j+1}`:void 0,canAdd:N,canRemove:D,canMoveUp:j>=k.length+1,canMoveDown:D&&j<u.length-1,itemSchema:R,itemData:Y,itemUiSchema:J,itemIdSchema:G,itemErrorSchema:se,autofocus:v&&j===0,onBlur:b,onFocus:C,rawErrors:d,totalItems:h.length})}),onAddClick:this.onAddClick,readonly:f,required:y,registry:_,schema:e,uiSchema:r,title:g,formContext:w,errorSchema:i,rawErrors:d},E=ne("ArrayFieldTemplate",_,x);return s.jsx(E,{...A})}renderArrayFieldItem(e){const{key:r,index:n,name:i,canAdd:l,canRemove:c=!0,canMoveUp:o,canMoveDown:a,itemSchema:p,itemData:m,itemUiSchema:f,itemIdSchema:v,itemErrorSchema:y,autofocus:_,onBlur:b,onFocus:C,rawErrors:d,totalItems:h,title:u}=e,{disabled:g,hideError:x,idPrefix:S,idSeparator:w,readonly:I,uiSchema:k,registry:O,formContext:N}=this.props,{fields:{ArraySchemaField:A,SchemaField:E},globalUiOptions:P}=O,j=A||E,{orderable:U=!0,removable:K=!0,copyable:Y=!1}=ie(k,P),D={moveUp:U&&o,moveDown:U&&a,copy:Y&&l,remove:K&&c,toolbar:!1};return D.toolbar=Object.keys(D).some(R=>D[R]),{children:s.jsx(j,{name:i,title:u,index:n,schema:p,uiSchema:f,formData:m,formContext:N,errorSchema:y,idPrefix:S,idSeparator:w,idSchema:v,required:this.isItemRequired(p),onChange:this.onChangeForIndex(n),onBlur:b,onFocus:C,registry:O,disabled:g,readonly:I,hideError:x,autofocus:_,rawErrors:d}),className:"array-item",disabled:g,canAdd:l,hasCopy:D.copy,hasToolbar:D.toolbar,hasMoveUp:D.moveUp,hasMoveDown:D.moveDown,hasRemove:D.remove,index:n,totalItems:h,key:r,onAddIndexClick:this.onAddIndexClick,onCopyIndexClick:this.onCopyIndexClick,onDropIndexClick:this.onDropIndexClick,onReorderClick:this.onReorderClick,readonly:I,registry:O,schema:p,uiSchema:f}}}function Ca(t){const{schema:e,name:r,uiSchema:n,idSchema:i,formData:l,registry:c,required:o,disabled:a,readonly:p,hideError:m,autofocus:f,title:v,onChange:y,onFocus:_,onBlur:b,rawErrors:C}=t,{title:d}=e,{widgets:h,formContext:u,translateString:g,globalUiOptions:x}=c,{widget:S="checkbox",title:w,label:I=!0,...k}=ie(n,x),O=Ee(e,S,h),N=g(oe.YesLabel),A=g(oe.NoLabel);let E;const P=w??d??v??r;if(Array.isArray(e.oneOf))E=St({oneOf:e.oneOf.map(j=>{if(Le(j))return{...j,title:j.title||(j.const===!0?N:A)}}).filter(j=>j)},n);else{const j=e,U=e.enum??[!0,!1];!j.enumNames&&U.length===2&&U.every(K=>typeof K=="boolean")?E=[{value:U[0],label:U[0]?N:A},{value:U[1],label:U[1]?N:A}]:E=St({enum:U,enumNames:j.enumNames},n)}return s.jsx(O,{options:{...k,enumOptions:E},schema:e,uiSchema:n,id:i.$id,name:r,onChange:y,onFocus:_,onBlur:b,label:P,hideLabel:!I,value:l,required:o,disabled:a,readonly:p,hideError:m,registry:c,formContext:u,autofocus:f,rawErrors:C})}class Wr extends T.Component{constructor(e){super(e);const{formData:r,options:n,registry:{schemaUtils:i}}=this.props,l=n.map(c=>i.retrieveSchema(c,r));this.state={retrievedOptions:l,selectedOption:this.getMatchingOption(0,r,l)}}componentDidUpdate(e,r){const{formData:n,options:i,idSchema:l}=this.props,{selectedOption:c}=this.state;let o=this.state;if(!ce(e.options,i)){const{registry:{schemaUtils:a}}=this.props,p=i.map(m=>a.retrieveSchema(m,n));o={selectedOption:c,retrievedOptions:p}}if(!ce(n,e.formData)&&l.$id===e.idSchema.$id){const{retrievedOptions:a}=o,p=this.getMatchingOption(c,n,a);r&&p!==c&&(o={selectedOption:p,retrievedOptions:a})}o!==this.state&&this.setState(o)}getMatchingOption(e,r,n){const{schema:i,registry:{schemaUtils:l}}=this.props,c=pn(i);return l.getClosestMatchingOption(r,n,e,c)}onOptionChange=e=>{const{selectedOption:r,retrievedOptions:n}=this.state,{formData:i,onChange:l,registry:c}=this.props,{schemaUtils:o}=c,a=e!==void 0?parseInt(e,10):-1;if(a===r)return;const p=a>=0?n[a]:void 0,m=r>=0?n[r]:void 0;let f=o.sanitizeDataForNewSchema(p,m,i);p&&(f=o.getDefaultFormState(p,f,"excludeObjectChildren")),this.setState({selectedOption:a},()=>{l(f,void 0,this.getFieldId())})};getFieldId(){const{idSchema:e,schema:r}=this.props;return`${e.$id}${r.oneOf?"__oneof_select":"__anyof_select"}`}render(){const{name:e,disabled:r=!1,errorSchema:n={},formContext:i,onBlur:l,onFocus:c,readonly:o,registry:a,schema:p,uiSchema:m}=this.props,{widgets:f,fields:v,translateString:y,globalUiOptions:_,schemaUtils:b}=a,{SchemaField:C}=v,{selectedOption:d,retrievedOptions:h}=this.state,{widget:u="select",placeholder:g,autofocus:x,autocomplete:S,title:w=p.title,...I}=ie(m,_),k=Ee({type:"number"},u,f),O=te(n,yr,[]),N=rr(n,[yr]),A=b.getDisplayLabel(p,m,_),E=d>=0&&h[d]||null;let P;if(E){const{required:R}=p;P=R?js({required:R},E):E}let j=[];Ve in p&&m&&Ve in m?Array.isArray(m[Ve])?j=m[Ve]:console.warn(`uiSchema.oneOf is not an array for "${w||e}"`):Xe in p&&m&&Xe in m&&(Array.isArray(m[Xe])?j=m[Xe]:console.warn(`uiSchema.anyOf is not an array for "${w||e}"`));let U=m;d>=0&&j.length>d&&(U=j[d]);const K=w?oe.TitleOptionPrefix:oe.OptionPrefix,Y=w?[w]:[],D=h.map((R,$)=>{const{title:G=R.title}=ie(j[$]);return{label:G||y(K,Y.concat(String($+1))),value:$}});return s.jsxs("div",{className:"panel panel-default panel-body",children:[s.jsx("div",{className:"form-group",children:s.jsx(k,{id:this.getFieldId(),name:`${e}${p.oneOf?"__oneof_select":"__anyof_select"}`,schema:{type:"number",default:0},onChange:this.onOptionChange,onBlur:l,onFocus:c,disabled:r||ar(D),multiple:!1,rawErrors:O,errorSchema:N,value:d>=0?d:void 0,options:{enumOptions:D,...I},registry:a,formContext:i,placeholder:g,autocomplete:S,autofocus:x,label:w??e,hideLabel:!A,readonly:o})}),P&&P.type!=="null"&&s.jsx(C,{...this.props,schema:P,uiSchema:U})]})}}const Pa=/\.([0-9]*0)*$/,_a=/[0.]0*$/;function ka(t){const{registry:e,onChange:r,formData:n,value:i}=t,[l,c]=T.useState(i),{StringField:o}=e.fields;let a=n;const p=T.useCallback((m,f,v)=>{c(m),`${m}`.charAt(0)==="."&&(m=`0${m}`);const y=typeof m=="string"&&m.match(Pa)?$r(m.replace(_a,"")):$r(m);r(y,f,v)},[r]);if(typeof l=="string"&&typeof a=="number"){const m=new RegExp(`^(${String(a).replace(".","\\.")})?\\.?0*$`);l.match(m)&&(a=l)}return s.jsx(o,{...t,formData:a,onChange:p})}function Be(){return Be=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Be.apply(this,arguments)}const Da=["children","options"],Hr=["allowFullScreen","allowTransparency","autoComplete","autoFocus","autoPlay","cellPadding","cellSpacing","charSet","classId","colSpan","contentEditable","contextMenu","crossOrigin","encType","formAction","formEncType","formMethod","formNoValidate","formTarget","frameBorder","hrefLang","inputMode","keyParams","keyType","marginHeight","marginWidth","maxLength","mediaGroup","minLength","noValidate","radioGroup","readOnly","rowSpan","spellCheck","srcDoc","srcLang","srcSet","tabIndex","useMap"].reduce((t,e)=>(t[e.toLowerCase()]=e,t),{class:"className",for:"htmlFor"}),qr={amp:"&",apos:"'",gt:">",lt:"<",nbsp:" ",quot:"“"},Ea=["style","script","pre"],Oa=["src","href","data","formAction","srcDoc","action"],Na=/([-A-Z0-9_:]+)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|(?:\{((?:\\.|{[^}]*?}|[^}])*)\})))?/gi,Ta=/\n{2,}$/,Kr=/^(\s*>[\s\S]*?)(?=\n\n|$)/,Ia=/^ *> ?/gm,Aa=/^(?:\[!([^\]]*)\]\n)?([\s\S]*)/,Ma=/^ {2,}\n/,Fa=/^(?:([-*_])( *\1){2,}) *(?:\n *)+\n/,Yr=/^(?: {1,3})?(`{3,}|~{3,}) *(\S+)? *([^\n]*?)?\n([\s\S]*?)(?:\1\n?|$)/,Xr=/^(?: {4}[^\n]+\n*)+(?:\n *)+\n?/,Ra=/^(`+)((?:\\`|(?!\1)`|[^`])+)\1/,La=/^(?:\n *)*\n/,$a=/\r\n?/g,za=/^\[\^([^\]]+)](:(.*)((\n+ {4,}.*)|(\n(?!\[\^).+))*)/,Ua=/^\[\^([^\]]+)]/,Ba=/\f/g,Va=/^---[ \t]*\n(.|\n)*\n---[ \t]*\n/,Wa=/^\s*?\[(x|\s)\]/,Gr=/^ *(#{1,6}) *([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Jr=/^ *(#{1,6}) +([^\n]+?)(?: +#*)?(?:\n *)*(?:\n|$)/,Zr=/^([^\n]+)\n *(=|-)\2{2,} *\n/,Kt=/^ *(?!<[a-z][^ >/]* ?\/>)<([a-z][^ >/]*) ?((?:[^>]*[^/])?)>\n?(\s*(?:<\1[^>]*?>[\s\S]*?<\/\1>|(?!<\1\b)[\s\S])*?)<\/\1>(?!<\/\1>)\n*/i,Ha=/&([a-z0-9]+|#[0-9]{1,6}|#x[0-9a-fA-F]{1,6});/gi,Qr=/^<!--[\s\S]*?(?:-->)/,qa=/^(data|aria|x)-[a-z_][a-z\d_.-]*$/,Yt=/^ *<([a-z][a-z0-9:]*)(?:\s+((?:<.*?>|[^>])*))?\/?>(?!<\/\1>)(\s*\n)?/i,Ka=/^\{.*\}$/,Ya=/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,Xa=/^<([^ >]+[:@\/][^ >]+)>/,Ga=/-([a-z])?/gi,en=/^(\|.*)\n(?: *(\|? *[-:]+ *\|[-| :]*)\n((?:.*\|.*\n)*))?\n?/,Ja=/^[^\n]+(?:  \n|\n{2,})/,Za=/^\[([^\]]*)\]:\s+<?([^\s>]+)>?\s*("([^"]*)")?/,Qa=/^!\[([^\]]*)\] ?\[([^\]]*)\]/,eo=/^\[([^\]]*)\] ?\[([^\]]*)\]/,to=/(\n|^[-*]\s|^#|^ {2,}|^-{2,}|^>\s)/,ro=/\t/g,no=/(^ *\||\| *$)/g,so=/^ *:-+: *$/,io=/^ *:-+ *$/,ao=/^ *-+: *$/,_t=t=>`(?=[\\s\\S]+?\\1${t?"\\1":""})`,kt="((?:\\[.*?\\][([].*?[)\\]]|<.*?>(?:.*?<.*?>)?|`.*?`|\\\\\\1|[\\s\\S])+?)",oo=RegExp(`^([*_])\\1${_t(1)}${kt}\\1\\1(?!\\1)`),lo=RegExp(`^([*_])${_t(0)}${kt}\\1(?!\\1)`),co=RegExp(`^(==)${_t(0)}${kt}\\1`),uo=RegExp(`^(~~)${_t(0)}${kt}\\1`),ho=/^(:[a-zA-Z0-9-_]+:)/,fo=/^\\([^0-9A-Za-z\s])/,po=/\\([^0-9A-Za-z\s])/g,mo=/^[\s\S](?:(?!  \n|[0-9]\.|http)[^=*_~\-\n:<`\\\[!])*/,go=/^\n+/,yo=/^([ \t]*)/,xo=/(?:^|\n)( *)$/,cr="(?:\\d+\\.)",dr="(?:[*+-])";function Nn(t){return"( *)("+(t===1?cr:dr)+") +"}const Tn=Nn(1),In=Nn(2);function An(t){return RegExp("^"+(t===1?Tn:In))}const vo=An(1),bo=An(2);function Mn(t){return RegExp("^"+(t===1?Tn:In)+"[^\\n]*(?:\\n(?!\\1"+(t===1?cr:dr)+" )[^\\n]*)*(\\n|$)","gm")}const wo=Mn(1),So=Mn(2);function Fn(t){const e=t===1?cr:dr;return RegExp("^( *)("+e+") [\\s\\S]+?(?:\\n{2,}(?! )(?!\\1"+e+" (?!"+e+" ))\\n*|\\s*\\n*$)")}const Rn=Fn(1),Ln=Fn(2);function tn(t,e){const r=e===1,n=r?Rn:Ln,i=r?wo:So,l=r?vo:bo;return{t:c=>l.test(c),o:Ge(function(c,o){const a=xo.exec(o.prevCapture);return a&&(o.list||!o.inline&&!o.simple)?n.exec(c=a[1]+c):null}),i:1,u(c,o,a){const p=r?+c[2]:void 0,m=c[0].replace(Ta,`
`).match(i);let f=!1;return{items:m.map(function(v,y){const _=l.exec(v)[0].length,b=RegExp("^ {1,"+_+"}","gm"),C=v.replace(b,"").replace(l,""),d=y===m.length-1,h=C.indexOf(`

`)!==-1||d&&f;f=h;const u=a.inline,g=a.list;let x;a.list=!0,h?(a.inline=!1,x=at(C)+`

`):(a.inline=!0,x=at(C));const S=o(x,a);return a.inline=u,a.list=g,S}),ordered:r,start:p}},l:(c,o,a)=>t(c.ordered?"ol":"ul",{key:a.key,start:c.type==="20"?c.start:void 0},c.items.map(function(p,m){return t("li",{key:m},o(p,a))}))}}const jo=RegExp(`^\\[((?:\\[[^\\[\\]]*(?:\\[[^\\[\\]]*\\][^\\[\\]]*)*\\]|[^\\[\\]])*)\\]\\(\\s*<?((?:\\([^)]*\\)|[^\\s\\\\]|\\\\.)*?)>?(?:\\s+['"]([\\s\\S]*?)['"])?\\s*\\)`),Co=/^!\[(.*?)\]\( *((?:\([^)]*\)|[^() ])*) *"?([^)"]*)?"?\)/;function rn(t){return typeof t=="string"}function at(t){let e=t.length;for(;e>0&&t[e-1]<=" ";)e--;return t.slice(0,e)}function vt(t,e){return t.startsWith(e)}function Po(t,e,r){if(Array.isArray(r)){for(let n=0;n<r.length;n++)if(vt(t,r[n]))return!0;return!1}return r(t,e)}function rt(t){return t.replace(/[ÀÁÂÃÄÅàáâãäåæÆ]/g,"a").replace(/[çÇ]/g,"c").replace(/[ðÐ]/g,"d").replace(/[ÈÉÊËéèêë]/g,"e").replace(/[ÏïÎîÍíÌì]/g,"i").replace(/[Ññ]/g,"n").replace(/[øØœŒÕõÔôÓóÒò]/g,"o").replace(/[ÜüÛûÚúÙù]/g,"u").replace(/[ŸÿÝý]/g,"y").replace(/[^a-z0-9- ]/gi,"").replace(/ /gi,"-").toLowerCase()}function _o(t){return ao.test(t)?"right":so.test(t)?"center":io.test(t)?"left":null}function nn(t,e,r,n){const i=r.inTable;r.inTable=!0;let l=[[]],c="";function o(){if(!c)return;const a=l[l.length-1];a.push.apply(a,e(c,r)),c=""}return t.trim().split(/(`[^`]*`|\\\||\|)/).filter(Boolean).forEach((a,p,m)=>{a.trim()==="|"&&(o(),n)?p!==0&&p!==m.length-1&&l.push([]):c+=a}),o(),r.inTable=i,l}function ko(t,e,r){r.inline=!0;const n=t[2]?t[2].replace(no,"").split("|").map(_o):[],i=t[3]?(function(c,o,a){return c.trim().split(`
`).map(function(p){return nn(p,o,a,!0)})})(t[3],e,r):[],l=nn(t[1],e,r,!!i.length);return r.inline=!1,i.length?{align:n,cells:i,header:l,type:"25"}:{children:l,type:"21"}}function sn(t,e){return t.align[e]==null?{}:{textAlign:t.align[e]}}function Ge(t){return t.inline=1,t}function ze(t){return Ge(function(e,r){return r.inline?t.exec(e):null})}function Me(t){return Ge(function(e,r){return r.inline||r.simple?t.exec(e):null})}function ke(t){return function(e,r){return r.inline||r.simple?null:t.exec(e)}}function ft(t){return Ge(function(e){return t.exec(e)})}const Do=/(javascript|vbscript|data(?!:image)):/i;function Eo(t){try{const e=decodeURIComponent(t).replace(/[^A-Za-z0-9/:]/g,"");if(Do.test(e))return null}catch{return null}return t}function je(t){return t&&t.replace(po,"$1")}function bt(t,e,r){const n=r.inline||!1,i=r.simple||!1;r.inline=!0,r.simple=!0;const l=t(e,r);return r.inline=n,r.simple=i,l}function Oo(t,e,r){const n=r.inline||!1,i=r.simple||!1;r.inline=!1,r.simple=!0;const l=t(e,r);return r.inline=n,r.simple=i,l}function No(t,e,r){const n=r.inline||!1;r.inline=!1;const i=t(e,r);return r.inline=n,i}const Xt=(t,e,r)=>({children:bt(e,t[2],r)});function Gt(){return{}}function Jt(){return null}function To(...t){return t.filter(Boolean).join(" ")}function Zt(t,e,r){let n=t;const i=e.split(".");for(;i.length&&(n=n[i[0]],n!==void 0);)i.shift();return n||r}function Io(t="",e={}){e.overrides=e.overrides||{},e.namedCodesToUnicode=e.namedCodesToUnicode?Be({},qr,e.namedCodesToUnicode):qr;const r=e.slugify||rt,n=e.sanitizer||Eo,i=e.createElement||T.createElement,l=[Kr,Yr,Xr,e.enforceAtxHeadings?Jr:Gr,Zr,en,Rn,Ln],c=[...l,Ja,Kt,Qr,Yt];function o(d,h){for(let u=0;u<d.length;u++)if(d[u].test(h))return!0;return!1}function a(d,h,...u){const g=Zt(e.overrides,d+".props",{});return i((function(x,S){const w=Zt(S,x);return w?typeof w=="function"||typeof w=="object"&&"render"in w?w:Zt(S,x+".component",x):x})(d,e.overrides),Be({},h,g,{className:To(h?.className,g.className)||void 0}),...u)}function p(d){d=d.replace(Va,"");let h=!1;e.forceInline?h=!0:e.forceBlock||(h=to.test(d)===!1);const u=b(_(h?d:at(d).replace(go,"")+`

`,{inline:h}));for(;rn(u[u.length-1])&&!u[u.length-1].trim();)u.pop();if(e.wrapper===null)return u;const g=e.wrapper||(h?"span":"div");let x;if(u.length>1||e.forceWrapper)x=u;else{if(u.length===1)return x=u[0],typeof x=="string"?a("span",{key:"outer"},x):x;x=null}return i(g,{key:"outer"},x)}function m(d,h){if(!h||!h.trim())return null;const u=h.match(Na);return u?u.reduce(function(g,x){const S=x.indexOf("=");if(S!==-1){const w=(function(N){return N.indexOf("-")!==-1&&N.match(qa)===null&&(N=N.replace(Ga,function(A,E){return E.toUpperCase()})),N})(x.slice(0,S)).trim(),I=(function(N){const A=N[0];return(A==='"'||A==="'")&&N.length>=2&&N[N.length-1]===A?N.slice(1,-1):N})(x.slice(S+1).trim()),k=Hr[w]||w;if(k==="ref")return g;const O=g[k]=(function(N,A,E,P){return A==="style"?(function(j){const U=[];let K="",Y=!1,D=!1,R="";if(!j)return U;for(let G=0;G<j.length;G++){const J=j[G];if(J!=='"'&&J!=="'"||Y||(D?J===R&&(D=!1,R=""):(D=!0,R=J)),J==="("&&K.endsWith("url")?Y=!0:J===")"&&Y&&(Y=!1),J!==";"||D||Y)K+=J;else{const se=K.trim();if(se){const de=se.indexOf(":");if(de>0){const ue=se.slice(0,de).trim(),me=se.slice(de+1).trim();U.push([ue,me])}}K=""}}const $=K.trim();if($){const G=$.indexOf(":");if(G>0){const J=$.slice(0,G).trim(),se=$.slice(G+1).trim();U.push([J,se])}}return U})(E).reduce(function(j,[U,K]){return j[U.replace(/(-[a-z])/g,Y=>Y[1].toUpperCase())]=P(K,N,U),j},{}):Oa.indexOf(A)!==-1?P(je(E),N,A):(E.match(Ka)&&(E=je(E.slice(1,E.length-1))),E==="true"||E!=="false"&&E)})(d,w,I,n);typeof O=="string"&&(Kt.test(O)||Yt.test(O))&&(g[k]=p(O.trim()))}else x!=="style"&&(g[Hr[x]||x]=!0);return g},{}):null}const f=[],v={},y={0:{t:[">"],o:ke(Kr),i:1,u(d,h,u){const[,g,x]=d[0].replace(Ia,"").match(Aa);return{alert:g,children:h(x,u)}},l(d,h,u){const g={key:u.key};return d.alert&&(g.className="markdown-alert-"+r(d.alert.toLowerCase(),rt),d.children.unshift({attrs:{},children:[{type:"27",text:d.alert}],noInnerParse:!0,type:"11",tag:"header"})),a("blockquote",g,h(d.children,u))}},1:{t:["  "],o:ft(Ma),i:1,u:Gt,l:(d,h,u)=>a("br",{key:u.key})},2:{t:["--","__","**","- ","* ","_ "],o:ke(Fa),i:1,u:Gt,l:(d,h,u)=>a("hr",{key:u.key})},3:{t:["    "],o:ke(Xr),i:0,u:d=>({lang:void 0,text:je(at(d[0].replace(/^ {4}/gm,"")))}),l:(d,h,u)=>a("pre",{key:u.key},a("code",Be({},d.attrs,{className:d.lang?"lang-"+d.lang:""}),d.text))},4:{t:["```","~~~"],o:ke(Yr),i:0,u:d=>({attrs:m("code",d[3]||""),lang:d[2]||void 0,text:d[4],type:"3"})},5:{t:["`"],o:Me(Ra),i:3,u:d=>({text:je(d[2])}),l:(d,h,u)=>a("code",{key:u.key},d.text)},6:{t:["[^"],o:ke(za),i:0,u:d=>(f.push({footnote:d[2],identifier:d[1]}),{}),l:Jt},7:{t:["[^"],o:ze(Ua),i:1,u:d=>({target:"#"+r(d[1],rt),text:d[1]}),l:(d,h,u)=>a("a",{key:u.key,href:n(d.target,"a","href")},a("sup",{key:u.key},d.text))},8:{t:["[ ]","[x]"],o:ze(Wa),i:1,u:d=>({completed:d[1].toLowerCase()==="x"}),l:(d,h,u)=>a("input",{checked:d.completed,key:u.key,readOnly:!0,type:"checkbox"})},9:{t:["#"],o:ke(e.enforceAtxHeadings?Jr:Gr),i:1,u:(d,h,u)=>({children:bt(h,d[2],u),id:r(d[2],rt),level:d[1].length}),l:(d,h,u)=>a("h"+d.level,{id:d.id,key:u.key},h(d.children,u))},10:{t:d=>{const h=d.indexOf(`
`);return h>0&&h<d.length-1&&(d[h+1]==="="||d[h+1]==="-")},o:ke(Zr),i:1,u:(d,h,u)=>({children:bt(h,d[1],u),level:d[2]==="="?1:2,type:"9"})},11:{t:["<"],o:ft(Kt),i:1,u(d,h,u){const[,g]=d[3].match(yo),x=RegExp("^"+g,"gm"),S=d[3].replace(x,""),w=o(c,S)?No:bt,I=d[1].toLowerCase(),k=Ea.indexOf(I)!==-1,O=(k?I:d[1]).trim(),N={attrs:m(O,d[2]),noInnerParse:k,tag:O};if(u.inAnchor=u.inAnchor||I==="a",k)N.text=d[3];else{const A=u.inHTML;u.inHTML=!0,N.children=w(h,S,u),u.inHTML=A}return u.inAnchor=!1,N},l:(d,h,u)=>a(d.tag,Be({key:u.key},d.attrs),d.text||(d.children?h(d.children,u):""))},13:{t:["<"],o:ft(Yt),i:1,u(d){const h=d[1].trim();return{attrs:m(h,d[2]||""),tag:h}},l:(d,h,u)=>a(d.tag,Be({},d.attrs,{key:u.key}))},12:{t:["<!--"],o:ft(Qr),i:1,u:()=>({}),l:Jt},14:{t:["!["],o:Me(Co),i:1,u:d=>({alt:je(d[1]),target:je(d[2]),title:je(d[3])}),l:(d,h,u)=>a("img",{key:u.key,alt:d.alt||void 0,title:d.title||void 0,src:n(d.target,"img","src")})},15:{t:["["],o:ze(jo),i:3,u:(d,h,u)=>({children:Oo(h,d[1],u),target:je(d[2]),title:je(d[3])}),l:(d,h,u)=>a("a",{key:u.key,href:n(d.target,"a","href"),title:d.title},h(d.children,u))},16:{t:["<"],o:ze(Xa),i:0,u(d){let h=d[1],u=!1;return h.indexOf("@")!==-1&&h.indexOf("//")===-1&&(u=!0,h=h.replace("mailto:","")),{children:[{text:h,type:"27"}],target:u?"mailto:"+h:h,type:"15"}}},17:{t:(d,h)=>!h.inAnchor&&!e.disableAutoLink&&(vt(d,"http://")||vt(d,"https://")),o:ze(Ya),i:0,u:d=>({children:[{text:d[1],type:"27"}],target:d[1],title:void 0,type:"15"})},20:tn(a,1),33:tn(a,2),19:{t:[`
`],o:ke(La),i:3,u:Gt,l:()=>`
`},21:{o:Ge(function(d,h){if(h.inline||h.simple||h.inHTML&&d.indexOf(`

`)===-1&&h.prevCapture.indexOf(`

`)===-1)return null;let u="",g=0;for(;;){const S=d.indexOf(`
`,g),w=d.slice(g,S===-1?void 0:S+1);if(o(l,w)||(u+=w,S===-1||!w.trim()))break;g=S+1}const x=at(u);return x===""?null:[u,,x]}),i:3,u:Xt,l:(d,h,u)=>a("p",{key:u.key},h(d.children,u))},22:{t:["["],o:ze(Za),i:0,u:d=>(v[d[1]]={target:d[2],title:d[4]},{}),l:Jt},23:{t:["!["],o:Me(Qa),i:0,u:d=>({alt:d[1]?je(d[1]):void 0,ref:d[2]}),l:(d,h,u)=>v[d.ref]?a("img",{key:u.key,alt:d.alt,src:n(v[d.ref].target,"img","src"),title:v[d.ref].title}):null},24:{t:d=>d[0]==="["&&d.indexOf("](")===-1,o:ze(eo),i:0,u:(d,h,u)=>({children:h(d[1],u),fallbackChildren:d[0],ref:d[2]}),l:(d,h,u)=>v[d.ref]?a("a",{key:u.key,href:n(v[d.ref].target,"a","href"),title:v[d.ref].title},h(d.children,u)):a("span",{key:u.key},d.fallbackChildren)},25:{t:["|"],o:ke(en),i:1,u:ko,l(d,h,u){const g=d;return a("table",{key:u.key},a("thead",null,a("tr",null,g.header.map(function(x,S){return a("th",{key:S,style:sn(g,S)},h(x,u))}))),a("tbody",null,g.cells.map(function(x,S){return a("tr",{key:S},x.map(function(w,I){return a("td",{key:I,style:sn(g,I)},h(w,u))}))})))}},27:{o:Ge(function(d,h){let u;return vt(d,":")&&(u=ho.exec(d)),u||mo.exec(d)}),i:4,u(d){const h=d[0];return{text:h.indexOf("&")===-1?h:h.replace(Ha,(u,g)=>e.namedCodesToUnicode[g]||u)}},l:d=>d.text},28:{t:["**","__"],o:Me(oo),i:2,u:(d,h,u)=>({children:h(d[2],u)}),l:(d,h,u)=>a("strong",{key:u.key},h(d.children,u))},29:{t:d=>{const h=d[0];return(h==="*"||h==="_")&&d[1]!==h},o:Me(lo),i:3,u:(d,h,u)=>({children:h(d[2],u)}),l:(d,h,u)=>a("em",{key:u.key},h(d.children,u))},30:{t:["\\"],o:Me(fo),i:1,u:d=>({text:d[1],type:"27"})},31:{t:["=="],o:Me(co),i:3,u:Xt,l:(d,h,u)=>a("mark",{key:u.key},h(d.children,u))},32:{t:["~~"],o:Me(uo),i:3,u:Xt,l:(d,h,u)=>a("del",{key:u.key},h(d.children,u))}};e.disableParsingRawHTML===!0&&(delete y[11],delete y[13]);const _=(function(d){var h=Object.keys(d);function u(g,x){var S=[];if(x.prevCapture=x.prevCapture||"",g.trim())for(;g;)for(var w=0;w<h.length;){var I=h[w],k=d[I];if(!k.t||Po(g,x,k.t)){var O=k.o(g,x);if(O&&O[0]){g=g.substring(O[0].length);var N=k.u(O,u,x);x.prevCapture+=O[0],N.type||(N.type=I),S.push(N);break}w++}else w++}return x.prevCapture="",S}return h.sort(function(g,x){return d[g].i-d[x].i||(g<x?-1:1)}),function(g,x){return u((function(S){return S.replace($a,`
`).replace(Ba,"").replace(ro,"    ")})(g),x)}})(y),b=(function(d,h){return function u(g,x={}){if(Array.isArray(g)){const S=x.key,w=[];let I=!1;for(let k=0;k<g.length;k++){x.key=k;const O=u(g[k],x),N=rn(O);N&&I?w[w.length-1]+=O:O!==null&&w.push(O),I=N}return x.key=S,w}return(function(S,w,I){const k=d[S.type].l;return h?h(()=>k(S,w,I),S,w,I):k(S,w,I)})(g,u,x)}})(y,e.renderRule),C=p(t);return f.length?a("div",null,C,a("footer",{key:"footer"},f.map(function(d){return a("div",{id:r(d.identifier,rt),key:d.identifier},d.identifier,b(_(d.footnote,{inline:!0})))}))):C}const Dt=t=>{let{children:e="",options:r}=t,n=(function(i,l){if(i==null)return{};var c,o,a={},p=Object.keys(i);for(o=0;o<p.length;o++)l.indexOf(c=p[o])>=0||(a[c]=i[c]);return a})(t,Da);return T.cloneElement(Io(e,r),n)};function Ao(t,e){return t==null?!0:Cs(t,e)}class Mo extends T.Component{state={wasPropertyKeyModified:!1,additionalProperties:{}};isRequired(e){const{schema:r}=this.props;return Array.isArray(r.required)&&r.required.indexOf(e)!==-1}onPropertyChange=(e,r=!1)=>(n,i,l)=>{const{formData:c,onChange:o,errorSchema:a}=this.props;n===void 0&&r&&(n="");const p={...c,[e]:n};o(p,a&&a&&{...a,[e]:i},l)};onDropPropertyClick=e=>r=>{r.preventDefault();const{onChange:n,formData:i}=this.props,l={...i};Ao(l,e),n(l)};getAvailableKey=(e,r)=>{const{uiSchema:n,registry:i}=this.props,{duplicateKeySuffixSeparator:l="-"}=ie(n,i.globalUiOptions);let c=0,o=e;for(;Pe(r,o);)o=`${e}${l}${++c}`;return o};onKeyChange=e=>(r,n)=>{if(e===r)return;const{formData:i,onChange:l,errorSchema:c}=this.props;r=this.getAvailableKey(r,i);const o={...i},a={[e]:r},p=Object.keys(o).map(f=>({[a[f]||f]:o[f]})),m=Object.assign({},...p);this.setState({wasPropertyKeyModified:!0}),l(m,c&&c&&{...c,[r]:n})};getDefaultValue(e){const{registry:{translateString:r}}=this.props;switch(e){case"array":return[];case"boolean":return!1;case"null":return null;case"number":return 0;case"object":return{};case"string":default:return r(oe.NewStringDefault)}}handleAddClick=e=>()=>{if(!e.additionalProperties)return;const{formData:r,onChange:n,registry:i}=this.props,l={...r};let c,o,a;if(Le(e.additionalProperties)){c=e.additionalProperties.type,o=e.additionalProperties.const,a=e.additionalProperties.default;let f=e.additionalProperties;if(De in f){const{schemaUtils:v}=i;f=v.retrieveSchema({$ref:f[De]},r),c=f.type,o=f.const,a=f.default}!c&&(Xe in f||Ve in f)&&(c="object")}const p=this.getAvailableKey("newKey",l),m=o??a??this.getDefaultValue(c);ye(l,p,m),n(l)};render(){const{schema:e,uiSchema:r={},formData:n,errorSchema:i,idSchema:l,name:c,required:o=!1,disabled:a,readonly:p,hideError:m,idPrefix:f,idSeparator:v,onBlur:y,onFocus:_,registry:b,title:C}=this.props,{fields:d,formContext:h,schemaUtils:u,translateString:g,globalUiOptions:x}=b,{SchemaField:S}=d,w=u.retrieveSchema(e,n),I=ie(r,x),{properties:k={}}=w,O=I.title??w.title??C??c,N=I.description??w.description;let A;try{const j=Object.keys(k);A=ua(j,I.order)}catch(j){return s.jsxs("div",{children:[s.jsx("p",{className:"config-error",style:{color:"red"},children:s.jsx(Dt,{options:{disableParsingRawHTML:!0},children:g(oe.InvalidObjectField,[c||"root",j.message])})}),s.jsx("pre",{children:JSON.stringify(w)})]})}const E=ne("ObjectFieldTemplate",b,I),P={title:I.label===!1?"":O,description:I.label===!1?void 0:N,properties:A.map(j=>{const U=Pe(w,[xe,j,or]),K=U?r.additionalProperties:r[j],Y=ie(K).widget==="hidden",D=te(l,[j],{});return{content:s.jsx(S,{name:j,required:this.isRequired(j),schema:te(w,[xe,j],{}),uiSchema:K,errorSchema:te(i,j),idSchema:D,idPrefix:f,idSeparator:v,formData:te(n,j),formContext:h,wasPropertyKeyModified:this.state.wasPropertyKeyModified,onKeyChange:this.onKeyChange(j),onChange:this.onPropertyChange(j,U),onBlur:y,onFocus:_,registry:b,disabled:a,readonly:p,hideError:m,onDropPropertyClick:this.onDropPropertyClick},j),name:j,readonly:p,disabled:a,required:o,hidden:Y}}),readonly:p,disabled:a,required:o,idSchema:l,uiSchema:r,errorSchema:i,schema:w,formData:n,formContext:h,registry:b};return s.jsx(E,{...P,onAddClick:this.handleAddClick})}}const Fo={array:"ArrayField",boolean:"BooleanField",integer:"NumberField",number:"NumberField",object:"ObjectField",string:"StringField",null:"NullField"};function Ro(t,e,r,n){const i=e.field,{fields:l,translateString:c}=n;if(typeof i=="function")return i;if(typeof i=="string"&&i in l)return l[i];const o=ot(t),a=Array.isArray(o)?o[0]:o||"",p=t.$id;let m=Fo[a];return p&&p in l&&(m=p),!m&&(t.anyOf||t.oneOf)?()=>null:m in l?l[m]:()=>{const f=ne("UnsupportedFieldTemplate",n,e);return s.jsx(f,{schema:t,idSchema:r,reason:c(oe.UnknownFieldType,[String(t.type)]),registry:n})}}function Lo(t){const{schema:e,idSchema:r,uiSchema:n,formData:i,errorSchema:l,idPrefix:c,idSeparator:o,name:a,onChange:p,onKeyChange:m,onDropPropertyClick:f,required:v,registry:y,wasPropertyKeyModified:_=!1}=t,{formContext:b,schemaUtils:C,globalUiOptions:d}=y,h=ie(n,d),u=ne("FieldTemplate",y,h),g=ne("DescriptionFieldTemplate",y,h),x=ne("FieldHelpTemplate",y,h),S=ne("FieldErrorTemplate",y,h),w=C.retrieveSchema(e,i),I=r[tr],k=Ye(C.toIdSchema(w,I,i,c,o),r),O=T.useCallback((ee,H,q)=>p(ee,H,q||I),[I,p]),N=Ro(w,h,k,y),A=!!(h.disabled??t.disabled),E=!!(h.readonly??(t.readonly||t.schema.readOnly||w.readOnly)),P=h.hideError,j=P===void 0?t.hideError:!!P,U=!!(h.autofocus??t.autofocus);if(Object.keys(w).length===0)return null;const K=C.getDisplayLabel(w,n,d),{__errors:Y,...D}=l||{},R=rr(n,["ui:classNames","classNames","ui:style"]);mt in R&&(R[mt]=rr(R[mt],["classNames","style"]));const $=s.jsx(N,{...t,onChange:O,idSchema:k,schema:w,uiSchema:R,disabled:A,readonly:E,hideError:j,autofocus:U,errorSchema:D,formContext:b,rawErrors:Y}),G=k[tr];let J;_?J=a:J=or in w?a:h.title||t.schema.title||w.title||t.title||a;const se=h.description||t.schema.description||w.description||"",de=h.enableMarkdownInDescription?s.jsx(Dt,{options:{disableParsingRawHTML:!0},children:se}):se,ue=h.help,me=h.widget==="hidden",M=["form-group","field",`field-${ot(w)}`];!j&&Y&&Y.length>0&&M.push("field-error has-error has-danger"),n?.classNames&&M.push(n.classNames),h.classNames&&M.push(h.classNames);const B=s.jsx(x,{help:ue,idSchema:k,schema:w,uiSchema:n,hasErrors:!j&&Y&&Y.length>0,registry:y}),V=j||(w.anyOf||w.oneOf)&&!C.isSelect(w)?void 0:s.jsx(S,{errors:Y,errorSchema:l,idSchema:k,schema:w,uiSchema:n,registry:y}),X={description:s.jsx(g,{id:jt(G),description:de,schema:w,uiSchema:n,registry:y}),rawDescription:se,help:B,rawHelp:typeof ue=="string"?ue:void 0,errors:V,rawErrors:j?void 0:Y,id:G,label:J,hidden:me,onChange:p,onKeyChange:m,onDropPropertyClick:f,required:v,disabled:A,readonly:E,hideError:j,displayLabel:K,classNames:M.join(" ").trim(),style:h.style,formContext:b,formData:i,schema:w,uiSchema:n,registry:y},W=y.fields.AnyOfField,Z=y.fields.OneOfField,Q=n?.["ui:field"]&&n?.["ui:fieldReplacesAnyOrOneOf"]===!0;return s.jsx(u,{...X,children:s.jsxs(s.Fragment,{children:[$,w.anyOf&&!Q&&!C.isSelect(w)&&s.jsx(W,{name:a,disabled:A,readonly:E,hideError:j,errorSchema:l,formData:i,formContext:b,idPrefix:c,idSchema:k,idSeparator:o,onBlur:t.onBlur,onChange:t.onChange,onFocus:t.onFocus,options:w.anyOf.map(ee=>C.retrieveSchema(Le(ee)?ee:{},i)),registry:y,required:v,schema:w,uiSchema:n}),w.oneOf&&!Q&&!C.isSelect(w)&&s.jsx(Z,{name:a,disabled:A,readonly:E,hideError:j,errorSchema:l,formData:i,formContext:b,idPrefix:c,idSchema:k,idSeparator:o,onBlur:t.onBlur,onChange:t.onChange,onFocus:t.onFocus,options:w.oneOf.map(ee=>C.retrieveSchema(Le(ee)?ee:{},i)),registry:y,required:v,schema:w,uiSchema:n})]})})}class $o extends T.Component{shouldComponentUpdate(e){return!ce(this.props,e)}render(){return s.jsx(Lo,{...this.props})}}function zo(t){const{schema:e,name:r,uiSchema:n,idSchema:i,formData:l,required:c,disabled:o=!1,readonly:a=!1,autofocus:p=!1,onChange:m,onBlur:f,onFocus:v,registry:y,rawErrors:_,hideError:b}=t,{title:C,format:d}=e,{widgets:h,formContext:u,schemaUtils:g,globalUiOptions:x}=y,S=g.isSelect(e)?St(e,n):void 0;let w=S?"select":"text";d&&la(e,d,h)&&(w=d);const{widget:I=w,placeholder:k="",title:O,...N}=ie(n),A=g.getDisplayLabel(e,n,x),E=O??C??r,P=Ee(e,I,h);return s.jsx(P,{options:{...N,enumOptions:S},schema:e,uiSchema:n,id:i.$id,name:r,label:E,hideLabel:!A,hideError:b,value:l,onChange:m,onBlur:f,onFocus:v,required:c,disabled:o,readonly:a,formContext:u,autofocus:p,registry:y,placeholder:k,rawErrors:_})}function Uo(t){const{formData:e,onChange:r}=t;return T.useEffect(()=>{e===void 0&&r(null)},[e,r]),null}function Bo(){return{AnyOfField:Wr,ArrayField:ja,BooleanField:Ca,NumberField:ka,ObjectField:Mo,OneOfField:Wr,SchemaField:$o,StringField:zo,NullField:Uo}}function Vo(t){const{idSchema:e,description:r,registry:n,schema:i,uiSchema:l}=t,c=ie(l,n.globalUiOptions),{label:o=!0}=c;if(!r||!o)return null;const a=ne("DescriptionFieldTemplate",n,c);return s.jsx(a,{id:jt(e),description:r,schema:i,uiSchema:l,registry:n})}function Wo(t){const{children:e,className:r,disabled:n,hasToolbar:i,hasMoveDown:l,hasMoveUp:c,hasRemove:o,hasCopy:a,index:p,onCopyIndexClick:m,onDropIndexClick:f,onReorderClick:v,readonly:y,registry:_,uiSchema:b}=t,{CopyButton:C,MoveDownButton:d,MoveUpButton:h,RemoveButton:u}=_.templates.ButtonTemplates,g={flex:1,paddingLeft:6,paddingRight:6,fontWeight:"bold"};return s.jsxs("div",{className:r,children:[s.jsx("div",{className:i?"col-xs-9":"col-xs-12",children:e}),i&&s.jsx("div",{className:"col-xs-3 array-item-toolbox",children:s.jsxs("div",{className:"btn-group",style:{display:"flex",justifyContent:"space-around"},children:[(c||l)&&s.jsx(h,{style:g,disabled:n||y||!c,onClick:v(p,p-1),uiSchema:b,registry:_}),(c||l)&&s.jsx(d,{style:g,disabled:n||y||!l,onClick:v(p,p+1),uiSchema:b,registry:_}),a&&s.jsx(C,{style:g,disabled:n||y,onClick:m(p),uiSchema:b,registry:_}),o&&s.jsx(u,{style:g,disabled:n||y,onClick:f(p),uiSchema:b,registry:_})]})})]})}function Ho(t){const{canAdd:e,className:r,disabled:n,idSchema:i,uiSchema:l,items:c,onAddClick:o,readonly:a,registry:p,required:m,schema:f,title:v}=t,y=ie(l),_=ne("ArrayFieldDescriptionTemplate",p,y),b=ne("ArrayFieldItemTemplate",p,y),C=ne("ArrayFieldTitleTemplate",p,y),{ButtonTemplates:{AddButton:d}}=p.templates;return s.jsxs("fieldset",{className:r,id:i.$id,children:[s.jsx(C,{idSchema:i,title:y.title||v,required:m,schema:f,uiSchema:l,registry:p}),s.jsx(_,{idSchema:i,description:y.description||f.description,schema:f,uiSchema:l,registry:p}),s.jsx("div",{className:"row array-item-list",children:c&&c.map(({key:h,...u})=>s.jsx(b,{...u},h))}),e&&s.jsx(d,{className:"array-item-add",onClick:o,disabled:n||a,uiSchema:l,registry:p})]})}function qo(t){const{idSchema:e,title:r,schema:n,uiSchema:i,required:l,registry:c}=t,o=ie(i,c.globalUiOptions),{label:a=!0}=o;if(!r||!a)return null;const p=ne("TitleFieldTemplate",c,o);return s.jsx(p,{id:xn(e),title:r,required:l,schema:n,uiSchema:i,registry:c})}function Ko(t){const{id:e,name:r,value:n,readonly:i,disabled:l,autofocus:c,onBlur:o,onFocus:a,onChange:p,onChangeOverride:m,options:f,schema:v,uiSchema:y,formContext:_,registry:b,rawErrors:C,type:d,hideLabel:h,hideError:u,...g}=t;if(!e)throw console.log("No id for",t),new Error(`no id for props ${JSON.stringify(t)}`);const x={...g,...ia(v,d,f)};let S;x.type==="number"||x.type==="integer"?S=n||n===0?n:"":S=n??"";const w=T.useCallback(({target:{value:O}})=>p(O===""?f.emptyValue:O),[p,f]),I=T.useCallback(({target:O})=>o(e,O&&O.value),[o,e]),k=T.useCallback(({target:O})=>a(e,O&&O.value),[a,e]);return s.jsxs(s.Fragment,{children:[s.jsx("input",{id:e,name:e,className:"form-control",readOnly:i,disabled:l,autoFocus:c,value:S,...x,list:v.examples?xr(e):void 0,onChange:m||w,onBlur:I,onFocus:k,"aria-describedby":Je(e,!!v.examples)}),Array.isArray(v.examples)&&s.jsx("datalist",{id:xr(e),children:v.examples.concat(v.default&&!v.examples.includes(v.default)?[v.default]:[]).map(O=>s.jsx("option",{value:O},O))},`datalist_${e}`)]})}function Yo({uiSchema:t}){const{submitText:e,norender:r,props:n={}}=aa(t);return r?null:s.jsx("div",{children:s.jsx("button",{type:"submit",...n,className:`btn btn-info ${n.className||""}`,children:e})})}function lt(t){const{iconType:e="default",icon:r,className:n,uiSchema:i,registry:l,...c}=t;return s.jsx("button",{type:"button",className:`btn btn-${e} ${n}`,...c,children:s.jsx("i",{className:`glyphicon glyphicon-${r}`})})}function Xo(t){const{registry:{translateString:e}}=t;return s.jsx(lt,{title:e(oe.CopyButton),className:"array-item-copy",...t,icon:"copy"})}function Go(t){const{registry:{translateString:e}}=t;return s.jsx(lt,{title:e(oe.MoveDownButton),className:"array-item-move-down",...t,icon:"arrow-down"})}function Jo(t){const{registry:{translateString:e}}=t;return s.jsx(lt,{title:e(oe.MoveUpButton),className:"array-item-move-up",...t,icon:"arrow-up"})}function Zo(t){const{registry:{translateString:e}}=t;return s.jsx(lt,{title:e(oe.RemoveButton),className:"array-item-remove",...t,iconType:"danger",icon:"remove"})}function Qo({className:t,onClick:e,disabled:r,registry:n}){const{translateString:i}=n;return s.jsx("div",{className:"row",children:s.jsx("p",{className:`col-xs-3 col-xs-offset-9 text-right ${t}`,children:s.jsx(lt,{iconType:"info",icon:"plus",className:"btn-add col-xs-12",title:i(oe.AddButton),onClick:e,disabled:r,registry:n})})})}function el(){return{SubmitButton:Yo,AddButton:Qo,CopyButton:Xo,MoveDownButton:Go,MoveUpButton:Jo,RemoveButton:Zo}}function tl(t){const{id:e,description:r}=t;return r?typeof r=="string"?s.jsx("p",{id:e,className:"field-description",children:r}):s.jsx("div",{id:e,className:"field-description",children:r}):null}function rl({errors:t,registry:e}){const{translateString:r}=e;return s.jsxs("div",{className:"panel panel-danger errors",children:[s.jsx("div",{className:"panel-heading",children:s.jsx("h3",{className:"panel-title",children:r(oe.ErrorsLabel)})}),s.jsx("ul",{className:"list-group",children:t.map((n,i)=>s.jsx("li",{className:"list-group-item text-danger",children:n.stack},i))})]})}const nl="*";function $n(t){const{label:e,required:r,id:n}=t;return e?s.jsxs("label",{className:"control-label",htmlFor:n,children:[e,r&&s.jsx("span",{className:"required",children:nl})]}):null}function sl(t){const{id:e,label:r,children:n,errors:i,help:l,description:c,hidden:o,required:a,displayLabel:p,registry:m,uiSchema:f}=t,v=ie(f),y=ne("WrapIfAdditionalTemplate",m,v);return o?s.jsx("div",{className:"hidden",children:n}):s.jsxs(y,{...t,children:[p&&s.jsx($n,{label:r,required:a,id:e}),p&&c?c:null,n,i,l]})}function il(t){const{errors:e=[],idSchema:r}=t;if(e.length===0)return null;const n=Ps(r);return s.jsx("div",{children:s.jsx("ul",{id:n,className:"error-detail bs-callout bs-callout-info",children:e.filter(i=>!!i).map((i,l)=>s.jsx("li",{className:"text-danger",children:i},l))})})}function al(t){const{idSchema:e,help:r}=t;if(!r)return null;const n=_s(e);return typeof r=="string"?s.jsx("p",{id:n,className:"help-block",children:r}):s.jsx("div",{id:n,className:"help-block",children:r})}function ol(t){const{description:e,disabled:r,formData:n,idSchema:i,onAddClick:l,properties:c,readonly:o,registry:a,required:p,schema:m,title:f,uiSchema:v}=t,y=ie(v),_=ne("TitleFieldTemplate",a,y),b=ne("DescriptionFieldTemplate",a,y),{ButtonTemplates:{AddButton:C}}=a.templates;return s.jsxs("fieldset",{id:i.$id,children:[f&&s.jsx(_,{id:xn(i),title:f,required:p,schema:m,uiSchema:v,registry:a}),e&&s.jsx(b,{id:jt(i),description:e,schema:m,uiSchema:v,registry:a}),c.map(d=>d.content),Wi(m,v,n)&&s.jsx(C,{className:"object-property-expand",onClick:l(m),disabled:r||o,uiSchema:v,registry:a})]})}const ll="*";function cl(t){const{id:e,title:r,required:n}=t;return s.jsxs("legend",{id:e,children:[r,n&&s.jsx("span",{className:"required",children:ll})]})}function dl(t){const{schema:e,idSchema:r,reason:n,registry:i}=t,{translateString:l}=i;let c=oe.UnsupportedField;const o=[];return r&&r.$id&&(c=oe.UnsupportedFieldWithId,o.push(r.$id)),n&&(c=c===oe.UnsupportedField?oe.UnsupportedFieldWithReason:oe.UnsupportedFieldWithIdAndReason,o.push(n)),s.jsxs("div",{className:"unsupported-field",children:[s.jsx("p",{children:s.jsx(Dt,{options:{disableParsingRawHTML:!0},children:l(c,o)})}),e&&s.jsx("pre",{children:JSON.stringify(e,null,2)})]})}function ul(t){const{id:e,classNames:r,style:n,disabled:i,label:l,onKeyChange:c,onDropPropertyClick:o,readonly:a,required:p,schema:m,children:f,uiSchema:v,registry:y}=t,{templates:_,translateString:b}=y,{RemoveButton:C}=_.ButtonTemplates,d=b(oe.KeyLabel,[l]);return or in m?s.jsx("div",{className:r,style:n,children:s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-xs-5 form-additional",children:s.jsxs("div",{className:"form-group",children:[s.jsx($n,{label:d,required:p,id:`${e}-key`}),s.jsx("input",{className:"form-control",type:"text",id:`${e}-key`,onBlur:({target:u})=>c(u&&u.value),defaultValue:l})]})}),s.jsx("div",{className:"form-additional form-group col-xs-5",children:f}),s.jsx("div",{className:"col-xs-2",children:s.jsx(C,{className:"array-item-remove btn-block",style:{border:"0"},disabled:i||a,onClick:o(l),uiSchema:v,registry:y})})]})}):s.jsx("div",{className:r,style:n,children:f})}function hl(){return{ArrayFieldDescriptionTemplate:Vo,ArrayFieldItemTemplate:Wo,ArrayFieldTemplate:Ho,ArrayFieldTitleTemplate:qo,ButtonTemplates:el(),BaseInputTemplate:Ko,DescriptionFieldTemplate:tl,ErrorListTemplate:rl,FieldTemplate:sl,FieldErrorTemplate:il,FieldHelpTemplate:al,ObjectFieldTemplate:ol,TitleFieldTemplate:cl,UnsupportedFieldTemplate:dl,WrapIfAdditionalTemplate:ul}}function fl(t){return Object.values(t).every(e=>e!==-1)}function pl({type:t,range:e,value:r,select:n,rootId:i,name:l,disabled:c,readonly:o,autofocus:a,registry:p,onBlur:m,onFocus:f}){const v=i+"_"+t,{SelectWidget:y}=p.widgets;return s.jsx(y,{schema:{type:"integer"},id:v,name:l,className:"form-control",options:{enumOptions:En(e[0],e[1])},placeholder:t,value:r,disabled:c,readonly:o,autofocus:a,onChange:_=>n(t,_),onBlur:m,onFocus:f,registry:p,label:"","aria-describedby":Je(i)})}function ml({time:t=!1,disabled:e=!1,readonly:r=!1,autofocus:n=!1,options:i,id:l,name:c,registry:o,onBlur:a,onFocus:p,onChange:m,value:f}){const{translateString:v}=o,[y,_]=T.useState(f),[b,C]=T.useReducer((g,x)=>({...g,...x}),qt(f,t));T.useEffect(()=>{const g=Ur(b,t);fl(b)&&g!==f?m(g):y!==f&&(_(f),C(qt(f,t)))},[t,f,m,b,y]);const d=T.useCallback((g,x)=>{C({[g]:x})},[]),h=T.useCallback(g=>{if(g.preventDefault(),e||r)return;const x=qt(new Date().toJSON(),t);m(Ur(x,t))},[e,r,t]),u=T.useCallback(g=>{g.preventDefault(),!(e||r)&&m(void 0)},[e,r,m]);return s.jsxs("ul",{className:"list-inline",children:[na(b,t,i.yearsRange,i.format).map((g,x)=>s.jsx("li",{className:"list-inline-item",children:s.jsx(pl,{rootId:l,name:c,select:d,...g,disabled:e,readonly:r,registry:o,onBlur:a,onFocus:p,autofocus:n&&x===0})},x)),(i.hideNowButton!=="undefined"?!i.hideNowButton:!0)&&s.jsx("li",{className:"list-inline-item",children:s.jsx("a",{href:"#",className:"btn btn-info btn-now",onClick:h,children:v(oe.NowLabel)})}),(i.hideClearButton!=="undefined"?!i.hideClearButton:!0)&&s.jsx("li",{className:"list-inline-item",children:s.jsx("a",{href:"#",className:"btn btn-warning btn-clear",onClick:u,children:v(oe.ClearLabel)})})]})}function gl({time:t=!0,...e}){const{AltDateWidget:r}=e.registry.widgets;return s.jsx(r,{time:t,...e})}function yl({schema:t,uiSchema:e,options:r,id:n,value:i,disabled:l,readonly:c,label:o,hideLabel:a,autofocus:p=!1,onBlur:m,onFocus:f,onChange:v,registry:y}){const _=ne("DescriptionFieldTemplate",y,r),b=xt(t),C=T.useCallback(g=>v(g.target.checked),[v]),d=T.useCallback(g=>m(n,g.target.checked),[m,n]),h=T.useCallback(g=>f(n,g.target.checked),[f,n]),u=r.description??t.description;return s.jsxs("div",{className:`checkbox ${l||c?"disabled":""}`,children:[!a&&!!u&&s.jsx(_,{id:jt(n),description:u,schema:t,uiSchema:e,registry:y}),s.jsxs("label",{children:[s.jsx("input",{type:"checkbox",id:n,name:n,checked:typeof i>"u"?!1:i,required:b,disabled:l||c,autoFocus:p,onChange:C,onBlur:d,onFocus:h,"aria-describedby":Je(n)}),ca(s.jsx("span",{children:o}),a)]})]})}function xl({id:t,disabled:e,options:{inline:r=!1,enumOptions:n,enumDisabled:i,emptyValue:l},value:c,autofocus:o=!1,readonly:a,onChange:p,onBlur:m,onFocus:f}){const v=Array.isArray(c)?c:[c],y=T.useCallback(({target:b})=>m(t,_e(b&&b.value,n,l)),[m,t]),_=T.useCallback(({target:b})=>f(t,_e(b&&b.value,n,l)),[f,t]);return s.jsx("div",{className:"checkboxes",id:t,children:Array.isArray(n)&&n.map((b,C)=>{const d=lr(b.value,v),h=Array.isArray(i)&&i.indexOf(b.value)!==-1,u=e||h||a?"disabled":"",g=S=>{S.target.checked?p(ra(C,v,n)):p(ea(C,v,n))},x=s.jsxs("span",{children:[s.jsx("input",{type:"checkbox",id:vn(t,C),name:t,checked:d,value:String(C),disabled:e||h||a,autoFocus:o&&C===0,onChange:g,onBlur:y,onFocus:_,"aria-describedby":Je(t)}),s.jsx("span",{children:b.label})]});return r?s.jsx("label",{className:`checkbox-inline ${u}`,children:x},C):s.jsx("div",{className:`checkbox ${u}`,children:s.jsx("label",{children:x})},C)})})}function vl(t){const{disabled:e,readonly:r,options:n,registry:i}=t,l=ne("BaseInputTemplate",i,n);return s.jsx(l,{type:"color",...t,disabled:e||r})}function bl(t){const{onChange:e,options:r,registry:n}=t,i=ne("BaseInputTemplate",n,r),l=T.useCallback(c=>e(c||void 0),[e]);return s.jsx(i,{type:"date",...t,onChange:l})}function wl(t){const{onChange:e,value:r,options:n,registry:i}=t,l=ne("BaseInputTemplate",i,n);return s.jsx(l,{type:"datetime-local",...t,value:fa(r),onChange:c=>e(da(c))})}function Sl(t){const{options:e,registry:r}=t,n=ne("BaseInputTemplate",r,e);return s.jsx(n,{type:"email",...t})}function jl(t,e){return t===null?null:t.replace(";base64",`;name=${encodeURIComponent(e)};base64`)}function Cl(t){const{name:e,size:r,type:n}=t;return new Promise((i,l)=>{const c=new window.FileReader;c.onerror=l,c.onload=o=>{typeof o.target?.result=="string"?i({dataURL:jl(o.target.result,e),name:e,size:r,type:n}):i({dataURL:null,name:e,size:r,type:n})},c.readAsDataURL(t)})}function Pl(t){return Promise.all(Array.from(t).map(Cl))}function _l({fileInfo:t,registry:e}){const{translateString:r}=e,{dataURL:n,type:i,name:l}=t;return n?["image/jpeg","image/png"].includes(i)?s.jsx("img",{src:n,style:{maxWidth:"100%"},className:"file-preview"}):s.jsxs(s.Fragment,{children:[" ",s.jsx("a",{download:`preview-${l}`,href:n,className:"file-download",children:r(oe.PreviewLabel)})]}):null}function kl({filesInfo:t,registry:e,preview:r,onRemove:n,options:i}){if(t.length===0)return null;const{translateString:l}=e,{RemoveButton:c}=ne("ButtonTemplates",e,i);return s.jsx("ul",{className:"file-info",children:t.map((o,a)=>{const{name:p,size:m,type:f}=o,v=()=>n(a);return s.jsxs("li",{children:[s.jsx(Dt,{children:l(oe.FilesInfo,[p,f,String(m)])}),r&&s.jsx(_l,{fileInfo:o,registry:e}),s.jsx(c,{onClick:v,registry:e})]},a)})})}function Dl(t){return t.reduce((e,r)=>{if(!r)return e;try{const{blob:n,name:i}=Ji(r);return[...e,{dataURL:r,name:i,size:n.size,type:n.type}]}catch{return e}},[])}function El(t){const{disabled:e,readonly:r,required:n,multiple:i,onChange:l,value:c,options:o,registry:a}=t,p=ne("BaseInputTemplate",a,o),m=T.useCallback(y=>{y.target.files&&Pl(y.target.files).then(_=>{const b=_.map(C=>C.dataURL);l(i?c.concat(b):b[0])})},[i,c,l]),f=T.useMemo(()=>Dl(Array.isArray(c)?c:[c]),[c]),v=T.useCallback(y=>{if(i){const _=c.filter((b,C)=>C!==y);l(_)}else l(void 0)},[i,c,l]);return s.jsxs("div",{children:[s.jsx(p,{...t,disabled:e||r,type:"file",required:c?!1:n,onChangeOverride:m,value:"",accept:o.accept?String(o.accept):void 0}),s.jsx(kl,{filesInfo:f,onRemove:v,registry:a,preview:o.filePreview,options:o})]})}function Ol({id:t,value:e}){return s.jsx("input",{type:"hidden",id:t,name:t,value:typeof e>"u"?"":e})}function Nl(t){const{options:e,registry:r}=t,n=ne("BaseInputTemplate",r,e);return s.jsx(n,{type:"password",...t})}function Tl({options:t,value:e,required:r,disabled:n,readonly:i,autofocus:l=!1,onBlur:c,onFocus:o,onChange:a,id:p}){const{enumOptions:m,enumDisabled:f,inline:v,emptyValue:y}=t,_=T.useCallback(({target:C})=>c(p,_e(C&&C.value,m,y)),[c,p]),b=T.useCallback(({target:C})=>o(p,_e(C&&C.value,m,y)),[o,p]);return s.jsx("div",{className:"field-radio-group",id:p,children:Array.isArray(m)&&m.map((C,d)=>{const h=lr(C.value,e),u=Array.isArray(f)&&f.indexOf(C.value)!==-1,g=n||u||i?"disabled":"",x=()=>a(C.value),S=s.jsxs("span",{children:[s.jsx("input",{type:"radio",id:vn(p,d),checked:h,name:p,required:r,value:String(d),disabled:n||u||i,autoFocus:l&&d===0,onChange:x,onBlur:_,onFocus:b,"aria-describedby":Je(p)}),s.jsx("span",{children:C.label})]});return v?s.jsx("label",{className:`radio-inline ${g}`,children:S},d):s.jsx("div",{className:`radio ${g}`,children:s.jsx("label",{children:S})},d)})})}function Il(t){const{value:e,registry:{templates:{BaseInputTemplate:r}}}=t;return s.jsxs("div",{className:"field-range-wrapper",children:[s.jsx(r,{type:"range",...t}),s.jsx("span",{className:"range-view",children:e})]})}function Qt(t,e){return e?Array.from(t.target.options).slice().filter(r=>r.selected).map(r=>r.value):t.target.value}function Al({schema:t,id:e,options:r,value:n,required:i,disabled:l,readonly:c,multiple:o=!1,autofocus:a=!1,onChange:p,onBlur:m,onFocus:f,placeholder:v}){const{enumOptions:y,enumDisabled:_,emptyValue:b}=r,C=o?[]:"",d=T.useCallback(S=>{const w=Qt(S,o);return f(e,_e(w,y,b))},[f,e,t,o,y,b]),h=T.useCallback(S=>{const w=Qt(S,o);return m(e,_e(w,y,b))},[m,e,t,o,y,b]),u=T.useCallback(S=>{const w=Qt(S,o);return p(_e(w,y,b))},[p,t,o,y,b]),g=ta(n,y,o),x=!o&&t.default===void 0;return s.jsxs("select",{id:e,name:e,multiple:o,className:"form-control",value:typeof g>"u"?C:g,required:i,disabled:l||c,autoFocus:a,onBlur:h,onFocus:d,onChange:u,"aria-describedby":Je(e),children:[x&&s.jsx("option",{value:"",children:v}),Array.isArray(y)&&y.map(({value:S,label:w},I)=>{const k=_&&_.indexOf(S)!==-1;return s.jsx("option",{value:String(I),disabled:k,children:w},I)})]})}function Ml(t){const{options:e,registry:r}=t,n=ne("BaseInputTemplate",r,e);return s.jsx(n,{...t})}function Fl(t){const{onChange:e,options:r,registry:n}=t,i=ne("BaseInputTemplate",n,r),l=T.useCallback(c=>e(c?`${c}:00`:void 0),[e]);return s.jsx(i,{type:"time",...t,onChange:l})}function Rl(t){const{options:e,registry:r}=t,n=ne("BaseInputTemplate",r,e);return s.jsx(n,{type:"url",...t})}function Ll(t){const{options:e,registry:r}=t,n=ne("BaseInputTemplate",r,e);return s.jsx(n,{type:"number",...t})}function $l(){return{AltDateWidget:ml,AltDateTimeWidget:gl,CheckboxWidget:yl,CheckboxesWidget:xl,ColorWidget:vl,DateWidget:bl,DateTimeWidget:wl,EmailWidget:Sl,FileWidget:El,HiddenWidget:Ol,PasswordWidget:Nl,RadioWidget:Tl,RangeWidget:Il,SelectWidget:Al,TextWidget:Ml,TextareaWidget:ks,TimeWidget:Fl,UpDownWidget:Ll,URLWidget:Rl}}function zl(){return{fields:Bo(),templates:hl(),widgets:$l(),rootSchema:{},formContext:{},translateString:Qi}}class Ul extends T.Component{formElement;constructor(e){if(super(e),!e.validator)throw new Error("A validator is required for Form functionality to work");this.state=this.getStateFromProps(e,e.formData),this.props.onChange&&!ce(this.state.formData,this.props.formData)&&this.props.onChange(this.state),this.formElement=T.createRef()}getSnapshotBeforeUpdate(e,r){if(!ce(this.props,e)){const n=xa(this.props.formData,e.formData),i=!ce(e.schema,this.props.schema),l=n.length>0||!ce(e.formData,this.props.formData),c=this.getStateFromProps(this.props,this.props.formData,i||l?void 0:this.state.retrievedSchema,i,n),o=!ce(c,r);return{nextState:c,shouldUpdate:o}}return{shouldUpdate:!1}}componentDidUpdate(e,r,n){if(n.shouldUpdate){const{nextState:i}=n;!ce(i.formData,this.props.formData)&&!ce(i.formData,r.formData)&&this.props.onChange&&this.props.onChange(i),this.setState(i)}}getStateFromProps(e,r,n,i=!1,l=[]){const c=this.state||{},o="schema"in e?e.schema:this.props.schema,a=("uiSchema"in e?e.uiSchema:this.props.uiSchema)||{},p=typeof r<"u",m="liveValidate"in e?e.liveValidate:this.props.liveValidate,f=p&&!e.noValidate&&m,v=o,y="experimental_defaultFormStateBehavior"in e?e.experimental_defaultFormStateBehavior:this.props.experimental_defaultFormStateBehavior,_="experimental_customMergeAllOf"in e?e.experimental_customMergeAllOf:this.props.experimental_customMergeAllOf;let b=c.schemaUtils;(!b||b.doesSchemaUtilsDiffer(e.validator,v,y,_))&&(b=Gi(e.validator,v,y,_));const C=b.getDefaultFormState(o,r),d=this.updateRetrievedSchema(n??b.retrieveSchema(o,C)),h=()=>e.noValidate||i?{errors:[],errorSchema:{}}:e.liveValidate?{errors:c.errors||[],errorSchema:c.errorSchema||{}}:{errors:c.schemaValidationErrors||[],errorSchema:c.schemaValidationErrorSchema||{}};let u,g,x=c.schemaValidationErrors,S=c.schemaValidationErrorSchema;if(f){const k=this.validate(C,o,b,d);u=k.errors,n===void 0?g=k.errorSchema:g=Ye(this.state?.errorSchema,k.errorSchema,"preventDuplicates"),x=u,S=g}else{const k=h();if(u=k.errors,g=k.errorSchema,l.length>0){const O=l.reduce((N,A)=>(N[A]=void 0,N),{});g=S=Ye(k.errorSchema,O,"preventDuplicates")}}if(e.extraErrors){const k=At({errorSchema:g,errors:u},e.extraErrors);g=k.errorSchema,u=k.errors}const w=b.toIdSchema(d,a["ui:rootFieldId"],C,e.idPrefix,e.idSeparator);return{schemaUtils:b,schema:o,uiSchema:a,idSchema:w,formData:C,edit:p,errors:u,errorSchema:g,schemaValidationErrors:x,schemaValidationErrorSchema:S,retrievedSchema:d}}shouldComponentUpdate(e,r){return ha(this,e,r)}getPreviousCustomValidateErrors(){const{customValidate:e,uiSchema:r}=this.props,n=this.state.formData;let i={};if(typeof e=="function"){const l=e(n,Ds(n),r);i=Es(l)}return i}validate(e,r=this.props.schema,n,i){const l=n||this.state.schemaUtils,{customValidate:c,transformErrors:o,uiSchema:a}=this.props,p=i??l.retrieveSchema(r,e);return l.getValidator().validateFormData(e,p,c,o,a)}renderErrors(e){const{errors:r,errorSchema:n,schema:i,uiSchema:l}=this.state,{formContext:c}=this.props,o=ie(l),a=ne("ErrorListTemplate",e,o);return r&&r.length?s.jsx(a,{errors:r,errorSchema:n||{},schema:i,uiSchema:l,formContext:c,registry:e}):null}getUsedFormData=(e,r)=>{if(r.length===0&&typeof e!="object")return e;const n=Br(e,r);return Array.isArray(e)?Object.keys(n).map(i=>n[i]):n};getFieldNames=(e,r)=>{const n=(i,l=[],c=[[]])=>(Object.keys(i).forEach(o=>{if(typeof i[o]=="object"){const a=c.map(p=>[...p,o]);i[o][gn]&&i[o][pt]!==""?l.push(i[o][pt]):n(i[o],l,a)}else o===pt&&i[o]!==""&&c.forEach(a=>{const p=te(r,a);(typeof p!="object"||ar(p)||Array.isArray(p)&&p.every(m=>typeof m!="object"))&&l.push(a)})}),l);return n(e)};omitExtraData=e=>{const{schema:r,schemaUtils:n}=this.state,i=n.retrieveSchema(r,e),l=n.toPathSchema(i,"",e),c=this.getFieldNames(l,e);return this.getUsedFormData(e,c)};filterErrorsBasedOnSchema(e,r,n){const{retrievedSchema:i,schemaUtils:l}=this.state,c=r??i,o=l.toPathSchema(c,"",n),a=this.getFieldNames(o,n),p=Br(e,a);r?.type!=="object"&&r?.type!=="array"&&(p.__errors=e.__errors);const m=this.getPreviousCustomValidateErrors(),f=(y=[],_)=>y.length===0?y:y.filter(b=>!_.includes(b)),v=(y,_={})=>(va(y,(b,C)=>{const d=_[C];yn(b)||Array.isArray(b)&&b.length===0?delete y[C]:nt(b)&&nt(d)&&Array.isArray(d?.__errors)?y[C]=f(b.__errors,d.__errors):typeof b=="object"&&!Array.isArray(b.__errors)&&v(b,_[C])}),y);return v(p,m)}onChange=(e,r,n)=>{const{extraErrors:i,omitExtraData:l,liveOmit:c,noValidate:o,liveValidate:a,onChange:p}=this.props,{schemaUtils:m,schema:f}=this.state;let v=this.state.retrievedSchema;if(nt(e)||Array.isArray(e)){const C=this.getStateFromProps(this.props,e);e=C.formData,v=C.retrievedSchema}const y=!o&&a;let _={formData:e,schema:f},b=e;if(l===!0&&c===!0&&(b=this.omitExtraData(e),_={formData:b}),y){const C=this.validate(b,f,m,v);let d=C.errors,h=C.errorSchema;const u=d,g=h;if(i){const x=At(C,i);h=x.errorSchema,d=x.errors}if(r){const x=this.filterErrorsBasedOnSchema(r,v,b);h=Ye(h,x,"preventDuplicates")}_={formData:b,errors:d,errorSchema:h,schemaValidationErrors:u,schemaValidationErrorSchema:g}}else if(!o&&r){const C=i?Ye(r,i,"preventDuplicates"):r;_={formData:b,errorSchema:C,errors:vr(C)}}this.setState(_,()=>p&&p({...this.state,..._},n))};updateRetrievedSchema(e){return ce(e,this.state?.retrievedSchema)?this.state.retrievedSchema:e}reset=()=>{const{onChange:e}=this.props,i={formData:this.getStateFromProps(this.props,void 0).formData,errorSchema:{},errors:[],schemaValidationErrors:[],schemaValidationErrorSchema:{}};this.setState(i,()=>e&&e({...this.state,...i}))};onBlur=(e,r)=>{const{onBlur:n}=this.props;n&&n(e,r)};onFocus=(e,r)=>{const{onFocus:n}=this.props;n&&n(e,r)};onSubmit=e=>{if(e.preventDefault(),e.target!==e.currentTarget)return;e.persist();const{omitExtraData:r,extraErrors:n,noValidate:i,onSubmit:l}=this.props;let{formData:c}=this.state;if(r===!0&&(c=this.omitExtraData(c)),i||this.validateFormWithFormData(c)){const o=n||{},a=n?vr(n):[];this.setState({formData:c,errors:a,errorSchema:o,schemaValidationErrors:[],schemaValidationErrorSchema:{}},()=>{l&&l({...this.state,formData:c,status:"submitted"},e)})}};getRegistry(){const{translateString:e,uiSchema:r={}}=this.props,{schemaUtils:n}=this.state,{fields:i,templates:l,widgets:c,formContext:o,translateString:a}=zl();return{fields:{...i,...this.props.fields},templates:{...l,...this.props.templates,ButtonTemplates:{...l.ButtonTemplates,...this.props.templates?.ButtonTemplates}},widgets:{...c,...this.props.widgets},rootSchema:this.props.schema,formContext:this.props.formContext||o,schemaUtils:n,translateString:e||a,globalUiOptions:r[Os]}}submit=()=>{if(this.formElement.current){const e=new CustomEvent("submit",{cancelable:!0});e.preventDefault(),this.formElement.current.dispatchEvent(e),this.formElement.current.requestSubmit()}};focusOnError(e){const{idPrefix:r="root",idSeparator:n="_"}=this.props,{property:i}=e,l=Ns(i);l[0]===""?l[0]=r:l.unshift(r);const c=l.join(n);let o=this.formElement.current.elements[c];o||(o=this.formElement.current.querySelector(`input[id^="${c}"`)),o&&o.length&&(o=o[0]),o&&o.focus()}validateFormWithFormData=e=>{const{extraErrors:r,extraErrorsBlockSubmit:n,focusOnFirstError:i,onError:l}=this.props,{errors:c}=this.state,o=this.validate(e);let a=o.errors,p=o.errorSchema;const m=a,f=p,v=a.length>0||r&&n;if(v){if(r){const y=At(o,r);p=y.errorSchema,a=y.errors}i&&(typeof i=="function"?i(a[0]):this.focusOnError(a[0])),this.setState({errors:a,errorSchema:p,schemaValidationErrors:m,schemaValidationErrorSchema:f},()=>{l?l(a):console.error("Form validation failed",a)})}else c.length>0&&this.setState({errors:[],errorSchema:{},schemaValidationErrors:[],schemaValidationErrorSchema:{}});return!v};validateForm(){const{omitExtraData:e}=this.props;let{formData:r}=this.state;return e===!0&&(r=this.omitExtraData(r)),this.validateFormWithFormData(r)}render(){const{children:e,id:r,idPrefix:n,idSeparator:i,className:l="",tagName:c,name:o,method:a,target:p,action:m,autoComplete:f,enctype:v,acceptcharset:y,acceptCharset:_,noHtml5Validate:b=!1,disabled:C,readonly:d,formContext:h,showErrorList:u="top",_internalFormWrapper:g}=this.props,{schema:x,uiSchema:S,formData:w,errorSchema:I,idSchema:k}=this.state,O=this.getRegistry(),{SchemaField:N}=O.fields,{SubmitButton:A}=O.templates.ButtonTemplates,E=g?c:void 0,P=g||c||"form";let{[wt]:j={}}=ie(S);C&&(j={...j,props:{...j.props,disabled:!0}});const U={[mt]:{[wt]:j}};return s.jsxs(P,{className:l||"rjsf",id:r,name:o,method:a,target:p,action:m,autoComplete:f,encType:v,acceptCharset:_||y,noValidate:b,onSubmit:this.onSubmit,as:E,ref:this.formElement,children:[u==="top"&&this.renderErrors(O),s.jsx(N,{name:"",schema:x,uiSchema:S,errorSchema:I,idSchema:k,idPrefix:n,idSeparator:i,formContext:h,formData:w,onChange:this.onChange,onBlur:this.onBlur,onFocus:this.onFocus,registry:O,disabled:C,readonly:d}),e||s.jsx(A,{uiSchema:U,registry:O}),u==="bottom"&&this.renderErrors(O)]})}}function Bl({textInput:t,setTextInput:e,onSubmit:r,onCancel:n}){return s.jsx("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[var(--vp-surface)] p-4 rounded-lg border border-[var(--vp-border)] w-64 z-50",children:s.jsxs("form",{onSubmit:i=>{i.preventDefault(),r()},children:[s.jsx("input",{type:"text",value:t,onChange:i=>e(i.target.value),onKeyDown:i=>{i.key==="Enter"&&(i.preventDefault(),r())},className:"w-full p-2 mb-2 bg-[var(--vp-surface-elevated)] text-white border border-[var(--vp-border)] rounded",placeholder:"Enter text...",autoFocus:!0}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(le,{variant:"outline",size:"sm",onClick:n,className:"text-white border-white hover:bg-[var(--vp-surface-elevated)]",children:"Cancel"}),s.jsx(le,{type:"submit",size:"sm",className:"bg-[var(--vp-accent)] text-white hover:bg-[var(--vp-accent)]/80 focus:ring-2 focus:ring-[var(--vp-accent)]",children:"Add"})]})]})})}function Vl({gridSize:t,setGridSize:e,onSubmit:r,onCancel:n}){const i=t.includes(","),[l,c]=st.useState(i),[o,a]=i?t.split(",").map(y=>y.trim()):[t,t],[p,m]=st.useState(o),[f,v]=st.useState(a);return s.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[var(--vp-surface)] p-4 rounded-lg border border-[var(--vp-border)] w-80 z-50",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-3",children:"Grid Size"}),s.jsxs("form",{onSubmit:y=>{y.preventDefault(),r()},children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("input",{type:"checkbox",id:"customSizeCheckbox",checked:l,onChange:y=>c(y.target.checked),className:"w-4 h-4 bg-[var(--vp-surface-elevated)] border-[var(--vp-border)] rounded text-blue-600 focus:ring-blue-500"}),s.jsx("label",{htmlFor:"customSizeCheckbox",className:"ml-2 text-white text-sm",children:"Custom size (Columns × Rows)"})]}),l?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("input",{type:"number",value:p,onChange:y=>{m(y.target.value),e(`${y.target.value},${f}`)},onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),r())},className:"flex-1 p-2 bg-[var(--vp-surface-elevated)] text-white border border-[var(--vp-border)] rounded",placeholder:"Cols",min:"1",max:"20",autoFocus:!0}),s.jsx("span",{className:"text-white text-lg font-bold",children:"×"}),s.jsx("input",{type:"number",value:f,onChange:y=>{v(y.target.value),e(`${p},${y.target.value}`)},onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),r())},className:"flex-1 p-2 bg-[var(--vp-surface-elevated)] text-white border border-[var(--vp-border)] rounded",placeholder:"Rows",min:"1",max:"20"})]}),s.jsx("p",{className:"text-[var(--vp-text-muted)] text-sm mb-3",children:"Enter columns × rows (e.g., 6×4)"})]}):s.jsxs(s.Fragment,{children:[s.jsx("input",{type:"number",value:t.includes(",")?t.split(",")[0]:t,onChange:y=>e(y.target.value),onKeyDown:y=>{y.key==="Enter"&&(y.preventDefault(),r())},className:"w-full p-2 mb-2 bg-[var(--vp-surface-elevated)] text-white border border-[var(--vp-border)] rounded",placeholder:"Grid size (e.g., 3 for 3x3)",min:"1",max:"20",autoFocus:!0}),s.jsx("p",{className:"text-[var(--vp-text-muted)] text-sm mb-3",children:"Enter a number for NxN grid (1-20)"})]}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(le,{variant:"outline",size:"sm",onClick:n,className:"text-white border-white hover:bg-[var(--vp-surface-elevated)]",children:"Cancel"}),s.jsx(le,{type:"submit",size:"sm",className:"bg-[var(--vp-accent)] text-white hover:bg-green-700 focus:ring-2 focus:ring-green-500",children:"Create Grid"})]})]})]})}function zn({saveFileName:t,setSaveFileName:e,onSubmit:r,onCancel:n}){return s.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-[var(--vp-surface)] p-4 rounded-lg border border-[var(--vp-border)] w-80 z-50",children:[s.jsx("h3",{className:"text-white text-lg font-semibold mb-3",children:"Export Drawing"}),s.jsxs("form",{onSubmit:i=>{i.preventDefault(),r()},children:[s.jsx("label",{className:"block text-white text-sm font-medium mb-2",children:"File Name:"}),s.jsx("input",{type:"text",value:t,onChange:i=>e(i.target.value),onKeyDown:i=>{i.key==="Enter"&&(i.preventDefault(),r())},className:"w-full p-2 mb-2 bg-[var(--vp-surface-elevated)] text-white border border-[var(--vp-border)] rounded",placeholder:"Enter filename...",autoFocus:!0}),s.jsx("p",{className:"text-[var(--vp-text-muted)] text-sm mb-4",children:"File will be saved as PNG format (.png will be added automatically)"}),s.jsxs("div",{className:"flex justify-end space-x-2",children:[s.jsx(le,{variant:"outline",size:"sm",onClick:n,className:"text-white border-white hover:bg-[var(--vp-surface-elevated)]",children:"Cancel"}),s.jsx(le,{type:"submit",size:"sm",className:"bg-[var(--vp-accent)] text-white hover:bg-[var(--vp-accent)]/80 focus:ring-2 focus:ring-[var(--vp-accent)]",children:"Export"})]})]})]})}function Wl({title:t,description:e,schema:r,uiSchema:n,currentSettings:i,currentModel:l,onSettingsChange:c,onReset:o,onCancel:a,onApply:p}){const[m,f]=st.useState(i);st.useEffect(()=>{f(i)},[i]);const v=b=>{f(b.formData),c(b.formData)},y=()=>{o(),f(i)},_=()=>{p()};return s.jsx("div",{className:"fixed inset-0 bg-black/80 flex items-center justify-center z-50 backdrop-blur-sm",children:s.jsxs("div",{className:"bg-[var(--vp-surface)] rounded-lg border border-[var(--vp-border)] w-full max-w-md max-h-[85vh] overflow-hidden flex flex-col shadow-2xl",children:[s.jsxs("div",{className:"px-4 py-3 border-b border-[var(--vp-border)]",children:[s.jsxs("h2",{className:"text-lg font-semibold text-white",children:[t,s.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-600 text-white",children:l})]}),s.jsx("p",{className:"text-gray-300 text-sm mt-1",children:e})]}),s.jsx("div",{className:"flex-1 overflow-auto bg-[var(--vp-surface)]",children:s.jsxs(bn,{defaultValue:"settings",className:"w-full h-full",children:[s.jsxs(wn,{className:"grid w-full grid-cols-2 bg-[var(--vp-surface-elevated)] mx-4 mt-3 mb-3 p-1",children:[s.jsx(it,{value:"settings",className:"text-sm font-medium transition-all",children:"Model Settings"}),s.jsx(it,{value:"preview",className:"text-sm font-medium transition-all",children:"Settings Preview"})]}),s.jsx(br,{value:"settings",className:"m-0 data-[state=active]:bg-[var(--vp-surface)]",children:s.jsx("div",{className:"px-4 pb-4 pt-2",children:s.jsx(Ul,{schema:r,uiSchema:n,formData:m,onChange:v,validator:Ts,className:"rjsf-form-dark",liveValidate:!0,children:s.jsx("div",{})})})}),s.jsx(br,{value:"preview",className:"m-0 data-[state=active]:bg-[var(--vp-surface)]",children:s.jsx("div",{className:"px-4 pb-4 pt-2",children:s.jsxs("div",{className:"bg-[var(--vp-surface-elevated)] rounded-md p-4 max-h-96 overflow-y-auto border border-[var(--vp-border)]",children:[s.jsx("h3",{className:"text-white font-semibold mb-3 text-sm",children:"Current Settings JSON"}),s.jsx("pre",{className:"text-[var(--vp-text-muted)] text-xs whitespace-pre-wrap font-mono leading-relaxed",children:JSON.stringify(m,null,2)})]})})})]})}),s.jsxs("div",{className:"px-4 py-3 border-t border-[var(--vp-border)] flex justify-between items-center",children:[s.jsx(le,{variant:"outline",onClick:y,className:"bg-[var(--vp-accent)] text-gray-300 border-gray-600 hover:bg-gray-700 hover:text-white text-sm px-3 py-1.5",children:"Reset to Defaults"}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx(le,{variant:"outline",onClick:a,className:"bg-[var(--vp-accent)] text-gray-300 border-gray-600 hover:bg-gray-700 hover:text-white text-sm px-3 py-1.5",children:"Cancel"}),s.jsx(le,{onClick:_,className:"bg-[var(--vp-accent)] text-white hover:bg-[var(--vp-accent)]/80 focus:ring-2 focus:ring-[var(--vp-accent)] text-sm px-4 py-1.5",children:"Apply Settings"})]})]})]})})}const be=({icon:t,currentTool:e,toolType:r,onClick:n,fillOnActive:i=!0,tooltip:l})=>{const c=e===r;return s.jsx(le,{variant:"ghost",size:"icon",className:`w-6 h-6 p-0.5 transition-all ${c?"bg-[var(--vp-accent)] hover:bg-green-700 text-white":"bg-white/20 text-white/90 hover:bg-[#9ca3af]/20 hover:text-white"}`,onClick:n,title:l,children:s.jsx(t,{className:"h-3 w-3",fill:i&&c?"white":"none"})})},Hl=({colors:t,onToolChange:e,onSave:r,onClear:n})=>{const[i,l]=T.useState({x:16,y:16}),[c,o]=T.useState(!1),[a,p]=T.useState({x:0,y:0}),m=T.useRef(null),{currentTool:f,currentColor:v,hasActiveGrid:y,setCurrentColor:_,setShowGridDialog:b}=gt(),C=()=>{console.log("Grid button clicked!",{hasActiveGrid:y}),y?(console.log("Active grid exists, switching to grid tool"),e("grid")):(console.log("No active grid, showing dialog and switching to grid tool"),e("grid"),b(!0))},d=()=>{e("text")},h=u=>{const g=u.target,x=g.tagName==="BUTTON"||g.closest("button");(g===u.currentTarget||g.closest(".drag-handle"))&&!x&&(u.preventDefault(),u.stopPropagation(),o(!0),p({x:u.clientX-i.x,y:u.clientY-i.y}))};return T.useEffect(()=>{const u=x=>{if(!c)return;const S=x.clientX-a.x,w=x.clientY-a.y,I=window.innerWidth-80,k=window.innerHeight-200;l({x:Math.max(0,Math.min(S,I)),y:Math.max(0,Math.min(w,k))})},g=()=>{o(!1)};return c&&(document.addEventListener("mousemove",u),document.addEventListener("mouseup",g)),()=>{document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",g)}},[c,a]),s.jsxs("div",{ref:m,className:"absolute z-30 bg-[var(--vp-surface)]/95 backdrop-blur-sm rounded border border-[var(--vp-border)] p-1 w-20 select-none",style:{left:i.x,top:i.y,userSelect:"none",pointerEvents:"auto"},onMouseDown:h,children:[s.jsx("div",{className:`flex items-center justify-center mb-1 drag-handle ${c?"cursor-grabbing":"cursor-grab"}`,children:s.jsx(Pt,{size:8,className:"text-[var(--vp-text-muted)]"})}),s.jsxs("div",{className:"grid grid-cols-2 gap-0.5",children:[s.jsx(be,{currentTool:f,toolType:"pen",icon:ki,onClick:()=>e("pen"),tooltip:"Freehand Pen"}),s.jsx(be,{currentTool:f,toolType:"line",icon:_n,onClick:()=>e("line"),tooltip:"Draw Line"}),s.jsx(be,{currentTool:f,toolType:"rectangle",icon:Mi,onClick:()=>e("rectangle"),tooltip:"Draw Rectangle"}),s.jsx(be,{currentTool:f,toolType:"circle",icon:Is,onClick:()=>e("circle"),tooltip:"Draw Circle"}),s.jsx(be,{currentTool:f,toolType:"text",icon:Ri,onClick:d,tooltip:"Add Text"}),s.jsx(be,{currentTool:f,toolType:"compass",icon:xi,onClick:()=>e("compass"),tooltip:"Draw Angle Arc"}),s.jsx(be,{currentTool:f,toolType:"grid",icon:wi,onClick:C,tooltip:"Create Grid"}),s.jsx(be,{currentTool:f,toolType:"save",icon:Ti,onClick:r,tooltip:"Save Drawing"}),s.jsx(be,{currentTool:f,toolType:"select",icon:Pn,onClick:()=>e("select"),tooltip:"Select Tool"}),s.jsx(be,{currentTool:f,toolType:"tracking",icon:Ii,onClick:()=>e("tracking"),tooltip:"Object Tracking"}),s.jsx(be,{currentTool:f,toolType:"clear",icon:Fi,onClick:n,tooltip:"Clear All"})]}),s.jsx("div",{className:"mt-1 pt-1 border-t border-[var(--vp-border)]",children:s.jsxs("div",{className:"grid grid-cols-4 gap-0.5 p-0.5",children:[t.map(u=>s.jsx("div",{className:`w-4 h-4 rounded-full cursor-pointer border-2 transition-all hover:scale-110 ${v===u?"border-white shadow-lg":"border-gray-600"}`,style:{backgroundColor:u},onClick:()=>_(u),title:`Color: ${u}`},u)),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:"color",value:v,onChange:u=>_(u.target.value),className:"w-4 h-4 rounded-full cursor-pointer border-2 border-gray-600 opacity-0 absolute inset-0 z-10",title:"Custom Color"}),s.jsx("div",{className:"w-4 h-4 rounded-full border-2 border-gray-600 bg-gradient-to-br from-red-400 via-purple-400 to-blue-400 flex items-center justify-center cursor-pointer hover:scale-110 transition-all pointer-events-none",children:s.jsx(vi,{className:"w-2 h-2 text-white drop-shadow-sm"})})]})]})})]})};function ql({isPlaying:t,isFullscreen:e,isSmallVideo:r=!1,playerRef:n}){const i=T.useRef(null),{isDrawing:l,currentTool:c,currentColor:o,drawingObjects:a,currentObject:p,textInput:m,textPosition:f,showTextInput:v,showGridDialog:y,gridSize:_,showSaveDialog:b,saveFileName:C,currentStrategy:d,setIsDrawing:h,setDrawingObjects:u,setCurrentObject:g,setTextInput:x,setTextPosition:S,setShowTextInput:w,setShowGridDialog:I,setGridSize:k,setShowSaveDialog:O,setSaveFileName:N,clearCanvas:A,resetActiveCompassObjects:E}=gt(),P=["#ff9a9e","#88c0ff","#ffd93d","#c792ea","#00ff00","#ffffff","#000000"];T.useEffect(()=>{const M=i.current;if(!M)return;let B=0,V=0;const X=document.querySelector(".react-player");if(X)B=X.clientWidth,V=X.clientHeight;else{const ee=i.current?.parentElement;ee&&(B=ee.clientWidth,V=ee.clientHeight)}if(B===0||V===0)return;const W=M.width,Z=M.height;M.width=B,M.height=V,W>0&&Z>0&&(Math.abs(W-M.width)>5||Math.abs(Z-M.height)>5)&&u(ee=>ee.map(H=>j(H,W,Z,M.width,M.height)));const Q=()=>{const ee=M.width,H=M.height;let q=0,ge=0;const Oe=document.querySelector(".react-player");if(Oe)q=Oe.clientWidth,ge=Oe.clientHeight;else{const fe=i.current?.parentElement;fe&&(q=fe.clientWidth,ge=fe.clientHeight)}q===0||ge===0||(M.width=q,M.height=ge,ee>0&&H>0&&(Math.abs(ee-M.width)>5||Math.abs(H-M.height)>5)&&u(fe=>fe.map(Ze=>j(Ze,ee,H,M.width,M.height))),K())};return window.addEventListener("resize",Q),K(),()=>{window.removeEventListener("resize",Q)}},[n,a]),T.useEffect(()=>{if(e===void 0)return;const M=()=>{const W=i.current;if(!W)return;const Z=document.querySelector(".react-player");if(!Z)return;const Q=W.width,ee=W.height;W.width=Z.clientWidth,W.height=Z.clientHeight,Q>0&&ee>0&&(Math.abs(Q-W.width)>5||Math.abs(ee-W.height)>5)&&u(H=>H.map(q=>j(q,Q,ee,W.width,W.height))),K()};M();const B=setTimeout(M,100),V=setTimeout(M,300),X=setTimeout(M,500);return()=>{clearTimeout(B),clearTimeout(V),clearTimeout(X)}},[e]),T.useEffect(()=>{if(!t)return;const M=setInterval(()=>{U(),K()},1e3/30);return()=>clearInterval(M)},[t,a]),T.useEffect(()=>{const M=a.map(V=>{if(V.type==="tracking"&&V.finalized&&!V.isSelecting){const X=$e.getStrategy("tracking");return X.setVideoPlayingState(t),t?X.startTracking(V):X.stopTracking(V)}return V});M.some((V,X)=>{const W=a[X];return V.trackingState?.isTracking!==W.trackingState?.isTracking})&&u(M)},[t]);const j=(M,B,V,X,W)=>{const Z=X/B,Q=W/V,ee={...M};return M.type==="pen"&&M.points&&(ee.points=M.points.map(H=>({x:H.x*Z,y:H.y*Q}))),M.x!==void 0&&(ee.x=M.x*Z),M.y!==void 0&&(ee.y=M.y*Q),M.width!==void 0&&(ee.width=M.width*Z),M.height!==void 0&&(ee.height=M.height*Q),ee},U=()=>{if(!i.current||!t)return;let B=null;try{if(n.current){const W=n.current.getInternalPlayer();W&&W.tagName==="VIDEO"&&(B=W)}}catch{const Z=document.querySelectorAll("video");Z.length>0&&(B=Z[0])}if(!B)return;const V=a.map(W=>{if(W.type==="tracking"&&W.trackingState?.isTracking){const Z=$e.getStrategy("tracking");return Z.setVideoElement(B),Z.updateTracking(W)}return W});V.some((W,Z)=>{const Q=a[Z];return W.x!==Q.x||W.y!==Q.y})&&u(V)},K=()=>{const M=i.current;if(!M)return;const B=M.getContext("2d");B&&(B.clearRect(0,0,M.width,M.height),B.fillStyle="rgba(0, 0, 0, 0.1)",B.fillRect(0,0,M.width,M.height),a.forEach(V=>{B.strokeStyle=V.color,B.fillStyle=V.color,B.lineWidth=3,V.selected&&$e.getStrategy(V.type).drawSelection(B,V),$e.getStrategy(V.type).drawObject(B,V)}))},Y=()=>{if(!C.trim()){O(!1);return}const M=i.current,B=n.current;if(!M)return;const V=document.createElement("canvas"),X=V.getContext("2d");if(!X)return;if(V.width=M.width,V.height=M.height,B)try{const Q=B.getInternalPlayer();Q&&Q.videoWidth>0?X.drawImage(Q,0,0,V.width,V.height):(X.fillStyle="#000000",X.fillRect(0,0,V.width,V.height))}catch(Q){console.warn("Could not capture video frame, using black background:",Q),X.fillStyle="#000000",X.fillRect(0,0,V.width,V.height)}else X.fillStyle="#000000",X.fillRect(0,0,V.width,V.height);X.drawImage(M,0,0);const W=document.createElement("a"),Z=C.trim().endsWith(".png")?C.trim():`${C.trim()}.png`;W.download=Z,W.href=V.toDataURL("image/png"),document.body.appendChild(W),W.click(),document.body.removeChild(W),O(!1)},D=M=>{const B=Bi(i.current,M);if(c==="select"){const X=a.findIndex(W=>$e.getStrategy(W.type).isPointInObject(W,B.x,B.y));u(W=>W.map((Z,Q)=>({...Z,selected:Q===X}))),X!==-1&&(h(!0),g(a[X]));return}if(c==="text"){S(B),w(!0);return}if(c==="grid"&&a.findIndex(W=>W.type==="grid"&&W.clickCount===1)===-1){I(!0);return}if(d.handleClick){const X=a.findIndex(W=>W.type===c&&!W.finalized&&W.clickCount!==void 0&&W.clickCount<3);if(X!==-1){const W=a[X],Z=d.handleClick(W,B.x,B.y);Z?(u(Q=>Q.map((ee,H)=>H===X?Z:ee)),Z.finalized?(g(null),h(!1)):(g(Z),h(!0))):(u(Q=>Q.filter((ee,H)=>H!==X)),g(null),h(!1)),K();return}else if(c==="grid"){const W=d.createObject(B.x,B.y,o);u(Z=>[...Z,W]),g(W),h(!0),K();return}}h(!0);const V=d.createObject(B.x,B.y,o);g(V),u(X=>[...X,V])},R=M=>{if(!l||!p)return;const B=i.current;if(!B)return;const V=B.getBoundingClientRect(),X=M.clientX-V.left,W=M.clientY-V.top,Q=$e.getStrategy(p.type,c==="tracking"?d.cv:void 0).updateObject(p,X,W);u(ee=>ee.map(H=>H===p?Q:H)),g(Q),K()},$=()=>{if(c==="tracking"&&p){const B=d.finalizeObject(p);u(V=>V.map(X=>X===p?B:X)),h(!1),g(null);return}if(!(p&&p.type==="compass")){if(p&&p.type==="grid"&&p.draggedCornerIndex!==null){const M={...p,draggedCornerIndex:null};u(B=>B.map(V=>V===p?M:V)),g(M);return}h(!1),g(null)}},G=()=>{if(!m.trim()){w(!1);return}const M={type:"text",x:f.x,y:f.y,text:m,color:o};u(B=>[...B,M]),x(""),w(!1),K()},J=()=>{w(!1)},se=()=>{let M,B;if(_.includes(",")?[M,B]=_.split(",").map(Q=>parseInt(Q.trim())):M=B=parseInt(_),!M||!B||M<1||M>20||B<1||B>20){I(!1);return}const V=i.current;if(!V)return;const X=$e.getStrategy("grid"),W=X.createObject(0,0,o),Z=X.initializeGrid(W,M,B,V.width,V.height);u(Q=>[...Q,Z]),g(Z),h(!0),I(!1),K()},de=()=>{I(!1)},ue=()=>{O(!1)},me=async M=>{if(E(),M==="tracking")try{await he(()=>import("./opencv-B7T7lWMu.js").then(B=>B.o),__vite__mapDeps([16,1,2,17])),gt.getState().setCurrentTool(M)}catch(B){console.error("Error loading OpenCV: ",B)}else gt.getState().setCurrentTool(M)};return s.jsxs("div",{className:"absolute inset-0 w-full h-full pointer-events-auto z-20",children:[s.jsx("canvas",{ref:i,className:"absolute top-0 left-0 w-full h-full cursor-crosshair z-20",onMouseDown:D,onMouseMove:R,onMouseUp:$}),s.jsx(Hl,{isSmallVideo:r,colors:P,onToolChange:me,onSave:()=>O(!0),onClear:A}),v&&s.jsx(Bl,{textInput:m,setTextInput:x,onSubmit:G,onCancel:J}),y&&s.jsx(Vl,{gridSize:_,setGridSize:k,onSubmit:se,onCancel:de}),b&&s.jsx(zn,{saveFileName:C,setSaveFileName:N,onSubmit:Y,onCancel:ue})]})}class hc{constructor(e={}){this.modelProvider=null,this.animationId=null,this.isInitialized=!1,this.onPoseDetected=null,this.video=null,this.lastDetectionTime=0,this.detectionInterval=50,this.config={...As,...e}}async initialize(e,r){this.video=e;try{!this.modelProvider||!this.modelProvider.isReady()?(this.modelProvider&&this.modelProvider.dispose(),this.modelProvider=await Ms(r),await this.modelProvider.initialize(e,r),console.log(`New model provider initialized with ${r.type} ${r.model}`)):console.log("Reusing existing model provider"),this.isInitialized=!0}catch(n){throw console.error("Failed to initialize pose detection provider:",n),n}}setModelProvider(e,r){this.modelProvider=e,this.video=r,this.isInitialized=e.isReady(),console.log(`setModelProvider - ready: ${e.isReady()}, initialized: ${this.isInitialized}`)}setDetectionInterval(e){e==="blazepose"?this.detectionInterval=100:this.detectionInterval=50,console.log(`Detection interval set to ${this.detectionInterval}ms for model: ${e}`)}getCurrentModelConfig(){return null}startDetection(){if(!this.isInitialized||!this.modelProvider||!this.video){console.warn("Provider not initialized. Call initialize first."),console.log(`Debug - initialized: ${this.isInitialized}, modelProvider: ${!!this.modelProvider}, video: ${!!this.video}`),console.log(`Model provider ready: ${this.modelProvider?.isReady()}`);return}this.stopDetection(),console.log("Starting pose detection...");const e=async()=>{try{if(!this.animationId||!this.modelProvider?.isReady()||!this.video)return;const r=Date.now();if(r-this.lastDetectionTime>=this.detectionInterval&&this.video.readyState>=2){const n=await this.modelProvider.estimatePoses(this.video);this.lastDetectionTime=r,this.onPoseDetected&&this.animationId&&this.onPoseDetected(n)}}catch(r){this.animationId&&console.error("Error in detection loop:",r)}this.animationId&&(this.animationId=requestAnimationFrame(e))};this.animationId=requestAnimationFrame(e)}stopDetection(){this.animationId&&(cancelAnimationFrame(this.animationId),this.animationId=null)}setOnPoseDetected(e){this.onPoseDetected=e}isDetecting(){return this.animationId!==null}dispose(e=!1){this.stopDetection(),this.modelProvider&&!e&&(this.modelProvider.dispose(),this.modelProvider=null),this.isInitialized=!1,this.onPoseDetected=null,this.video=null}}async function Kl(t,e={}){if(t==="3d"){const{PoseDetection3DProvider:r}=await he(async()=>{const{PoseDetection3DProvider:n}=await import("./PoseDetection3DProvider-UzNhqUVu.js");return{PoseDetection3DProvider:n}},__vite__mapDeps([18,1,2,19,20,21]));return new r(e)}else{const{PoseDetection2DProvider:r}=await he(async()=>{const{PoseDetection2DProvider:n}=await import("./PoseDetection2DProvider-4Nuqui7U.js");return{PoseDetection2DProvider:n}},__vite__mapDeps([22,1,2,19,20,21]));return new r(e)}}async function Yl(t){const{fileName:e,canvas:r,videoElement:n,includeVideoBackground:i=!0,format:l="png",quality:c=.92}=t;if(!e.trim())return{success:!1,error:"File name is required"};if(!r)return{success:!1,error:"Canvas element is required"};try{let o,a;if(i&&n){const v=document.createElement("canvas"),y=v.getContext("2d");if(!y)return{success:!1,error:"Could not create temporary canvas context"};v.width=r.width,v.height=r.height;try{n.videoWidth>0&&n.readyState>=2?y.drawImage(n,0,0,v.width,v.height):(y.fillStyle="#000000",y.fillRect(0,0,v.width,v.height))}catch(_){console.warn("Could not capture video frame, using black background:",_),y.fillStyle="#000000",y.fillRect(0,0,v.width,v.height)}y.drawImage(r,0,0),o=v,a=y}else o=r,a=r.getContext("2d");if(!a)return{success:!1,error:"Could not get canvas context"};const p=l==="jpeg"?"jpg":"png",m=e.trim().toLowerCase().endsWith(`.${p}`)?e.trim():`${e.trim()}.${p}`,f=document.createElement("a");return f.download=m,l==="jpeg"?f.href=o.toDataURL("image/jpeg",c):f.href=o.toDataURL("image/png"),document.body.appendChild(f),f.click(),document.body.removeChild(f),{success:!0,fileName:m}}catch(o){return console.error("Error saving canvas screenshot:",o),{success:!1,error:o instanceof Error?o.message:"Unknown error occurred"}}}function Xl(){return{saveScreenshot:async e=>Yl(e)}}const Gl={MOVENET_POSENET:{leftShoulder:5,rightShoulder:6,leftElbow:7,rightElbow:8,leftWrist:9,rightWrist:10,leftHip:11,rightHip:12,leftKnee:13,rightKnee:14,leftAnkle:15,rightAnkle:16}};function Jl(t,e,r){const n={x:t.x-e.x,y:t.y-e.y},i={x:r.x-e.x,y:r.y-e.y},l=n.x*i.x+n.y*i.y,c=Math.sqrt(n.x*n.x+n.y*n.y),o=Math.sqrt(i.x*i.x+i.y*i.y);if(c===0||o===0)return 0;const a=l/(c*o),p=Math.max(-1,Math.min(1,a));return Math.acos(p)*180/Math.PI}function er(t,e=.3){if(!t)return!1;const r=t.score||t.visibility||1;return!isNaN(r)&&r>=e&&!isNaN(t.x)&&!isNaN(t.y)}function Ce(t,e,r,n,i=.3){const l=er(t,i),c=er(e,i),o=er(r,i);if(!l||!c||!o)return{joint:n,angle:0,confidence:0,valid:!1};const a=Jl(t,e,r),p=t.score||t.visibility||1,m=e.score||e.visibility||1,f=r.score||r.visibility||1,v=(p+m+f)/3;return{joint:n,angle:Math.round(a*10)/10,confidence:Math.round(v*100)/100,valid:!0}}function an(t,e="movenet",r=.3){if(!t||t.length===0){const l={joint:"",angle:0,confidence:0,valid:!1};return{leftElbow:{...l,joint:"Left Elbow"},rightElbow:{...l,joint:"Right Elbow"},leftKnee:{...l,joint:"Left Knee"},rightKnee:{...l,joint:"Right Knee"},leftShoulder:{...l,joint:"Left Shoulder"},rightShoulder:{...l,joint:"Right Shoulder"},leftHip:{...l,joint:"Left Hip"},rightHip:{...l,joint:"Right Hip"},leftAnkle:{...l,joint:"Left Ankle"},rightAnkle:{...l,joint:"Right Ankle"}}}const n=Gl.MOVENET_POSENET;return{leftElbow:Ce(t[n.leftShoulder],t[n.leftElbow],t[n.leftWrist],"Left Elbow",r),rightElbow:Ce(t[n.rightShoulder],t[n.rightElbow],t[n.rightWrist],"Right Elbow",r),leftKnee:Ce(t[n.leftHip],t[n.leftKnee],t[n.leftAnkle],"Left Knee",r),rightKnee:Ce(t[n.rightHip],t[n.rightKnee],t[n.rightAnkle],"Right Knee",r),leftShoulder:Ce(t[n.leftElbow],t[n.leftShoulder],t[n.leftHip],"Left Shoulder",r),rightShoulder:Ce(t[n.rightElbow],t[n.rightShoulder],t[n.rightHip],"Right Shoulder",r),leftHip:Ce(t[n.leftShoulder],t[n.leftHip],t[n.leftKnee],"Left Hip",r),rightHip:Ce(t[n.rightShoulder],t[n.rightHip],t[n.rightKnee],"Right Hip",r),leftAnkle:Ce(t[n.leftKnee],t[n.leftAnkle],t[n.leftHip],"Left Ankle",r),rightAnkle:Ce(t[n.rightKnee],t[n.rightAnkle],t[n.rightHip],"Right Ankle",r)}}function Zl(t){return t.valid?`${t.angle}°`:"N/A"}function Ql(t){return t>=.8?"text-green-400":t>=.6?"text-yellow-400":t>=.4?"text-orange-400":"text-red-400"}const Un=({children:t,initialPosition:e={x:16,y:16},initialSize:r,className:n="",style:i={},bounds:l,minSize:c={width:150,height:150},maxSize:o={width:600,height:600},resizable:a=!1,disabled:p=!1,header:m,showGrip:f=!0,onResize:v})=>{const[y,_]=T.useState(e),[b,C]=T.useState(r),[d,h]=T.useState(!1),[u,g]=T.useState(!1),[x,S]=T.useState({x:0,y:0}),[w,I]=T.useState({x:0,y:0,width:0,height:0}),k=T.useRef(null),O=E=>{p||(E.target===E.currentTarget||E.target.closest(".drag-handle"))&&(h(!0),S({x:E.clientX-y.x,y:E.clientY-y.y}))};T.useEffect(()=>{const E=j=>{if(!d)return;const U=j.clientX-x.x,K=j.clientY-x.y,Y=l||{width:b?.width||k.current?.offsetWidth||200,height:b?.height||k.current?.offsetHeight||300},D=window.innerWidth-Y.width,R=window.innerHeight-Y.height;_({x:Math.max(0,Math.min(U,D)),y:Math.max(0,Math.min(K,R))})},P=()=>{h(!1)};return d&&(document.addEventListener("mousemove",E),document.addEventListener("mouseup",P)),()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",P)}},[d,x,l,b]);const N=E=>{a&&(E.stopPropagation(),E.preventDefault(),g(!0),I({x:E.clientX,y:E.clientY,width:b?.width||k.current?.offsetWidth||200,height:b?.height||k.current?.offsetHeight||300}))};T.useEffect(()=>{const E=j=>{if(!u)return;const U=j.clientX-w.x,K=j.clientY-w.y,Y=Math.max(c.width,Math.min(o.width,w.width+U)),D=Math.max(c.height,Math.min(o.height,w.height+K)),R={width:Y,height:D};C(R),v?.(R)},P=()=>{g(!1)};return u&&(document.addEventListener("mousemove",E),document.addEventListener("mouseup",P)),()=>{document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",P)}},[u,w,c,o,v]);const A=`absolute z-40 bg-black/90 backdrop-blur-sm rounded border border-white/20 select-none ${d?"cursor-grabbing":"cursor-grab"}`;return s.jsxs("div",{ref:k,className:`${A} ${n}`,style:{left:y.x,top:y.y,width:b?.width,height:b?.height,userSelect:"none",...i},onMouseDown:O,children:[(f||m)&&s.jsx("div",{className:"drag-handle",children:m||s.jsx("div",{className:"flex items-center justify-center p-1",children:s.jsx(Pt,{size:8,className:"text-gray-400"})})}),t,a&&s.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize z-50",onMouseDown:N,style:{background:"linear-gradient(135deg, transparent 0%, transparent 50%, rgba(255, 255, 255, 0.3) 50%, rgba(255, 255, 255, 0.3) 100%)"},title:"Drag to resize"})]})},Ke=({angle:t})=>{const e=Ql(t.confidence);return s.jsxs("div",{className:"flex justify-between items-center py-1 px-2 bg-black/20 rounded text-xs",children:[s.jsx("span",{className:"text-white truncate mr-2",children:t.joint.replace("Left ","L ").replace("Right ","R ")}),s.jsxs("div",{className:"text-right",children:[s.jsx("span",{className:"text-white font-mono",children:Zl(t)}),t.valid&&s.jsxs("span",{className:`ml-1 ${e}`,children:[Math.round(t.confidence*100),"%"]})]})]})},ec=({angles:t,isVisible:e,modelType:r})=>{if(!e)return null;const n=s.jsxs("div",{className:"flex items-center justify-between p-2 drag-handle",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pt,{size:12,className:"text-gray-400"}),s.jsx("h3",{className:"text-white text-xs font-semibold",children:"Joint Angles"})]}),s.jsx("div",{className:"text-gray-400 text-xs",children:r.split(" ")[0]})]});return s.jsx(Un,{initialPosition:{x:16,y:16},initialSize:{width:192,height:300},minSize:{width:150,height:200},maxSize:{width:400,height:600},resizable:!0,header:n,showGrip:!1,className:"bg-black/85 p-0",style:{overflow:"hidden"},children:s.jsx("div",{className:"overflow-y-auto px-2 pb-2",style:{height:"calc(100% - 32px)"},children:t?s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsx(Ke,{angle:t.leftElbow}),s.jsx(Ke,{angle:t.rightElbow}),s.jsx(Ke,{angle:t.leftKnee}),s.jsx(Ke,{angle:t.rightKnee}),s.jsx(Ke,{angle:t.leftShoulder}),s.jsx(Ke,{angle:t.rightShoulder})]}),s.jsx("div",{className:"mt-2 pt-2 border-t border-white/20 text-xs",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-400",children:"Valid:"}),s.jsxs("span",{className:"text-white",children:[Object.values(t).filter(i=>i.valid).length,"/",Object.values(t).length]})]})})]}):s.jsx("div",{className:"text-center py-4",children:s.jsx("div",{className:"text-gray-400 text-xs",children:"No pose detected"})})})})},tc=({poseResult:t,isVisible:e,modelType:r,connections:n,minConfidence:i})=>{const[l,c]=T.useState({width:200,height:200}),[o,a]=T.useState({isDown:!1,lastX:0,lastY:0,rotationX:0,rotationY:0,scale:1}),p=T.useRef(null),m=h=>{a(u=>({...u,isDown:!0,lastX:h.clientX,lastY:h.clientY}))},f=h=>{if(!o.isDown)return;const u=h.clientX-o.lastX,g=h.clientY-o.lastY;a(x=>({...x,rotationY:x.rotationY+u*.01,rotationX:x.rotationX+g*.01,lastX:h.clientX,lastY:h.clientY}))},v=()=>{a(h=>({...h,isDown:!1}))},y=h=>{h.preventDefault();const u=h.deltaY>0?.9:1.1;a(g=>({...g,scale:Math.max(.5,Math.min(3,g.scale*u))}))},_=(h,u,g,x,S)=>{const w=Math.cos(S),I=Math.sin(S),k=h*w-g*I,O=h*I+g*w,N=Math.cos(x),A=Math.sin(x),E=u*N-O*A,P=u*A+O*N;return{x:k,y:E,z:P}},b=(h,u,g,x)=>{h.strokeStyle="rgba(100, 100, 100, 0.3)",h.lineWidth=1;for(let k=-3;k<=3;k++)for(let O=-3;O<=3;O++){const N=k*50,A=O*50,E=_(N/100,.8,A/100,o.rotationX,o.rotationY),j=1/((E.z+1.5)*.5+.5),U=u+E.x*x*100*j,K=g+E.y*x*100*j;if(k===-3){const D=_(1.5,.8,A/100,o.rotationX,o.rotationY),$=1/((D.z+1.5)*.5+.5),G=u+D.x*x*100*$,J=g+D.y*x*100*$;h.beginPath(),h.moveTo(U,K),h.lineTo(G,J),h.stroke()}if(O===-3){const D=_(N/100,.8,1.5,o.rotationX,o.rotationY),$=1/((D.z+1.5)*.5+.5),G=u+D.x*x*100*$,J=g+D.y*x*100*$;h.beginPath(),h.moveTo(U,K),h.lineTo(G,J),h.stroke()}}},C=(h,u,g,x,S)=>{const k=i||.3,O=u[15],N=u[16];let A=480/2;O&&O.score>k&&N&&N.score>k?A=(O.y+N.y)/2:O&&O.score>k?A=O.y:N&&N.score>k&&(A=N.y);const E=u.map(P=>{if(P&&P.score&&P.score>k){const j=(P.x-320)/320,K=.8+(P.y-A)/(480/2),Y=(P.z||P.score)*.5-.25,D=_(j,K,Y,o.rotationX,o.rotationY),R=D.z+1.5,$=1/(R*.5+.5),G=g+D.x*S*100*$,J=x+D.y*S*100*$,se=R*50;return{...P,x3D:G,y3D:J,z3D:se,size:Math.max(2,3*$*o.scale),alpha:Math.min(1,.4+R*.4)}}return null});n.forEach(([P,j])=>{const U=E[P],K=E[j];if(U&&K&&U.x3D&&K.x3D){const Y=(U.z3D+K.z3D)/2,D=Math.min(1,.3+Y/100*.5);h.strokeStyle=`rgba(0, 255, 150, ${D})`,h.lineWidth=2,h.beginPath(),h.moveTo(U.x3D,U.y3D),h.lineTo(K.x3D,K.y3D),h.stroke()}}),E.forEach(P=>{P&&P.x3D&&(h.fillStyle=`rgba(255, 100, 100, ${P.alpha})`,h.beginPath(),h.arc(P.x3D,P.y3D,P.size,0,2*Math.PI),h.fill())})};if(T.useEffect(()=>{const h=p.current;if(!h)return;const u=h.getContext("2d");if(!u)return;const x=l.height-24,S=window.devicePixelRatio||1;h.width=l.width*S,h.height=x*S,h.style.width=`${l.width}px`,h.style.height=`${x}px`,u.scale(S,S),u.clearRect(0,0,l.width,x);const w=l.width/2,I=x/2,k=Math.min(l.width,x)/400*o.scale;b(u,w,I,k),t&&t.poses.length>0?t.poses.forEach(O=>{O.keypoints&&C(u,O.keypoints,w,I,k)}):(u.fillStyle="#999",u.font="12px Arial",u.textAlign="center",u.fillText("No pose detected",w,I))},[t,o.rotationX,o.rotationY,o.scale,l]),!e)return null;const d=s.jsxs("div",{className:"flex items-center justify-between p-2 drag-handle",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Pt,{size:12,className:"text-gray-400"}),s.jsx("h3",{className:"text-white text-xs font-semibold",children:"3D Pose View"})]}),s.jsx("div",{className:"text-gray-400 text-xs",children:r.split(" ")[0]})]});return s.jsxs(Un,{initialPosition:{x:0,y:100},initialSize:{width:200,height:200},minSize:{width:150,height:150},maxSize:{width:600,height:600},resizable:!0,header:d,showGrip:!1,className:"bg-black/85 p-0",style:{overflow:"hidden"},onResize:h=>c(h),children:[s.jsx("canvas",{ref:p,className:"cursor-move",onMouseDown:m,onMouseMove:f,onMouseUp:v,onMouseLeave:v,onWheel:y}),s.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-2 border-t border-white/20",children:s.jsxs("div",{className:"flex justify-between text-xs text-white",children:[s.jsxs("span",{children:["Rotation: ",(o.rotationY*57.3).toFixed(0),"°,"," ",(o.rotationX*57.3).toFixed(0),"°"]}),s.jsxs("span",{children:["Scale: ",(o.scale*100).toFixed(0),"%"]})]})})]})};function rc({videoRef:t,is3DMode:e=!1,isPlaying:r,currentTime:n=0,modelType:i="movenet",config:l={}}){const c=T.useRef(null),o=T.useRef(null),[a,p]=T.useState(null),[m,f]=T.useState(0),[v,y]=T.useState(null),[_,b]=T.useState(e),[C,d]=T.useState(!1),[h,u]=T.useState(i),[g,x]=T.useState(!1),[S]=T.useState(!1),[w,I]=T.useState(!1),[k,O]=T.useState({}),[N,A]=T.useState(!1),[E,P]=T.useState("pose-detection-screenshot"),[j,U]=T.useState(!1),[K,Y]=T.useState(null),[D,R]=T.useState(!1),[$,G]=T.useState({layers:[],activeLayerId:null,draggedKeypointIndex:null}),J=T.useRef(null),se=T.useRef(Date.now()),{modelProvider:de,isModelLoaded:ue,isLoading:me,loadModel:M}=Fs(),{saveScreenshot:B}=Xl(),V=()=>{switch(h){case"movenet":return{schema:jr,uiSchema:Sr};case"tensorflowPosenet":return{schema:zs,uiSchema:$s};case"blazepose":return{schema:Ls,uiSchema:Rs};default:return{schema:jr,uiSchema:Sr}}};T.useEffect(()=>{const{schema:L}=V(),F={};Object.entries(L.properties).forEach(([z,re])=>{re.default!==void 0&&(F[z]=re.default)}),O(F)},[h]);const X={minConfidence:k.minConfidence??(h==="blazepose"?.1:.3),keypointColor:k.keypointColor??"#FF0000",keypointSize:k.keypointSize??5,skeletonColor:k.skeletonColor??"#FF0000",skeletonThickness:k.skeletonThickness??2,showKeypointLabels:k.showKeypointLabels??h==="blazepose",keypointLabelColor:k.keypointLabelColor??"#FFFFFF",keypointLabelSize:k.keypointLabelSize??10,showBoundingBox:k.showBoundingBox??S,boundingBoxColor:k.boundingBoxColor??"#00FFFF",boundingBoxThickness:k.boundingBoxThickness??2,...l},W=()=>{const L=wr[h];if(!L)throw new Error(`Unknown model type: ${h}`);return L};T.useEffect(()=>{(async()=>{if(!(!t.current||C))try{d(!0),y(null),f(0),o.current&&(console.log("Stopping existing detection before model change..."),o.current.stopDetection(),await new Promise(re=>setTimeout(re,100)));const F=setInterval(()=>{f(re=>re>=80?(clearInterval(F),80):re+10)},200),z=W();console.log(`Loading model: ${z.type} ${z.model}`),await M(t.current,z),clearInterval(F),f(100),console.log(`Model loaded successfully: ${z.type} ${z.model}`)}catch(F){console.error("Error loading model:",F),y(`Failed to load ${h} model`)}finally{d(!1)}})()},[h,t.current,M]),T.useEffect(()=>{ue&&de&&(async()=>{if(!(!t.current||!ue||!de))try{if(console.log(`Switching to ${_?"3D":"2D"} mode...`),o.current){const z=o.current.isDetecting();o.current.stopDetection(),console.log(`Was detecting: ${z}`)}const F=await Kl(_?"3d":"2d",X);if(F.setModelProvider(de,t.current),"setDetectionInterval"in F&&F.setDetectionInterval(h),F.setOnPoseDetected(z=>{if(p(z),!D)if(z.poses&&z.poses.length>0){const re=z.poses[0];if(re.keypoints){const we=an(re.keypoints,h,X.minConfidence||.3);Y(we)}}else Y(null)}),"updateConnectionsForModel"in F&&de){const z=de.getConnections();z&&F.updateConnectionsForModel(z)}o.current=F,r&&(console.log("Starting detection..."),F.startDetection()),console.log(`Successfully switched to ${_?"3D":"2D"} mode`)}catch(F){console.error("Error updating view mode:",F)}})()},[_,ue,de]),T.useEffect(()=>{if(o.current&&"updateConfig"in o.current&&typeof o.current.updateConfig=="function"){const L={showBoundingBox:S,boundingBoxColor:"#00FFFF",boundingBoxThickness:2};o.current.updateConfig(L)}},[S]),T.useEffect(()=>{o.current&&(r?(D&&(R(!1),G({layers:[],activeLayerId:null,draggedKeypointIndex:null})),o.current.startDetection()):o.current.stopDetection())},[r,D]),T.useEffect(()=>{if(!o.current||!t.current||r)return;const L=async()=>{try{console.log("Video time changed to:",n,"- running single pose detection"),"runSingleDetection"in o.current?o.current.runSingleDetection():(o.current.startDetection(),setTimeout(()=>{o.current&&!r&&o.current.stopDetection()},100))}catch(z){console.error("Error running single pose detection on time change:",z)}};Math.abs(n)>.1&&L()},[n,r]);const Z=L=>{if(console.log("🎯 Mouse down in manual edit mode:",D,"activeLayerId:",$.activeLayerId),!D||!$.activeLayerId)return;const F=$.layers.find(pe=>pe.id===$.activeLayerId);if(!F||!F.isEditable){console.log("❌ No active editable layer found");return}console.log("✅ Active layer found:",F.id,"keypoints:",F.keypoints.length);const z=c.current,re=t.current;if(!z||!re)return;const we=z.getBoundingClientRect(),Qe=L.clientX-we.left,He=L.clientY-we.top,Et=z.width/z.clientWidth,Ot=z.height/z.clientHeight,ct=Qe*Et,dt=He*Ot,Nt=re.videoWidth/z.width,Tt=re.videoHeight/z.height,ut=ct*Nt,Se=dt*Tt;console.log("📍 Click position:",{mouse:{x:Qe,y:He},canvas:{x:ct,y:dt},video:{x:ut,y:Se},videoNative:{w:re.videoWidth,h:re.videoHeight},canvasSize:{w:z.width,h:z.height}});const ht=20;for(let pe=0;pe<F.keypoints.length;pe++){const ve=F.keypoints[pe];if(ve&&ve.score>.3){const ur=Math.sqrt(Math.pow(ut-ve.x,2)+Math.pow(Se-ve.y,2));if(console.log(`🔍 Keypoint ${pe}:`,{x:ve.x,y:ve.y,distance:ur,radius:ht}),ur<=ht){console.log("🎯 HIT! Keypoint",pe,"selected for dragging"),G(Yn=>({...Yn,draggedKeypointIndex:pe})),L.preventDefault();return}}}console.log("❌ No keypoint found within radius")},Q=L=>{if(!D||!$.activeLayerId||$.draggedKeypointIndex===null)return;const F=c.current,z=t.current;if(!F||!z)return;const re=F.getBoundingClientRect(),we=L.clientX-re.left,Qe=L.clientY-re.top,He=F.width/F.clientWidth,Et=F.height/F.clientHeight,Ot=we*He,ct=Qe*Et,dt=z.videoWidth/F.width,Nt=z.videoHeight/F.height,Tt=Ot*dt,ut=ct*Nt;G(Se=>{const ht=Se.layers.map(pe=>{if(pe.id===Se.activeLayerId&&pe.isEditable){const ve=[...pe.keypoints];return Se.draggedKeypointIndex!==null&&ve[Se.draggedKeypointIndex]&&(ve[Se.draggedKeypointIndex]={...ve[Se.draggedKeypointIndex],x:Tt,y:ut}),{...pe,keypoints:ve}}return pe});return{...Se,layers:ht}})},ee=()=>{G(L=>({...L,draggedKeypointIndex:null}))};T.useEffect(()=>{if(!c.current||!t.current||!o.current)return;const L=c.current,F=t.current;if(D&&$.layers.length>0){const z=L.getContext("2d");z&&z.clearRect(0,0,L.width,L.height),$.layers.sort((re,we)=>re.createdAt-we.createdAt).forEach(re=>{if(re.isVisible){const we={poses:[{keypoints:re.keypoints,score:1}],timestamp:Date.now()},He={...{...X},keypointColor:re.isEditable?"#FF4444":"#888888",skeletonColor:re.isEditable?"#FF4444":"#888888",keypointSize:re.isEditable?8:4};z&&(z.globalAlpha=re.opacity),o.current&&"updateConfig"in o.current&&typeof o.current.updateConfig=="function"&&o.current.updateConfig(He),o.current&&o.current.renderPoses(L,we,F.clientWidth,F.clientHeight),z&&(z.globalAlpha=1)}}),o.current&&"updateConfig"in o.current&&typeof o.current.updateConfig=="function"&&o.current.updateConfig(X)}else a&&o.current.renderPoses(L,a,F.clientWidth,F.clientHeight)},[a,$,D,X,t.current?.clientWidth,t.current?.clientHeight]),T.useEffect(()=>{const L=()=>{if(c.current&&t.current){const F=c.current,z=t.current;F.width=z.clientWidth,F.height=z.clientHeight,o.current&&a&&o.current.renderPoses(F,a,z.clientWidth,z.clientHeight)}};return window.addEventListener("resize",L),L(),()=>window.removeEventListener("resize",L)},[a]);const H=()=>{b(L=>!L)},q=()=>{const L=W();return`${L.type.toUpperCase()} ${L.model.toUpperCase()}`},ge=L=>{O(L)},Oe=()=>{const{schema:L}=V(),F={};Object.entries(L.properties).forEach(([z,re])=>{re.default!==void 0&&(F[z]=re.default)}),O(F)},fe=()=>{console.log("Applying model settings:",k);const L=W(),F={...L,options:{...L.options,...k}};t.current&&M(t.current,F).then(()=>{console.log("Model reloaded with new settings")}).catch(z=>{console.error("Failed to reload model with new settings:",z),y(`Failed to apply settings: ${z.message}`)}),I(!1)},Ze=()=>{I(!1)},Bn=async()=>{if(!E.trim()){A(!1);return}const L=c.current,F=t.current;if(!L){console.error("Canvas not available for screenshot"),A(!1);return}const z=await B({fileName:E,canvas:L,videoElement:F,includeVideoBackground:!0,format:"png"});z.success?console.log(`Screenshot saved: ${z.fileName}`):console.error(`Screenshot failed: ${z.error}`),A(!1)},Vn=()=>{A(!1)},Wn=()=>{if(a&&a.poses.length>0){const L=a.poses[0];if(L.keypoints)return{id:`ai-capture-${Date.now()}`,name:"AI Detection Copy",keypoints:[...L.keypoints],isEditable:!0,isVisible:!0,opacity:1,createdAt:Date.now()}}return null},Hn=()=>{const L=c.current,F=L?L.width/2:400,z=L?L.height/2:300,re=[{x:F,y:z-80,score:1,name:"nose"},{x:F-10,y:z-85,score:1,name:"left_eye"},{x:F+10,y:z-85,score:1,name:"right_eye"},{x:F-15,y:z-75,score:1,name:"left_ear"},{x:F+15,y:z-75,score:1,name:"right_ear"},{x:F-30,y:z-30,score:1,name:"left_shoulder"},{x:F+30,y:z-30,score:1,name:"right_shoulder"},{x:F-50,y:z+20,score:1,name:"left_elbow"},{x:F+50,y:z+20,score:1,name:"right_elbow"},{x:F-60,y:z+70,score:1,name:"left_wrist"},{x:F+60,y:z+70,score:1,name:"right_wrist"},{x:F-20,y:z+40,score:1,name:"left_hip"},{x:F+20,y:z+40,score:1,name:"right_hip"},{x:F-25,y:z+120,score:1,name:"left_knee"},{x:F+25,y:z+120,score:1,name:"right_knee"},{x:F-30,y:z+200,score:1,name:"left_ankle"},{x:F+30,y:z+200,score:1,name:"right_ankle"}];return{id:`default-pose-${Date.now()}`,name:"Default Pose",keypoints:re,isEditable:!0,isVisible:!0,opacity:1,createdAt:Date.now()}},qn=()=>{if(D)G({layers:[],activeLayerId:null,draggedKeypointIndex:null}),console.log("Exiting manual edit mode");else{se.current=a?.timestamp||Date.now();let L=Wn();L||(L=Hn());const F=a&&a.poses.length>0?[{id:"ai-original",name:"AI Detection",keypoints:a.poses[0].keypoints||[],isEditable:!1,isVisible:!0,opacity:.4,createdAt:Date.now()-1},L]:[L];G({layers:F,activeLayerId:L.id,draggedKeypointIndex:null}),console.log("Entering manual edit mode with",F.length,"layers")}R(!D)};T.useEffect(()=>{if(D&&$.activeLayerId){const L=$.layers.find(F=>F.id===$.activeLayerId);if(L&&L.keypoints){const F=an(L.keypoints,h,.3);Y(F)}}},[$,D,h]),T.useEffect(()=>{const L=F=>{J.current&&!J.current.contains(F.target)&&x(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[]);const Kn=T.useMemo(()=>{if(D&&$.activeLayerId){const L=$.layers.find(F=>F.id===$.activeLayerId);if(L&&L.keypoints)return console.log("🎨 Using manual edit layer for 3D panel:",L.id),{poses:[{keypoints:L.keypoints,score:1}],timestamp:se.current}}return a},[D,$.activeLayerId,$.layers,a]);return!ue||C||me?s.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center bg-black/70 backdrop-blur-sm",children:[s.jsxs("div",{className:"text-xl mb-4 text-white",children:["Loading ",q()," model..."]}),s.jsx("div",{className:"w-64 h-2 bg-gray-700 rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-blue-500 transition-all duration-300 ease-in-out",style:{width:`${m}%`}})}),s.jsxs("div",{className:"mt-2 text-white",children:[m,"%"]}),v&&s.jsx("div",{className:"mt-4 text-red-500",children:v})]}):s.jsxs("div",{className:"absolute inset-0 w-full h-full pointer-events-auto",children:[s.jsxs("div",{className:"absolute top-4 right-4 z-50 flex items-center gap-2",children:[s.jsxs("div",{className:"relative",ref:J,children:[s.jsxs("button",{onClick:()=>x(!g),className:"bg-black/50 hover:bg-black/70 text-white px-3 py-2 rounded-lg text-xs font-medium transition-all flex items-center gap-2",title:"Select AI model",children:[s.jsx("span",{children:h==="movenet"?"MoveNet":h==="tensorflowPosenet"?"PoseNet":"BlazePose"}),s.jsx("svg",{className:`w-3 h-3 transition-transform ${g?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),g&&s.jsx("div",{className:"absolute top-full mt-1 right-0 bg-black/90 backdrop-blur-sm rounded-lg shadow-lg border border-white/20 py-1 min-w-[120px]",children:Object.entries(wr).map(([L,F])=>s.jsx("button",{onClick:()=>{u(L),x(!1)},className:`w-full px-3 py-2 text-xs font-medium text-left transition-all hover:bg-white/10 ${h===L?"bg-blue-600/20 text-blue-300":"text-white/70 hover:text-white"}`,title:`Switch to ${F.model.toUpperCase()} model`,children:L==="movenet"?"MoveNet":L==="tensorflowPosenet"?"PoseNet":"BlazePose"},L))})]}),s.jsx("button",{onClick:()=>A(!0),className:"p-2 rounded-lg transition-all bg-black/50 hover:bg-black/70 text-white",title:"Take screenshot of pose detection",children:s.jsx(ei,{size:20})}),!r&&s.jsx("button",{onClick:qn,className:`p-2 rounded-lg transition-all ${D?"bg-[var(--vp-accent)] hover:bg-[var(--vp-accent)]/80 text-white":"bg-black/50 hover:bg-black/70 text-white"}`,title:D?"Exit manual pose editing":"Enable manual pose editing",children:s.jsx(_n,{size:20})}),s.jsx("button",{onClick:()=>U(!j),className:`p-2 rounded-lg transition-all ${j?"bg-[var(--vp-accent)] hover:bg-[var(--vp-accent)]/80 text-white":"bg-black/50 hover:bg-black/70 text-white"}`,title:j?"Hide angles panel":"Show angles panel",children:s.jsx(yi,{size:20})}),s.jsxs("button",{onClick:()=>I(!0),className:"p-2 rounded-lg transition-all flex items-center gap-2 bg-black/50 hover:bg-black/70 text-white",title:"Configure AI model settings",children:[s.jsx(Ai,{size:20}),s.jsx("span",{className:"text-xs font-medium",children:"CONFIG"})]}),s.jsxs("button",{onClick:H,className:`p-2 rounded-lg transition-all flex items-center gap-2 ${_?"bg-[var(--vp-accent)] hover:bg-[var(--vp-accent)]/80 text-white":"bg-black/50 hover:bg-black/70 text-white"}`,title:_?"Switch to 2D mode":"Switch to 3D mode",children:[s.jsx(gi,{size:20}),s.jsx("span",{className:"text-xs font-medium",children:_?"3D":"2D"})]})]}),s.jsx("canvas",{ref:c,className:`absolute top-0 left-0 w-full h-full ${D?"cursor-grab":"cursor-crosshair"}`,style:{objectFit:"contain",pointerEvents:D?"auto":"none"},onMouseDown:L=>{console.log("🖱️ Canvas mouse down event fired!",{isManualEditMode:D,target:L.target}),Z(L)},onMouseMove:Q,onMouseUp:ee,onMouseLeave:ee}),s.jsx(ec,{angles:K,isVisible:j,modelType:q()}),_&&s.jsx(tc,{poseResult:Kn,isVisible:_,modelType:q(),connections:de?.getConnections()||[],minConfidence:X.minConfidence}),a&&a.poses.length>0&&s.jsxs("div",{className:"absolute top-4 left-4 bg-black/50 text-white px-3 py-2 rounded-lg text-xs font-medium z-30",children:[a.poses.length," poses • ",q()]}),N&&s.jsx(zn,{saveFileName:E,setSaveFileName:P,onSubmit:Bn,onCancel:Vn}),w&&s.jsx(Wl,{title:"Configuration",description:`Customize rendering and performance settings for the ${q()} AI model`,schema:V().schema,uiSchema:V().uiSchema,currentSettings:k,currentModel:q(),onSettingsChange:ge,onReset:Oe,onCancel:Ze,onApply:fe})]})}const nc="/assets/linceIcon-U2517Fr_.svg";function sc({videoSource:t,playerType:e="file",autoPlay:r=!1,muted:n=!1,initialDrawingMode:i=!1,initialPoseDetection:l=!1,initial3DMode:c=!1,chapters:o=[]}){const a=T.useRef(null),p=T.useRef(null),m=T.useRef(null),[f,v]=T.useState(r),[y,_]=T.useState(0),[b,C]=T.useState(0),[d,h]=T.useState(1),[u,g]=T.useState(n),[x,S]=T.useState(!1),[w,I]=T.useState(!0),[k,O]=T.useState(1),[N,A]=T.useState(i?"drawing":l?"pose":"video"),[E,P]=T.useState(!1),[j,U]=T.useState(!1),[K,Y]=T.useState(!1);T.useEffect(()=>{if(a.current){const H=a.current.getInternalPlayer();H&&(e==="youtube"?m.current=null:m.current=H)}},[a.current,e]),T.useEffect(()=>{if(!p.current)return;const q=()=>{S(!!document.fullscreenElement)};return document.addEventListener("fullscreenchange",q),()=>{document.removeEventListener("fullscreenchange",q)}},[]),T.useEffect(()=>{const H=()=>{const q=p.current;q&&P(q.clientWidth<800)};return H(),window.addEventListener("resize",H),()=>{window.removeEventListener("resize",H)}},[]);const D=()=>{v(!f)},R=()=>{g(!u)},$=H=>{h(H[0]),H[0]===0?g(!0):u&&g(!1)},G=H=>{const q=a.current;q&&(q.seekTo(H[0],"seconds"),_(H[0]))},J=()=>{const H=p.current;H&&(document.fullscreenElement?document.exitFullscreen&&document.exitFullscreen():H.requestFullscreen&&H.requestFullscreen())},se=H=>{const q=Math.floor(H/60),ge=Math.floor(H%60);return`${q}:${ge<10?"0":""}${ge}`},de=()=>{const H=a.current;if(!H)return;const q=Math.min(y+10,b);H.seekTo(q,"seconds"),_(q)},ue=()=>{const H=a.current;if(!H)return;const q=Math.max(y-10,0);H.seekTo(q,"seconds"),_(q)},me=()=>{const H=a.current;H&&(H.seekTo(0,"seconds"),_(0),v(!0))},M=H=>{const q=a.current;q&&(q.seekTo(H,"seconds"),_(H))},B=H=>{_(H.playedSeconds)},V=H=>{C(H)},X=()=>{v(!1)},W=()=>{if(E)return null;const q="text-white data-[state=active]:bg-white/20 data-[state=active]:text-white "+(E?" text-xs px-2 h-7 flex-1":"");return s.jsx(bn,{value:N,onValueChange:A,className:"w-full",children:s.jsxs(wn,{className:"bg-black/20 border border-white/10 "+(E?"h-8 w-full":""),children:[s.jsx(it,{value:"video",className:q,children:"Video"}),s.jsx(it,{value:"drawing",className:q,children:"Drawing"}),s.jsx(it,{value:"pose",className:q,children:"Pose"})]})})},Z=()=>{U(!j)},Q=async()=>{if(m.current)try{document.pictureInPictureElement?(await document.exitPictureInPicture(),Y(!1)):(await m.current.requestPictureInPicture(),Y(!0))}catch(H){console.error("Failed to toggle Picture-in-Picture mode:",H)}},ee=({showControls:H,isSmallVideo:q,allowIframeInteraction:ge,playerType:Oe})=>s.jsx("div",{className:`lince-video-player-controls absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/80 to-transparent p-1 transition-opacity duration-300 z-30 ${H?"opacity-100":"opacity-0"} ${q?"pb-2":""}`,style:{pointerEvents:ge&&Oe==="youtube"?"none":"auto"},children:s.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-2 items-center",children:[s.jsx("div",{className:"flex items-center justify-center h-full px-2",children:s.jsx("img",{src:nc,alt:"Lince",className:"w-8 h-8",style:{filter:"brightness(0) saturate(100%) invert(78%) sepia(14%) saturate(1291%) hue-rotate(131deg) brightness(94%) contrast(89%)"}})}),s.jsxs("div",{className:"flex flex-col",children:[s.jsxs("div",{className:`flex items-center ${q?"mb-1":"mb-2"}`,children:[s.jsxs("div",{className:`text-white ${q?"text-xs mr-2":"text-sm mr-3"}`,children:[se(y)," / ",se(b)]}),s.jsxs("div",{className:"relative flex-grow",children:[s.jsx(Cr,{value:[y],min:0,max:b||100,step:.01,onValueChange:G,className:"w-full [&>span:first-child]:h-1.5 [&>span:first-child]:bg-white/30 [&_[role=slider]]:bg-white [&_[role=slider]]:w-4 [&_[role=slider]]:h-4 [&_[role=slider]]:border-0 [&>span:first-child_span]:bg-white [&_[role=slider]:focus-visible]:ring-0 [&_[role=slider]:focus-visible]:ring-offset-0"}),o.map(fe=>{const Ze=`${fe.startTime/(b||100)*100}%`;return s.jsx("div",{className:"absolute top-1/2 -translate-y-1/2 w-3 h-3 rounded-full bg-red-500 cursor-pointer hover:scale-125 transition-transform group",style:{left:Ze,zIndex:10},onClick:()=>M(fe.startTime),children:s.jsxs("div",{className:"absolute bottom-full mb-2 left-1/2 -translate-x-1/2 bg-black/80 text-white text-xs rounded px-2 py-1 whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none",children:[se(fe.startTime)," - ",fe.title]})},fe.id?fe.id:fe.title)})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:`flex items-center ${q?"space-x-1":"space-x-2"}`,children:[s.jsx(Ne,{children:s.jsxs(Te,{children:[s.jsx(Ie,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white hover:bg-white/10 ${q?"w-8 h-8 p-1":""}`,onClick:D,children:f?s.jsx(_i,{className:`${q?"w-4 h-4":"w-5 h-5"}`}):s.jsx(Lr,{className:`${q?"w-4 h-4":"w-5 h-5"}`})})}),s.jsx(Ae,{children:s.jsx("p",{children:f?"Pause":"Play"})})]})}),s.jsx(Ne,{children:s.jsxs(Te,{children:[s.jsx(Ie,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white hover:bg-white/10 ${q?"w-8 h-8 p-1":""}`,onClick:ue,children:s.jsx(Ei,{className:`${q?"w-4 h-4":"w-5 h-5"}`})})}),s.jsx(Ae,{children:s.jsx("p",{children:"Rewind 10s"})})]})}),s.jsx(Ne,{children:s.jsxs(Te,{children:[s.jsx(Ie,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white hover:bg-white/10 ${q?"w-8 h-8 p-1":""}`,onClick:de,children:s.jsx(Ni,{className:`${q?"w-4 h-4":"w-5 h-5"}`})})}),s.jsx(Ae,{children:s.jsx("p",{children:"Forward 10s"})})]})}),s.jsx(Ne,{children:s.jsxs(Te,{children:[s.jsx(Ie,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white hover:bg-white/10 ${q?"w-8 h-8 p-1":""}`,onClick:me,children:s.jsx(Oi,{className:`${q?"w-4 h-4":"w-5 h-5"}`})})}),s.jsx(Ae,{children:s.jsx("p",{children:"Restart"})})]})}),s.jsxs("div",{className:`flex items-center ${q?"ml-1 space-x-1":"ml-2 space-x-2"}`,children:[s.jsx(Ne,{children:s.jsxs(Te,{children:[s.jsx(Ie,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white hover:bg-white/10 ${q?"w-8 h-8 p-1":""}`,onClick:R,children:u||d===0?s.jsx($i,{className:`${q?"w-4 h-4":"w-5 h-5"}`}):s.jsx(Li,{className:`${q?"w-4 h-4":"w-5 h-5"}`})})}),s.jsx(Ae,{children:s.jsx("p",{children:u?"Unmute":"Mute"})})]})}),s.jsx("div",{className:`${q?"w-16":"w-24"}`,children:s.jsx(Cr,{value:[u?0:d],min:0,max:1,step:.01,onValueChange:$,className:"[&>span:first-child]:h-1 [&>span:first-child]:bg-white/30 [&_[role=slider]]:bg-white [&_[role=slider]]:w-3 [&_[role=slider]]:h-3 [&_[role=slider]]:border-0 [&>span:first-child_span]:bg-white [&_[role=slider]:focus-visible]:ring-0 [&_[role=slider]:focus-visible]:ring-offset-0"})}),s.jsx(Ui,{currentSpeed:k,onSpeedChange:O,isSmallVideo:q}),s.jsx(Ne,{children:s.jsxs(Te,{children:[s.jsx(Ie,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white hover:bg-white/10 ${q?"w-8 h-8 p-1":""}`,onClick:J,children:x?s.jsx(Ci,{className:`${q?"w-4 h-4":"w-5 h-5"}`}):s.jsx(ji,{className:`${q?"w-4 h-4":"w-5 h-5"}`})})}),s.jsx(Ae,{children:s.jsx("p",{children:x?"Exit Fullscreen":"Fullscreen"})})]})}),Oe==="file"&&s.jsx(Ne,{children:s.jsxs(Te,{children:[s.jsx(Ie,{asChild:!0,children:s.jsx(le,{variant:"ghost",size:"icon",className:`text-white hover:bg-white/10 ${q?"w-8 h-8 p-1":""}`,onClick:Q,children:s.jsx(Di,{className:`${q?"w-4 h-4":"w-5 h-5"} ${K?"text-blue-400":""}`})})}),s.jsx(Ae,{children:s.jsx("p",{children:K?"Exit Picture-in-Picture":"Picture-in-Picture"})})]})})]})]}),!q&&s.jsx("div",{className:"flex items-center space-x-2",children:W()})]})]})]})});return s.jsxs("div",{ref:p,className:"relative w-full max-w-4xl overflow-hidden rounded-lg bg-black",onMouseEnter:()=>I(!0),onMouseLeave:()=>I(!1),children:[s.jsxs("div",{className:"relative aspect-video",children:[e==="youtube"&&s.jsx("div",{className:"absolute top-2 right-2 z-50",children:s.jsx(Ne,{children:s.jsxs(Te,{children:[s.jsx(Ie,{asChild:!0,children:s.jsx(le,{variant:"outline",size:"icon",className:`bg-black/50 border-white/20 hover:bg-black/70 ${j?"text-blue-400":"text-white"}`,onClick:Z,children:j?s.jsx(Pi,{className:"h-4 w-4"}):s.jsx(Pn,{className:"h-4 w-4"})})}),s.jsx(Ae,{children:s.jsx("p",{children:j?"Disable YouTube controls interaction":"Enable YouTube controls interaction"})})]})})}),s.jsx(mi,{ref:a,url:t,className:"w-full h-full object-contain",width:"100%",height:"100%",playing:f,volume:d,muted:u,playbackRate:k,onProgress:B,onDuration:V,onEnded:X,onClick:D,onReady:()=>{if(a.current){const H=a.current.getInternalPlayer();H&&e==="file"&&(m.current=H)}},playsinline:!0,config:{file:{attributes:{controlsList:"nodownload"}},youtube:{playerVars:{modestbranding:1,rel:0,showinfo:0,iv_load_policy:3,fs:0,disablekb:1,controls:N==="drawing"?0:1}}}}),!f&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{pointerEvents:j&&e==="youtube"?"none":"auto"},children:s.jsx(le,{variant:"ghost",size:"icon",className:"w-20 h-20 rounded-full bg-black/30 text-white hover:bg-black/50",onClick:D,children:s.jsx(Lr,{className:"w-10 h-10"})})}),N==="drawing"&&s.jsx("div",{style:{pointerEvents:j&&e==="youtube"?"none":"auto"},children:s.jsx(ql,{isPlaying:f,isFullscreen:x,isSmallVideo:E,playerRef:a})}),N==="pose"&&!E&&s.jsx("div",{style:{pointerEvents:j&&e==="youtube"?"none":"auto"},children:s.jsx(Us,{children:s.jsx(rc,{videoRef:m,is3DMode:c,isPlaying:f,currentTime:y})})})]}),s.jsx(ee,{showControls:w,isSmallVideo:E,allowIframeInteraction:j,playerType:e}),o&&o.length>0&&s.jsx(zi,{chapters:o,currentTime:y,onChapterSelect:M})]})}const ic=({videoSource:t,className:e,style:r,playerType:n="file",autoPlay:i=!1,muted:l=!1,initialDrawingMode:c=!1,initialPoseDetection:o=!1,initial3DMode:a=!1,chapters:p=[]})=>s.jsx("div",{className:e,style:r,children:s.jsx(sc,{videoSource:t,playerType:n,autoPlay:i,muted:l,initialDrawingMode:c,initialPoseDetection:o,initial3DMode:a,chapters:p})}),ac=({className:t,style:e})=>{const r=Bs(),n=Vs(l=>l.lince.videos);T.useEffect(()=>{r(Ws()),r(Hs()),r(qs()),Ks()},[r]);const i=()=>{const l=n&&n.length>0?n[0]:null,c=Zs.url.API_BASE_URL;if(!l)return s.jsx(ri,{message:"No video available",description:"Please upload a video to start analyzing",type:"info",showIcon:!0});const o=c+l.url;return s.jsx(ic,{videoSource:o,style:{width:"100%",height:"100%"}})};return s.jsx(Ys,{children:s.jsx(ti,{className:t,style:{...e,height:"100%",overflow:"hidden",padding:0},children:s.jsxs("div",{style:{display:"flex",width:"100%",height:"calc(100% - 60px)",overflow:"hidden"},children:[s.jsx(Xs,{defaultSize:{width:"65%",height:"100%"},minWidth:"400",minHeight:"500",maxWidth:"80%",enable:{right:!0,top:!1,bottom:!1,left:!1,topRight:!1,bottomRight:!1,bottomLeft:!1,topLeft:!1},children:s.jsxs("div",{style:{height:"100%",display:"flex",flexDirection:"column",overflow:"hidden"},children:[s.jsx(Pr,{style:{minHeight:"400px",flex:"0 0 auto"},gutter:0,children:s.jsx(_r,{span:24,style:{height:"auto"},children:i()})}),s.jsx(Pr,{style:{flex:"1 1 auto",overflow:"auto",marginTop:"8px"},gutter:0,children:s.jsx(_r,{span:24,children:s.jsx(Gs,{})})})]})}),s.jsx("div",{style:{flex:1,minWidth:"300px",overflow:"hidden",display:"flex",flexDirection:"column",paddingLeft:"8px"},children:s.jsx(Js,{})})]})})})},oc=()=>s.jsxs(s.Fragment,{children:[s.jsx(Qs,{pageName:"AIStudio"}),s.jsx("div",{className:"overflow-hidden rounded-sm border border-stroke bg-white shadow-default dark:border-strokedark dark:bg-boxdark",children:s.jsx(ac,{})})]}),fc=Object.freeze(Object.defineProperty({__proto__:null,default:oc},Symbol.toStringTag,{value:"Module"}));export{fc as A,hc as B,si as a,Ct as r};
