import{c0 as w,c1 as p,c2 as st,c3 as rt,c4 as nt,c5 as K,c6 as it,c7 as at,c8 as ot,c9 as lt,ca as ut,cb as dt,cc as ct,cd as ht,ce as mt,cf as pt,cg as S,d as gt,ch as N,l as u,ci as ft,cj as bt,ck as vt,cl as Ct,b7 as V,e as St,cm as Y,b9 as _t,cn as Ft,aY as Ot}from"./index-Dt8YkMnR.js";var _,I;function xt(){if(I)return _;I=1;var s=w(),e=4;function n(t){return s(t,e)}return _=n,_}var yt=xt();const h=p(yt);var Et=st();const v=p(Et);var F,k;function Mt(){if(k)return F;k=1;var s=rt(),e=nt();function n(t,r){return r.length<2?t:s(t,e(r,0,-1))}return F=n,F}var O,L;function qt(){if(L)return O;L=1;var s=K(),e=at(),n=Mt(),t=it();function r(i,a){return a=s(a,i),i=n(i,a),i==null||delete i[t(e(a))]}return O=r,O}var x,Q;function Nt(){if(Q)return x;Q=1;var s=ot();function e(n){return s(n)?void 0:n}return x=e,x}var y,T;function Vt(){if(T)return y;T=1;var s=lt(),e=dt(),n=ut();function t(r){return n(e(r,void 0,s),r+"")}return y=t,y}var E,U;function Pt(){if(U)return E;U=1;var s=ct(),e=w(),n=qt(),t=K(),r=ht(),i=Nt(),a=Vt(),o=mt(),l=1,d=2,tt=4,et=a(function(g,f){var c={};if(g==null)return c;var C=!1;f=s(f,function(b){return b=t(b,g),C||(C=b.length>1),b}),r(g,o(g),c),C&&(c=e(c,l|d|tt,i));for(var D=f.length;D--;)n(c,f[D]);return c});return E=et,E}var At=Pt();const P=p(At);var M,G;function jt(){if(G)return M;G=1;var s=pt();function e(n,t,r,i){return i=typeof i=="function"?i:void 0,n==null?n:s(n,t,r,i)}return M=e,M}var Rt=jt();const A=p(Rt);function W(s){return!!s&&s===Object(s)&&!(s instanceof Date)}function $t(s,e,n){if(!W(e)||n&&typeof e!=typeof n)return v(e,n)?[]:[s];const t=[s];if(W(n)){for(const r in e)(!(r in n)||!v(e[r],n[r]))&&t.push(S(s,r));for(const r in n)r in e||t.push(S(s,r));t.length===1&&t.pop()}else for(const r in e)t.push(S(s,r));return t}function H(s){let e=0;return()=>`${s}-${("000"+(e++).toString(36)).slice(-4)}`}const Dt=H("uniforms");function It(s=Dt()){return H(s)}let m=class extends gt.Component{constructor(e){super(e),this.state={changed:!1,changedMap:Object.create(null),resetCount:0,submitted:!1,submitting:!1},this.mounted=!1,this.randomId=It(this.props.id),this.onReset=this.reset=this.onReset.bind(this),this.onChange=this.change=this.onChange.bind(this),this.onSubmit=this.submit=this.onSubmit.bind(this);const n=this.getModel.bind(this);this.getModel=(t,r=n(t))=>t!==void 0&&this.props.modelTransform?this.props.modelTransform(t,r):r}componentDidMount(){this.mounted=!0}componentDidUpdate(e,n,t){}componentWillUnmount(){this.mounted=!1,this.delayId&&clearTimeout(this.delayId)}getContext(){return{changed:this.state.changed,changedMap:this.state.changedMap,error:this.getContextError(),formRef:this,model:this.getContextModel(),name:this.getContextName(),onChange:this.getContextOnChange(),onSubmit:this.getContextOnSubmit(),randomId:this.randomId,schema:this.getContextSchema(),state:this.getContextState(),submitted:this.state.submitted,submitting:this.state.submitting,validating:!1}}getContextName(){return[]}getContextError(){return this.props.error}getContextModel(){return this.getModel("form")}getContextState(){return{disabled:!!this.props.disabled,readOnly:!!this.props.readOnly,showInlineError:!!this.props.showInlineError}}getContextSchema(){return this.props.schema}getContextOnChange(){return this.onChange}getContextOnSubmit(){return this.onSubmit}getModel(e,n=this.props.model){return n}getNativeFormProps(){const e=P(this.props,["autosave","autosaveDelay","disabled","error","model","modelTransform","onChange","onSubmit","readOnly","schema","showInlineError"]);return Object.assign(Object.assign({},e),{onSubmit:this.onSubmit,key:`reset-${this.state.resetCount}`})}onChange(e,n){if(this.mounted){const t=$t(e,n,N(this.getModel(),e));t.length!==0&&this.setState(r=>r.changed&&t.every(i=>!!N(r.changedMap,i))?null:{changed:!0,changedMap:t.reduce((i,a)=>A(i,a,{},h),h(r.changedMap))})}this.props.onChange&&this.props.onChange(e,n),this.mounted&&this.props.autosave&&(this.delayId&&clearTimeout(this.delayId),this.delayId=setTimeout(()=>{this.mounted&&this.setState(()=>null,()=>{this.onSubmit()})},this.props.autosaveDelay))}__reset(e){return{changed:!1,changedMap:Object.create(null),resetCount:e.resetCount+1,submitted:!1,submitting:!1}}onReset(){this.mounted&&this.setState(this.__reset)}onSubmit(e){e&&(e.preventDefault(),e.stopPropagation()),this.mounted&&this.setState(t=>t.submitted?null:{submitted:!0});const n=this.props.onSubmit(this.getModel("submit"));return n instanceof Promise?(this.mounted&&this.setState({submitting:!0}),n.finally(()=>{this.mounted&&this.setState({submitting:!1})})):Promise.resolve()}render(){return u.createElement(ft.Provider,{value:this.getContext()},u.createElement("form",Object.assign({},this.getNativeFormProps())))}};m.displayName="Form";m.defaultProps={autosave:!1,autosaveDelay:0,error:null,model:Object.create(null),noValidate:!0,onSubmit(){}};function j(s){class e extends s{getNativeFormProps(){const t=super.getNativeFormProps(),{errorsField:r=this.getErrorsField(),submitField:i=this.getSubmitField()}=t,a=bt(t,["errorsField","submitField"]),o=this.getAutoField();return a.children||(a.children=this.getContextSchema().getSubfields().map(l=>u.createElement(o,{key:l,name:l})).concat([u.createElement(r,{key:"$ErrorsField"}),u.createElement(i,{key:"$SubmitField"})])),a}getAutoField(){return()=>null}getErrorsField(){return()=>null}getSubmitField(){return()=>null}}return e.Quick=j,e.displayName=`Quick${s.displayName}`,e}const kt=j(m);var Lt=vt();const Qt=p(Lt);function R(s){class e extends s{constructor(t){super(t),this.state=Object.assign(Object.assign({},this.state),{error:null,validate:!1,validating:!1,validator:this.getContextSchema().getValidator(t.validator)}),this.onValidate=this.validate=this.onValidate.bind(this),this.onValidateModel=this.validateModel=this.onValidateModel.bind(this)}getContextError(){var t;return(t=super.getContextError())!==null&&t!==void 0?t:this.state.error}getContext(){return Object.assign(Object.assign({},super.getContext()),{validating:this.state.validating})}getNativeFormProps(){const t=super.getNativeFormProps();return P(t,["onValidate","validate","validator"])}componentDidUpdate(t,r,i){super.componentDidUpdate(t,r,i);const{model:a,schema:o,validate:l,validator:d}=this.props;o!==t.schema||d!==t.validator?this.setState({validator:o.getValidator(d)},()=>{q(l,this.state.validate)&&this.onValidate()}):!v(a,t.model)&&q(l,this.state.validate)&&this.onValidateModel(a)}onChange(t,r){q(this.props.validate,this.state.validate)&&this.onValidate(t,r),super.onChange(t,r)}__reset(t){return Object.assign(Object.assign({},super.__reset(t)),{error:null,validate:!1,validating:!1})}onSubmit(t){t&&(t.preventDefault(),t.stopPropagation()),this.setState({submitted:!0,validate:!0});const r=this.onValidate().then(i=>i!==null?Promise.reject(i):super.onSubmit().catch(a=>{throw this.setState({error:a}),a}));return r.catch(Qt),r}onValidate(t,r){let i=this.getContextModel();return i&&t&&(i=A(h(i),t,Ct(r),h)),this.onValidateModel(i)}onValidateModel(t){const r=this.getModel("validate",t),i=Tt(()=>{this.setState({validating:!0})});return i(this.state.validator(r),(a=null)=>i(this.props.onValidate(r,a),(o=null)=>{var l;return o=this.props.error===o?null:o,this.setState(d=>d.error===o&&!d.validating?null:{error:o,validating:!1}),Promise.resolve((l=this.props.error)!==null&&l!==void 0?l:o)}))}}return e.Validated=R,e.displayName=`Validated${s.displayName}`,e.defaultProps=Object.assign(Object.assign({},s.defaultProps),{onValidate(n,t){return t},validate:"onChangeAfterSubmit"}),e}function Tt(s){function e(n,t){return n instanceof Promise?(s(),n.then(t)):t(n)}return e}function q(s,e){return s==="onChange"||s==="onChangeAfterSubmit"&&e}const Ut=R(m),Gt=R(j(m));function J(s){class e extends s{constructor(t){super(t),this.state=Object.assign(Object.assign({},this.state),{model:this.mergeSchemaAndPropsModel(this.props.schema,this.props.model)})}mergeSchemaAndPropsModel(t,r){const i=t.getInitialModel();return Object.assign(i,r)}componentDidUpdate(t,r,i){const{model:a,schema:o}=this.props;v(a,t.model)||this.setState({model:this.mergeSchemaAndPropsModel(o,a)}),super.componentDidUpdate(t,r,i)}getNativeFormProps(){const t=super.getNativeFormProps();return P(t,["onChangeModel"])}getModel(t){return this.state.model}onChange(t,r){const i=N(this.state.model,t);super.onChange(t,r),this.setState(a=>({model:A(h(a.model),t,r,h)}),()=>{this.props.onChangeModel&&this.props.onChangeModel(this.state.model,{key:t,value:r,previousValue:i})})}__reset(t){return Object.assign(Object.assign({},super.__reset(t)),{model:this.props.model})}}return e.Auto=J,e.displayName=`Auto${s.displayName}`,e}const Wt=J(Gt);function X(s){class e extends s{getNativeFormProps(){const t=super.getNativeFormProps(),{className:r,layout:i="vertical"}=t,a=V(t,["className","layout"]);return Object.assign(Object.assign({},a),{className:St("ant-form","ant-form-"+i,r)})}}return e.AntD=X,e.displayName=`AntD${s.displayName}`,e}const $=X(m),wt={backgroundColor:"rgba(255, 85, 0, 0.2)",border:"1px solid rgb(255, 85, 0)",borderRadius:"2px",margin:"20px 0px",padding:"10px"},Kt={margin:"3px"};function Yt(s){var{children:e,style:n=wt}=s,t=V(s,["children","style"]);const{error:r,schema:i}=Y();return!r&&!e?null:u.createElement("div",Object.assign({style:n},_t(t)),e,u.createElement("ul",null,i.getErrorMessages(r).map((a,o)=>u.createElement("li",{key:o,style:Kt},a))))}function Ht(s){var{disabled:e,inputRef:n,value:t="Submit"}=s,r=V(s,["disabled","inputRef","value"]);const{error:i,state:a}=Y();return u.createElement(Ft,Object.assign({disabled:e===void 0?!!(i||a.disabled):e,htmlType:"submit",ref:n,type:"primary"},r),t)}function Z(s){class e extends kt.Quick(s){getAutoField(){return Ot}getErrorsField(){return Yt}getSubmitField(){return Ht}}return e.Quick=Z,e}const Jt=Z($);function z(s){class e extends Ut.Validated(s){}return e.Validated=z,e}const Xt=z($),Zt=Xt.Validated(Jt.Quick($));function B(s){class e extends Wt.Auto(s){}return e.Auto=B,e}const te=B(Zt);export{te as A,Yt as E,Ht as S};
